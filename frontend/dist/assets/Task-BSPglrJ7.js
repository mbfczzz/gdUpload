import{A as p,B as On,C as Jr,_ as Kr,a as ae,r as at,o as Qr,m as Zr,c as Xe,b as F,d as m,w as y,e as B,j as O,u as G,s as Yr,D as eo,g as to,h as no,i as oe,f as de,y as pe,t as J,F as ro,G as oo,H as io,I as so,J as ao,K as lo,L as uo,v as Yt,E as k,k as lt}from"./index-DS01B9Je.js";import{a as K}from"./index-B9ygI19o.js";var In={exports:{}},St={};p.crypto&&p.crypto.getRandomValues?St.randomBytes=function(e){var t=new Uint8Array(e);return p.crypto.getRandomValues(t),t}:St.randomBytes=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(Math.random()*256);return t};var co=St,en="abcdefghijklmnopqrstuvwxyz012345",_e={string:function(e){for(var t=en.length,n=co.randomBytes(e),r=[],o=0;o<e;o++)r.push(en.substr(n[o]%t,1));return r.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length,n=new Array(t+1).join("0");return(n+this.number(e)).slice(-t)}};(function(e){var t=_e,n={},r=!1,o=p.chrome&&p.chrome.app&&p.chrome.app.runtime;e.exports={attachEvent:function(a,c){typeof p.addEventListener<"u"?p.addEventListener(a,c,!1):p.document&&p.attachEvent&&(p.document.attachEvent("on"+a,c),p.attachEvent("on"+a,c))},detachEvent:function(a,c){typeof p.addEventListener<"u"?p.removeEventListener(a,c,!1):p.document&&p.detachEvent&&(p.document.detachEvent("on"+a,c),p.detachEvent("on"+a,c))},unloadAdd:function(a){if(o)return null;var c=t.string(8);return n[c]=a,r&&setTimeout(this.triggerUnloadCallbacks,0),c},unloadDel:function(a){a in n&&delete n[a]},triggerUnloadCallbacks:function(){for(var a in n)n[a](),delete n[a]}};var s=function(){r||(r=!0,e.exports.triggerUnloadCallbacks())};o||e.exports.attachEvent("unload",s)})(In);var ue=In.exports,fo=function(t,n){if(n=n.split(":")[0],t=+t,!t)return!1;switch(n){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0},jt={},ho=Object.prototype.hasOwnProperty,po;function tn(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function nn(e){try{return encodeURIComponent(e)}catch{return null}}function mo(e){for(var t=/([^=?#&]+)=?([^&]*)/g,n={},r;r=t.exec(e);){var o=tn(r[1]),s=tn(r[2]);o===null||s===null||o in n||(n[o]=s)}return n}function vo(e,t){t=t||"";var n=[],r,o;typeof t!="string"&&(t="?");for(o in e)if(ho.call(e,o)){if(r=e[o],!r&&(r===null||r===po||isNaN(r))&&(r=""),o=nn(o),r=nn(r),o===null||r===null)continue;n.push(o+"="+r)}return n.length?t+n.join("&"):""}jt.stringify=vo;jt.parse=mo;var Nn=fo,Ze=jt,go=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,Rn=/[\n\r\t]/g,bo=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,An=/:\d+$/,yo=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,wo=/^[a-zA-Z]:/;function Pt(e){return(e||"").toString().replace(go,"")}var Et=[["#","hash"],["?","query"],function(t,n){return Q(n.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],rn={hash:1,query:1};function jn(e){var t;typeof window<"u"?t=window:typeof p<"u"?t=p:typeof self<"u"?t=self:t={};var n=t.location||{};e=e||n;var r={},o=typeof e,s;if(e.protocol==="blob:")r=new Y(unescape(e.pathname),{});else if(o==="string"){r=new Y(e,{});for(s in rn)delete r[s]}else if(o==="object"){for(s in e)s in rn||(r[s]=e[s]);r.slashes===void 0&&(r.slashes=bo.test(e.href))}return r}function Q(e){return e==="file:"||e==="ftp:"||e==="http:"||e==="https:"||e==="ws:"||e==="wss:"}function Pn(e,t){e=Pt(e),e=e.replace(Rn,""),t=t||{};var n=yo.exec(e),r=n[1]?n[1].toLowerCase():"",o=!!n[2],s=!!n[3],a=0,c;return o?s?(c=n[2]+n[3]+n[4],a=n[2].length+n[3].length):(c=n[2]+n[4],a=n[2].length):s?(c=n[3]+n[4],a=n[3].length):c=n[4],r==="file:"?a>=2&&(c=c.slice(2)):Q(r)?c=n[4]:r?o&&(c=c.slice(2)):a>=2&&Q(t.protocol)&&(c=n[4]),{protocol:r,slashes:o||Q(r),slashesCount:a,rest:c}}function _o(e,t){if(e==="")return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,o=n[r-1],s=!1,a=0;r--;)n[r]==="."?n.splice(r,1):n[r]===".."?(n.splice(r,1),a++):a&&(r===0&&(s=!0),n.splice(r,1),a--);return s&&n.unshift(""),(o==="."||o==="..")&&n.push(""),n.join("/")}function Y(e,t,n){if(e=Pt(e),e=e.replace(Rn,""),!(this instanceof Y))return new Y(e,t,n);var r,o,s,a,c,u,l=Et.slice(),f=typeof t,i=this,v=0;for(f!=="object"&&f!=="string"&&(n=t,t=null),n&&typeof n!="function"&&(n=Ze.parse),t=jn(t),o=Pn(e||"",t),r=!o.protocol&&!o.slashes,i.slashes=o.slashes||r&&t.slashes,i.protocol=o.protocol||t.protocol||"",e=o.rest,(o.protocol==="file:"&&(o.slashesCount!==2||wo.test(e))||!o.slashes&&(o.protocol||o.slashesCount<2||!Q(i.protocol)))&&(l[3]=[/(.*)/,"pathname"]);v<l.length;v++){if(a=l[v],typeof a=="function"){e=a(e,i);continue}s=a[0],u=a[1],s!==s?i[u]=e:typeof s=="string"?(c=s==="@"?e.lastIndexOf(s):e.indexOf(s),~c&&(typeof a[2]=="number"?(i[u]=e.slice(0,c),e=e.slice(c+a[2])):(i[u]=e.slice(c),e=e.slice(0,c)))):(c=s.exec(e))&&(i[u]=c[1],e=e.slice(0,c.index)),i[u]=i[u]||r&&a[3]&&t[u]||"",a[4]&&(i[u]=i[u].toLowerCase())}n&&(i.query=n(i.query)),r&&t.slashes&&i.pathname.charAt(0)!=="/"&&(i.pathname!==""||t.pathname!=="")&&(i.pathname=_o(i.pathname,t.pathname)),i.pathname.charAt(0)!=="/"&&Q(i.protocol)&&(i.pathname="/"+i.pathname),Nn(i.port,i.protocol)||(i.host=i.hostname,i.port=""),i.username=i.password="",i.auth&&(c=i.auth.indexOf(":"),~c?(i.username=i.auth.slice(0,c),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=i.auth.slice(c+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(i.auth)),i.auth=i.password?i.username+":"+i.password:i.username),i.origin=i.protocol!=="file:"&&Q(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString()}function So(e,t,n){var r=this;switch(e){case"query":typeof t=="string"&&t.length&&(t=(n||Ze.parse)(t)),r[e]=t;break;case"port":r[e]=t,Nn(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,An.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(t){var o=e==="pathname"?"/":"#";r[e]=t.charAt(0)!==o?o+t:t}else r[e]=t;break;case"username":case"password":r[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");~s?(r.username=t.slice(0,s),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=t.slice(s+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(t))}for(var a=0;a<Et.length;a++){var c=Et[a];c[4]&&(r[c[1]]=r[c[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin=r.protocol!=="file:"&&Q(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r}function Eo(e){(!e||typeof e!="function")&&(e=Ze.stringify);var t,n=this,r=n.host,o=n.protocol;o&&o.charAt(o.length-1)!==":"&&(o+=":");var s=o+(n.protocol&&n.slashes||Q(n.protocol)?"//":"");return n.username?(s+=n.username,n.password&&(s+=":"+n.password),s+="@"):n.password?(s+=":"+n.password,s+="@"):n.protocol!=="file:"&&Q(n.protocol)&&!r&&n.pathname!=="/"&&(s+="@"),(r[r.length-1]===":"||An.test(n.hostname)&&!n.port)&&(r+=":"),s+=r+n.pathname,t=typeof n.query=="object"?e(n.query):n.query,t&&(s+=t.charAt(0)!=="?"?"?"+t:t),n.hash&&(s+=n.hash),s}Y.prototype={set:So,toString:Eo};Y.extractProtocol=Pn;Y.location=jn;Y.trimLeft=Pt;Y.qs=Ze;var Un=Y,xo=Un,V={getOrigin:function(e){if(!e)return null;var t=new xo(e);if(t.protocol==="file:")return null;var n=t.port;return n||(n=t.protocol==="https:"?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){var n=this.getOrigin(e)===this.getOrigin(t);return n},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(e.indexOf("?")===-1?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}},xt={exports:{}};typeof Object.create=="function"?xt.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:xt.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}};var E=xt.exports,P={};function Ye(){this._listeners={}}Ye.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];n.indexOf(t)===-1&&(n=n.concat([t])),this._listeners[e]=n};Ye.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var r=n.indexOf(t);if(r!==-1){n.length>1?this._listeners[e]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[e];return}}};Ye.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,n=arguments.length===1?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var r=this._listeners[t],o=0;o<r.length;o++)r[o].apply(this,n)};var Ln=Ye,ko=E,et=Ln;function le(){et.call(this)}ko(le,et);le.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}};le.prototype.once=function(e,t){var n=this,r=!1;function o(){n.removeListener(e,o),r||(r=!0,t.apply(this,arguments))}this.on(e,o)};le.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var n=arguments.length,r=new Array(n-1),o=1;o<n;o++)r[o-1]=arguments[o];for(var s=0;s<t.length;s++)t[s].apply(this,r)}};le.prototype.on=le.prototype.addListener=et.prototype.addEventListener;le.prototype.removeListener=et.prototype.removeEventListener;P.EventEmitter=le;var kt={exports:{}},on=p.WebSocket||p.MozWebSocket;on?kt.exports=function(t){return new on(t)}:kt.exports=void 0;var Co=kt.exports,Bn=ue,To=V,$o=E,Wn=P.EventEmitter,Mn=Co,sn=function(){};function se(e,t,n){if(!se.enabled())throw new Error("Transport created when disabled");Wn.call(this);var r=this,o=To.addPath(e,"/websocket");o.slice(0,5)==="https"?o="wss"+o.slice(5):o="ws"+o.slice(4),this.url=o,this.ws=new Mn(this.url,[],n),this.ws.onmessage=function(s){sn("message event",s.data),r.emit("message",s.data)},this.unloadRef=Bn.unloadAdd(function(){r.ws.close()}),this.ws.onclose=function(s){sn("close event",s.code,s.reason),r.emit("close",s.code,s.reason),r._cleanup()},this.ws.onerror=function(s){r.emit("close",1006,"WebSocket connection broken"),r._cleanup()}}$o(se,Wn);se.prototype.send=function(e){var t="["+e+"]";this.ws.send(t)};se.prototype.close=function(){var e=this.ws;this._cleanup(),e&&e.close()};se.prototype._cleanup=function(){var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),Bn.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()};se.enabled=function(){return!!Mn};se.transportName="websocket";se.roundTrips=2;var Oo=se,Io=E,Fn=P.EventEmitter,No=function(){};function ve(e,t){Fn.call(this),this.sendBuffer=[],this.sender=t,this.url=e}Io(ve,Fn);ve.prototype.send=function(e){this.sendBuffer.push(e),this.sendStop||this.sendSchedule()};ve.prototype.sendScheduleWait=function(){var e=this,t;this.sendStop=function(){e.sendStop=null,clearTimeout(t)},t=setTimeout(function(){e.sendStop=null,e.sendSchedule()},25)};ve.prototype.sendSchedule=function(){No("sendSchedule",this.sendBuffer.length);var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(n){e.sendStop=null,n?(e.emit("close",n.code||1006,"Sending error: "+n),e.close()):e.sendScheduleWait()}),this.sendBuffer=[]}};ve.prototype._cleanup=function(){this.removeAllListeners()};ve.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)};var Ro=ve,Ao=E,Dn=P.EventEmitter,jo=function(){};function tt(e,t,n){Dn.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}Ao(tt,Dn);tt.prototype._scheduleReceiver=function(){var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",function(n){e.emit("message",n)}),t.once("close",function(n,r){jo("close",n,r,e.pollIsClosing),e.poll=t=null,e.pollIsClosing||(r==="network"?e._scheduleReceiver():(e.emit("close",n||1006,r),e.removeAllListeners()))})};tt.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()};var Po=tt,Uo=E,Lo=V,Ut=Ro,Bo=Po;function Lt(e,t,n,r,o){var s=Lo.addPath(e,t),a=this;Ut.call(this,e,n),this.poll=new Bo(r,s,o),this.poll.on("message",function(c){a.emit("message",c)}),this.poll.once("close",function(c,u){a.poll=null,a.emit("close",c,u),a.close()})}Uo(Lt,Ut);Lt.prototype.close=function(){Ut.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)};var qn=Lt,Wo=E,Mo=V,zn=qn;function Fo(e){return function(t,n,r){var o={};typeof n=="string"&&(o.headers={"Content-type":"text/plain"});var s=Mo.addPath(t,"/xhr_send"),a=new e("POST",s,n,o);return a.once("finish",function(c){if(a=null,c!==200&&c!==204)return r(new Error("http status "+c));r()}),function(){a.close(),a=null;var c=new Error("Aborted");c.code=1e3,r(c)}}}function Vn(e,t,n,r){zn.call(this,e,t,Fo(r),n,r)}Wo(Vn,zn);var Se=Vn,Do=E,Xn=P.EventEmitter;function Ae(e,t){Xn.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(r,o){n._chunkHandler(r,o),n.xo=null;var s=r===200?"network":"permanent";n.emit("close",null,s),n._cleanup()})}Do(Ae,Xn);Ae.prototype._chunkHandler=function(e,t){if(!(e!==200||!t))for(var n=-1;;this.bufferPosition+=n+1){var r=t.slice(this.bufferPosition);if(n=r.indexOf(`
`),n===-1)break;var o=r.slice(0,n);o&&this.emit("message",o)}};Ae.prototype._cleanup=function(){this.removeAllListeners()};Ae.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()};var nt=Ae,Gn=P.EventEmitter,qo=E,Hn=ue,zo=V,Ie=p.XMLHttpRequest,ut=function(){};function ee(e,t,n,r){var o=this;Gn.call(this),setTimeout(function(){o._start(e,t,n,r)},0)}qo(ee,Gn);ee.prototype._start=function(e,t,n,r){var o=this;try{this.xhr=new Ie}catch{}if(!this.xhr){this.emit("finish",0,"no xhr support"),this._cleanup();return}t=zo.addQuery(t,"t="+ +new Date),this.unloadRef=Hn.unloadAdd(function(){o._cleanup(!0)});try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){ut("xhr timeout"),o.emit("finish",0,""),o._cleanup(!1)})}catch{this.emit("finish",0,""),this._cleanup(!1);return}if((!r||!r.noCredentials)&&ee.supportsCORS&&(this.xhr.withCredentials=!0),r&&r.headers)for(var s in r.headers)this.xhr.setRequestHeader(s,r.headers[s]);this.xhr.onreadystatechange=function(){if(o.xhr){var a=o.xhr,c,u;switch(ut("readyState",a.readyState),a.readyState){case 3:try{u=a.status,c=a.responseText}catch{}u===1223&&(u=204),u===200&&c&&c.length>0&&o.emit("chunk",u,c);break;case 4:u=a.status,u===1223&&(u=204),(u===12005||u===12029)&&(u=0),ut("finish",u,a.responseText),o.emit("finish",u,a.responseText),o._cleanup(!1);break}}};try{o.xhr.send(n)}catch{o.emit("finish",0,""),o._cleanup(!1)}};ee.prototype._cleanup=function(e){if(this.xhr){if(this.removeAllListeners(),Hn.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}};ee.prototype.close=function(){this._cleanup(!0)};ee.enabled=!!Ie;var an=["Active"].concat("Object").join("X");!ee.enabled&&an in p&&(Ie=function(){try{return new p[an]("Microsoft.XMLHTTP")}catch{return null}},ee.enabled=!!new Ie);var Jn=!1;try{Jn="withCredentials"in new Ie}catch{}ee.supportsCORS=Jn;var Kn=ee,Vo=E,Qe=Kn;function Bt(e,t,n,r){Qe.call(this,e,t,n,r)}Vo(Bt,Qe);Bt.enabled=Qe.enabled&&Qe.supportsCORS;var rt=Bt,Xo=E,Wt=Kn;function Mt(e,t,n){Wt.call(this,e,t,n,{noCredentials:!0})}Xo(Mt,Wt);Mt.enabled=Wt.enabled;var je=Mt,Pe={isOpera:function(){return p.navigator&&/opera/i.test(p.navigator.userAgent)},isKonqueror:function(){return p.navigator&&/konqueror/i.test(p.navigator.userAgent)},hasDomain:function(){if(!p.document)return!0;try{return!!p.document.domain}catch{return!1}}},Go=E,Qn=Se,Ho=nt,Ct=rt,Jo=je,Ko=Pe;function Ee(e){if(!Jo.enabled&&!Ct.enabled)throw new Error("Transport created when disabled");Qn.call(this,e,"/xhr_streaming",Ho,Ct)}Go(Ee,Qn);Ee.enabled=function(e){return e.nullOrigin||Ko.isOpera()?!1:Ct.enabled};Ee.transportName="xhr-streaming";Ee.roundTrips=2;Ee.needBody=!!p.document;var Qo=Ee,Zn=P.EventEmitter,Zo=E,Yn=ue,Yo=Pe,ei=V,ti=function(){};function ge(e,t,n){var r=this;Zn.call(this),setTimeout(function(){r._start(e,t,n)},0)}Zo(ge,Zn);ge.prototype._start=function(e,t,n){var r=this,o=new p.XDomainRequest;t=ei.addQuery(t,"t="+ +new Date),o.onerror=function(){r._error()},o.ontimeout=function(){r._error()},o.onprogress=function(){ti("progress",o.responseText),r.emit("chunk",200,o.responseText)},o.onload=function(){r.emit("finish",200,o.responseText),r._cleanup(!1)},this.xdr=o,this.unloadRef=Yn.unloadAdd(function(){r._cleanup(!0)});try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(n)}catch{this._error()}};ge.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)};ge.prototype._cleanup=function(e){if(this.xdr){if(this.removeAllListeners(),Yn.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}};ge.prototype.close=function(){this._cleanup(!0)};ge.enabled=!!(p.XDomainRequest&&Yo.hasDomain());var Ft=ge,ni=E,er=Se,ri=nt,Tt=Ft;function Ue(e){if(!Tt.enabled)throw new Error("Transport created when disabled");er.call(this,e,"/xhr_streaming",ri,Tt)}ni(Ue,er);Ue.enabled=function(e){return e.cookie_needed||e.nullOrigin?!1:Tt.enabled&&e.sameScheme};Ue.transportName="xdr-streaming";Ue.roundTrips=2;var tr=Ue,nr=p.EventSource,oi=E,rr=P.EventEmitter,ii=nr,ln=function(){};function Le(e){rr.call(this);var t=this,n=this.es=new ii(e);n.onmessage=function(r){ln("message",r.data),t.emit("message",decodeURI(r.data))},n.onerror=function(r){ln("error",n.readyState);var o=n.readyState!==2?"network":"permanent";t._cleanup(),t._close(o)}}oi(Le,rr);Le.prototype.abort=function(){this._cleanup(),this._close("user")};Le.prototype._cleanup=function(){var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)};Le.prototype._close=function(e){var t=this;setTimeout(function(){t.emit("close",null,e),t.removeAllListeners()},200)};var si=Le,ai=E,or=Se,li=si,ui=rt,ci=nr;function xe(e){if(!xe.enabled())throw new Error("Transport created when disabled");or.call(this,e,"/eventsource",li,ui)}ai(xe,or);xe.enabled=function(){return!!ci};xe.transportName="eventsource";xe.roundTrips=2;var un=xe,ct,cn;function ir(){return cn||(cn=1,ct="1.6.1"),ct}var sr={exports:{}};(function(e){var t=ue,n=Pe;e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in p||(p[e.exports.WPrefix]={})},postMessage:function(r,o){p.parent!==p&&p.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:r,data:o||""}),"*")},createIframe:function(r,o){var s=p.document.createElement("iframe"),a,c,u=function(){clearTimeout(a);try{s.onload=null}catch{}s.onerror=null},l=function(){s&&(u(),setTimeout(function(){s&&s.parentNode.removeChild(s),s=null},0),t.unloadDel(c))},f=function(v){s&&(l(),o(v))},i=function(v,g){setTimeout(function(){try{s&&s.contentWindow&&s.contentWindow.postMessage(v,g)}catch{}},0)};return s.src=r,s.style.display="none",s.style.position="absolute",s.onerror=function(){f("onerror")},s.onload=function(){clearTimeout(a),a=setTimeout(function(){f("onload timeout")},2e3)},p.document.body.appendChild(s),a=setTimeout(function(){f("timeout")},15e3),c=t.unloadAdd(l),{post:i,cleanup:l,loaded:u}},createHtmlfile:function(r,o){var s=["Active"].concat("Object").join("X"),a=new p[s]("htmlfile"),c,u,l,f=function(){clearTimeout(c),l.onerror=null},i=function(){a&&(f(),t.unloadDel(u),l.parentNode.removeChild(l),l=a=null,CollectGarbage())},v=function(C){a&&(i(),o(C))},g=function(C,w){try{setTimeout(function(){l&&l.contentWindow&&l.contentWindow.postMessage(C,w)},0)}catch{}};a.open(),a.write('<html><script>document.domain="'+p.document.domain+'";<\/script></html>'),a.close(),a.parentWindow[e.exports.WPrefix]=p[e.exports.WPrefix];var _=a.createElement("div");return a.body.appendChild(_),l=a.createElement("iframe"),_.appendChild(l),l.src=r,l.onerror=function(){v("onerror")},c=setTimeout(function(){v("timeout")},15e3),u=t.unloadAdd(i),{post:g,cleanup:i,loaded:f}}},e.exports.iframeEnabled=!1,p.document&&(e.exports.iframeEnabled=(typeof p.postMessage=="function"||typeof p.postMessage=="object")&&!n.isKonqueror())})(sr);var Be=sr.exports,fi=E,ar=P.EventEmitter,hi=ir(),$t=V,lr=Be,ur=ue,di=_e,Ce=function(){};function te(e,t,n){if(!te.enabled())throw new Error("Transport created when disabled");ar.call(this);var r=this;this.origin=$t.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=di.string(8);var o=$t.addPath(n,"/iframe.html")+"#"+this.windowId;this.iframeObj=lr.createIframe(o,function(s){r.emit("close",1006,"Unable to load an iframe ("+s+")"),r.close()}),this.onmessageCallback=this._message.bind(this),ur.attachEvent("message",this.onmessageCallback)}fi(te,ar);te.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){ur.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}};te.prototype._message=function(e){if(Ce("message",e.data),!$t.isOriginEqual(e.origin,this.origin)){Ce("not same origin",e.origin,this.origin);return}var t;try{t=JSON.parse(e.data)}catch{Ce("bad json",e.data);return}if(t.windowId!==this.windowId){Ce("mismatched window id",t.windowId,this.windowId);return}switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([hi,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var n;try{n=JSON.parse(t.data)}catch{Ce("bad json",t.data);return}this.emit("close",n[0],n[1]),this.close();break}};te.prototype.postMessage=function(e,t){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)};te.prototype.send=function(e){this.postMessage("m",e)};te.enabled=function(){return lr.iframeEnabled};te.transportName="iframe";te.roundTrips=2;var cr=te,Dt={isObject:function(e){var t=typeof e;return t==="function"||t==="object"&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}},pi=E,Ge=cr,mi=Dt,ft=function(e){function t(n,r){Ge.call(this,e.transportName,n,r)}return pi(t,Ge),t.enabled=function(n,r){if(!p.document)return!1;var o=mi.extend({},r);return o.sameOrigin=!0,e.enabled(o)&&Ge.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=Ge.roundTrips+e.roundTrips-1,t.facadeTransport=e,t},vi=E,me=Be,gi=V,fr=P.EventEmitter,bi=_e,yi=function(){};function H(e){fr.call(this);var t=this;me.polluteGlobalNamespace(),this.id="a"+bi.string(6),e=gi.addQuery(e,"c="+decodeURIComponent(me.WPrefix+"."+this.id)),yi("using htmlfile",H.htmlfileEnabled);var n=H.htmlfileEnabled?me.createHtmlfile:me.createIframe;p[me.WPrefix][this.id]={start:function(){t.iframeObj.loaded()},message:function(r){t.emit("message",r)},stop:function(){t._cleanup(),t._close("network")}},this.iframeObj=n(e,function(){t._cleanup(),t._close("permanent")})}vi(H,fr);H.prototype.abort=function(){this._cleanup(),this._close("user")};H.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete p[me.WPrefix][this.id]};H.prototype._close=function(e){this.emit("close",null,e),this.removeAllListeners()};H.htmlfileEnabled=!1;var fn=["Active"].concat("Object").join("X");if(fn in p)try{H.htmlfileEnabled=!!new p[fn]("htmlfile")}catch{}H.enabled=H.htmlfileEnabled||me.iframeEnabled;var wi=H,_i=E,Ot=wi,Si=je,hr=Se;function We(e){if(!Ot.enabled)throw new Error("Transport created when disabled");hr.call(this,e,"/htmlfile",Ot,Si)}_i(We,hr);We.enabled=function(e){return Ot.enabled&&e.sameOrigin};We.transportName="htmlfile";We.roundTrips=2;var hn=We,Ei=E,dr=Se,xi=nt,It=rt,pr=je;function Me(e){if(!pr.enabled&&!It.enabled)throw new Error("Transport created when disabled");dr.call(this,e,"/xhr",xi,It)}Ei(Me,dr);Me.enabled=function(e){return e.nullOrigin?!1:pr.enabled&&e.sameOrigin?!0:It.enabled};Me.transportName="xhr-polling";Me.roundTrips=2;var dn=Me,ki=E,mr=Se,Ci=tr,Ti=nt,pn=Ft;function Fe(e){if(!pn.enabled)throw new Error("Transport created when disabled");mr.call(this,e,"/xhr",Ti,pn)}ki(Fe,mr);Fe.enabled=Ci.enabled;Fe.transportName="xdr-polling";Fe.roundTrips=2;var $i=Fe,$e=Be,vr=_e,Oi=Pe,Ii=V,Ni=E,gr=P.EventEmitter,Ri=function(){};function z(e){var t=this;gr.call(this),$e.polluteGlobalNamespace(),this.id="a"+vr.string(6);var n=Ii.addQuery(e,"c="+encodeURIComponent($e.WPrefix+"."+this.id));p[$e.WPrefix][this.id]=this._callback.bind(this),this._createScript(n),this.timeoutId=setTimeout(function(){t._abort(new Error("JSONP script loaded abnormally (timeout)"))},z.timeout)}Ni(z,gr);z.prototype.abort=function(){if(p[$e.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}};z.timeout=35e3;z.scriptErrorTimeout=1e3;z.prototype._callback=function(e){this._cleanup(),!this.aborting&&(e&&this.emit("message",e),this.emit("close",null,"network"),this.removeAllListeners())};z.prototype._abort=function(e){this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()};z.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete p[$e.WPrefix][this.id]};z.prototype._scriptError=function(){var e=this;this.errorTimer||(this.errorTimer=setTimeout(function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))},z.scriptErrorTimeout))};z.prototype._createScript=function(e){var t=this,n=this.script=p.document.createElement("script"),r;if(n.id="a"+vr.string(8),n.src=e,n.type="text/javascript",n.charset="UTF-8",n.onerror=this._scriptError.bind(this),n.onload=function(){t._abort(new Error("JSONP script loaded abnormally (onload)"))},n.onreadystatechange=function(){if(Ri("onreadystatechange",n.readyState),/loaded|closed/.test(n.readyState)){if(n&&n.htmlFor&&n.onclick){t.loadedOkay=!0;try{n.onclick()}catch{}}n&&t._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof n.async>"u"&&p.document.attachEvent)if(Oi.isOpera())r=this.script2=p.document.createElement("script"),r.text="try{var a = document.getElementById('"+n.id+"'); if(a)a.onerror();}catch(x){};",n.async=r.async=!1;else{try{n.htmlFor=n.id,n.event="onclick"}catch{}n.async=!0}typeof n.async<"u"&&(n.async=!0);var o=p.document.getElementsByTagName("head")[0];o.insertBefore(n,o.firstChild),r&&o.insertBefore(r,o.firstChild)};var Ai=z,ji=_e,mn=V,Pi=function(){},D,Oe;function Ui(e){try{return p.document.createElement('<iframe name="'+e+'">')}catch{var t=p.document.createElement("iframe");return t.name=e,t}}function Li(){D=p.document.createElement("form"),D.style.display="none",D.style.position="absolute",D.method="POST",D.enctype="application/x-www-form-urlencoded",D.acceptCharset="UTF-8",Oe=p.document.createElement("textarea"),Oe.name="d",D.appendChild(Oe),p.document.body.appendChild(D)}var Bi=function(e,t,n){D||Li();var r="a"+ji.string(8);D.target=r,D.action=mn.addQuery(mn.addPath(e,"/jsonp_send"),"i="+r);var o=Ui(r);o.id=r,o.style.display="none",D.appendChild(o);try{Oe.value=t}catch{}D.submit();var s=function(a){o.onerror&&(o.onreadystatechange=o.onerror=o.onload=null,setTimeout(function(){o.parentNode.removeChild(o),o=null},500),Oe.value="",n(a))};return o.onerror=function(){s()},o.onload=function(){s()},o.onreadystatechange=function(a){Pi("onreadystatechange",r,o.readyState),o.readyState==="complete"&&s()},function(){s(new Error("Aborted"))}},Wi=E,br=qn,Mi=Ai,Fi=Bi;function be(e){if(!be.enabled())throw new Error("Transport created when disabled");br.call(this,e,"/jsonp",Fi,Mi)}Wi(be,br);be.enabled=function(){return!!p.document};be.transportName="jsonp-polling";be.roundTrips=1;be.needBody=!0;var Di=be,qi=[Oo,Qo,tr,un,ft(un),hn,ft(hn),dn,$i,ft(dn),Di],Ne=Array.prototype,qt=Object.prototype,zi=Function.prototype,Re=String.prototype,ht=Ne.slice,zt=qt.toString,yr=function(e){return qt.toString.call(e)==="[object Function]"},Vi=function(t){return zt.call(t)==="[object Array]"},wr=function(t){return zt.call(t)==="[object String]"},Xi=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}}(),Nt;Xi?Nt=function(e,t,n,r){!r&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:Nt=function(e,t,n,r){!r&&t in e||(e[t]=n)};var De=function(e,t,n){for(var r in t)qt.hasOwnProperty.call(t,r)&&Nt(e,r,t[r],n)},_r=function(e){if(e==null)throw new TypeError("can't convert "+e+" to object");return Object(e)};function Gi(e){var t=+e;return t!==t?t=0:t!==0&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function Hi(e){return e>>>0}function dt(){}De(zi,{bind:function(t){var n=this;if(!yr(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var r=ht.call(arguments,1),o=function(){if(this instanceof u){var l=n.apply(this,r.concat(ht.call(arguments)));return Object(l)===l?l:this}else return n.apply(t,r.concat(ht.call(arguments)))},s=Math.max(0,n.length-r.length),a=[],c=0;c<s;c++)a.push("$"+c);var u=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this, arguments); }")(o);return n.prototype&&(dt.prototype=n.prototype,u.prototype=new dt,dt.prototype=null),u}});De(Array,{isArray:Vi});var vn=Object("a"),Sr=vn[0]!=="a"||!(0 in vn),Ji=function(t){var n=!0,r=!0;return t&&(t.call("foo",function(o,s,a){typeof a!="object"&&(n=!1)}),t.call([1],function(){r=typeof this=="string"},"x")),!!t&&n&&r};De(Ne,{forEach:function(t){var n=_r(this),r=Sr&&wr(this)?this.split(""):n,o=arguments[1],s=-1,a=r.length>>>0;if(!yr(t))throw new TypeError;for(;++s<a;)s in r&&t.call(o,r[s],s,n)}},!Ji(Ne.forEach));var Ki=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;De(Ne,{indexOf:function(t){var n=Sr&&wr(this)?this.split(""):_r(this),r=n.length>>>0;if(!r)return-1;var o=0;for(arguments.length>1&&(o=Gi(arguments[1])),o=o>=0?o:Math.max(0,r+o);o<r;o++)if(o in n&&n[o]===t)return o;return-1}},Ki);var gn=Re.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?function(){var e=/()??/.exec("")[1]===void 0;Re.split=function(t,n){var r=this;if(t===void 0&&n===0)return[];if(zt.call(t)!=="[object RegExp]")return gn.call(this,t,n);var o=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),a=0,c,u,l,f;for(t=new RegExp(t.source,s+"g"),r+="",e||(c=new RegExp("^"+t.source+"$(?!\\s)",s)),n=n===void 0?-1>>>0:Hi(n);(u=t.exec(r))&&(l=u.index+u[0].length,!(l>a&&(o.push(r.slice(a,u.index)),!e&&u.length>1&&u[0].replace(c,function(){for(var i=1;i<arguments.length-2;i++)arguments[i]===void 0&&(u[i]=void 0)}),u.length>1&&u.index<r.length&&Ne.push.apply(o,u.slice(1)),f=u[0].length,a=l,o.length>=n)));)t.lastIndex===u.index&&t.lastIndex++;return a===r.length?(f||!t.test(""))&&o.push(""):o.push(r.slice(a)),o.length>n?o.slice(0,n):o}}():"0".split(void 0,0).length&&(Re.split=function(t,n){return t===void 0&&n===0?[]:gn.call(this,t,n)});var Qi=Re.substr,Zi="".substr&&"0b".substr(-1)!=="b";De(Re,{substr:function(t,n){return Qi.call(this,t<0&&(t=this.length+t)<0?0:t,n)}},Zi);var He=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,pt,Yi=function(e){var t,n={},r=[];for(t=0;t<65536;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,function(o){return n[o]="\\u"+("0000"+o.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n},es={quote:function(e){var t=JSON.stringify(e);return He.lastIndex=0,He.test(t)?(pt||(pt=Yi(He)),t.replace(He,function(n){return pt[n]})):t}},mt=function(){},ts=function(e){return{filterToEnabled:function(t,n){var r={main:[],facade:[]};return t?typeof t=="string"&&(t=[t]):t=[],e.forEach(function(o){if(o&&!(o.transportName==="websocket"&&n.websocket===!1)){if(t.length&&t.indexOf(o.transportName)===-1){mt("not in whitelist",o.transportName);return}o.enabled(n)?(mt("enabled",o.transportName),r.main.push(o),o.facadeTransport&&r.facade.push(o.facadeTransport)):mt("disabled",o.transportName)}}),r}}},Rt={};["log","debug","warn"].forEach(function(e){var t;try{t=p.console&&p.console[e]&&p.console[e].apply}catch{}Rt[e]=t?function(){return p.console[e].apply(p.console,arguments)}:e==="log"?function(){}:Rt.log});var ns=Rt;function ye(e){this.type=e}ye.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this};ye.prototype.stopPropagation=function(){};ye.prototype.preventDefault=function(){};ye.CAPTURING_PHASE=1;ye.AT_TARGET=2;ye.BUBBLING_PHASE=3;var Vt=ye,Er=p.location||{protocol:"http:",href:"http://localhost/",hash:""},rs=E,xr=Vt;function kr(){xr.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}rs(kr,xr);var os=kr,is=E,Cr=Vt;function Tr(e){Cr.call(this),this.initEvent("message",!1,!1),this.data=e}is(Tr,Cr);var ss=Tr,$r=P.EventEmitter,as=E;function qe(){var e=this;$r.call(this),this.to=setTimeout(function(){e.emit("finish",200,"{}")},qe.timeout)}as(qe,$r);qe.prototype.close=function(){clearTimeout(this.to)};qe.timeout=2e3;var ls=qe,Or=P.EventEmitter,us=E,cs=Dt;function Xt(e,t){Or.call(this);var n=this,r=+new Date;this.xo=new t("GET",e),this.xo.once("finish",function(o,s){var a,c;if(o===200){if(c=+new Date-r,s)try{a=JSON.parse(s)}catch{}cs.isObject(a)||(a={})}n.emit("finish",a,c),n.removeAllListeners()})}us(Xt,Or);Xt.prototype.close=function(){this.removeAllListeners(),this.xo.close()};var Ir=Xt,vt,bn;function Nr(){if(bn)return vt;bn=1;var e=E,t=P.EventEmitter,n=je,r=Ir;function o(s){var a=this;t.call(this),this.ir=new r(s,n),this.ir.once("finish",function(c,u){a.ir=null,a.emit("message",JSON.stringify([c,u]))})}return e(o,t),o.transportName="iframe-info-receiver",o.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},vt=o,vt}var Rr=P.EventEmitter,fs=E,hs=ue,Ar=cr,ds=Nr();function ot(e,t){var n=this;Rr.call(this);var r=function(){var o=n.ifr=new Ar(ds.transportName,t,e);o.once("message",function(s){if(s){var a;try{a=JSON.parse(s)}catch{n.emit("finish"),n.close();return}var c=a[0],u=a[1];n.emit("finish",c,u)}n.close()}),o.once("close",function(){n.emit("finish"),n.close()})};p.document.body?r():hs.attachEvent("load",r)}fs(ot,Rr);ot.enabled=function(){return Ar.enabled()};ot.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null};var ps=ot,jr=P.EventEmitter,ms=E,vs=V,yn=Ft,wn=rt,gs=je,bs=ls,_n=ps,Je=Ir;function ie(e,t){var n=this;jr.call(this),setTimeout(function(){n.doXhr(e,t)},0)}ms(ie,jr);ie._getReceiver=function(e,t,n){return n.sameOrigin?new Je(t,gs):wn.enabled?new Je(t,wn):yn.enabled&&n.sameScheme?new Je(t,yn):_n.enabled()?new _n(e,t):new Je(t,bs)};ie.prototype.doXhr=function(e,t){var n=this,r=vs.addPath(e,"/info");this.xo=ie._getReceiver(e,r,t),this.timeoutRef=setTimeout(function(){n._cleanup(!1),n.emit("finish")},ie.timeout),this.xo.once("finish",function(o,s){n._cleanup(!0),n.emit("finish",o,s)})};ie.prototype._cleanup=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null};ie.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)};ie.timeout=8e3;var ys=ie,gt,Sn;function ws(){if(Sn)return gt;Sn=1;var e=Be;function t(n){this._transport=n,n.on("message",this._transportMessage.bind(this)),n.on("close",this._transportClose.bind(this))}return t.prototype._transportClose=function(n,r){e.postMessage("c",JSON.stringify([n,r]))},t.prototype._transportMessage=function(n){e.postMessage("t",n)},t.prototype._send=function(n){this._transport.send(n)},t.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},gt=t,gt}var bt,En;function _s(){if(En)return bt;En=1;var e=V,t=ue,n=ws(),r=Nr(),o=Be,s=Er,a=function(){};return bt=function(c,u){var l={};u.forEach(function(i){i.facadeTransport&&(l[i.facadeTransport.transportName]=i.facadeTransport)}),l[r.transportName]=r;var f;c.bootstrap_iframe=function(){var i;o.currentWindowId=s.hash.slice(1);var v=function(g){if(g.source===parent&&(typeof f>"u"&&(f=g.origin),g.origin===f)){var _;try{_=JSON.parse(g.data)}catch{a("bad json",g.data);return}if(_.windowId===o.currentWindowId)switch(_.type){case"s":var C;try{C=JSON.parse(_.data)}catch{a("bad json",_.data);break}var w=C[0],$=C[1],I=C[2],x=C[3];if(w!==c.version)throw new Error('Incompatible SockJS! Main site uses: "'+w+'", the iframe: "'+c.version+'".');if(!e.isOriginEqual(I,s.href)||!e.isOriginEqual(x,s.href))throw new Error("Can't connect to different domain from within an iframe. ("+s.href+", "+I+", "+x+")");i=new n(new l[$](I,x));break;case"m":i._send(_.data);break;case"c":i&&i._close(),i=null;break}}};t.attachEvent("message",v),o.postMessage("s")}},bt}var Ss=Un,Es=E,xn=_e,xs=es,Te=V,ks=ue,Cs=ts,Ts=Dt,$s=Pe,Os=ns,Gt=Vt,Pr=Ln,Ke=Er,Is=os,kn=ss,Ns=ys,Z=function(){},Ur;function S(e,t,n){if(!(this instanceof S))return new S(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");Pr.call(this),this.readyState=S.CONNECTING,this.extensions="",this.protocol="",n=n||{},n.protocols_whitelist&&Os.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{},this._timeout=n.timeout||0;var r=n.sessionId||8;if(typeof r=="function")this._generateSessionId=r;else if(typeof r=="number")this._generateSessionId=function(){return xn.string(r)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=n.server||xn.numberString(1e3);var o=new Ss(e);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(o.hash)throw new SyntaxError("The URL must not contain a fragment");if(o.protocol!=="http:"&&o.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var s=o.protocol==="https:";if(Ke.protocol==="https:"&&!s&&!Te.isLoopbackAddr(o.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var a=t.sort();a.forEach(function(u,l){if(!u)throw new SyntaxError("The protocols entry '"+u+"' is invalid.");if(l<a.length-1&&u===a[l+1])throw new SyntaxError("The protocols entry '"+u+"' is duplicated.")});var c=Te.getOrigin(Ke.href);this._origin=c?c.toLowerCase():null,o.set("pathname",o.pathname.replace(/\/+$/,"")),this.url=o.href,Z("using url",this.url),this._urlInfo={nullOrigin:!$s.hasDomain(),sameOrigin:Te.isOriginEqual(this.url,Ke.href),sameScheme:Te.isSchemeEqual(this.url,Ke.href)},this._ir=new Ns(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}Es(S,Pr);function Lr(e){return e===1e3||e>=3e3&&e<=4999}S.prototype.close=function(e,t){if(e&&!Lr(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===S.CLOSING||this.readyState===S.CLOSED)){var n=!0;this._close(e||1e3,t||"Normal closure",n)}};S.prototype.send=function(e){if(typeof e!="string"&&(e=""+e),this.readyState===S.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===S.OPEN&&this._transport.send(xs.quote(e))};S.version=ir();S.CONNECTING=0;S.OPEN=1;S.CLOSING=2;S.CLOSED=3;S.prototype._receiveInfo=function(e,t){if(this._ir=null,!e){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=Ts.extend(e,this._urlInfo);var n=Ur.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,Z(this._transports.length+" enabled transports"),this._connect()};S.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(Z("attempt",e.transportName),e.needBody&&(!p.document.body||typeof p.document.readyState<"u"&&p.document.readyState!=="complete"&&p.document.readyState!=="interactive")){this._transports.unshift(e),ks.attachEvent("load",this._connect.bind(this));return}var t=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t);var n=Te.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),r=this._transportOptions[e.transportName],o=new e(n,this._transUrl,r);o.on("message",this._transportMessage.bind(this)),o.once("close",this._transportClose.bind(this)),o.transportName=e.transportName,this._transport=o;return}this._close(2e3,"All transports failed",!1)};S.prototype._transportTimeout=function(){this.readyState===S.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))};S.prototype._transportMessage=function(e){var t=this,n=e.slice(0,1),r=e.slice(1),o;switch(n){case"o":this._open();return;case"h":this.dispatchEvent(new Gt("heartbeat")),Z("heartbeat",this.transport);return}if(r)try{o=JSON.parse(r)}catch{}if(!(typeof o>"u"))switch(n){case"a":Array.isArray(o)&&o.forEach(function(s){Z("message",t.transport),t.dispatchEvent(new kn(s))});break;case"m":Z("message",this.transport),this.dispatchEvent(new kn(o));break;case"c":Array.isArray(o)&&o.length===2&&this._close(o[0],o[1],!0);break}};S.prototype._transportClose=function(e,t){if(Z("_transportClose",this.transport),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!Lr(e)&&e!==2e3&&this.readyState===S.CONNECTING){this._connect();return}this._close(e,t)};S.prototype._open=function(){Z("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===S.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=S.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new Gt("open")),Z("connected",this.transport)):this._close(1006,"Server lost session")};S.prototype._close=function(e,t,n){Z("_close",this.transport,e,t,n,this.readyState);var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===S.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=S.CLOSING,setTimeout((function(){this.readyState=S.CLOSED,r&&this.dispatchEvent(new Gt("error"));var o=new Is;o.wasClean=n||!1,o.code=e||1e3,o.reason=t,this.dispatchEvent(o),this.onmessage=this.onclose=this.onerror=null}).bind(this),0)};S.prototype.countRTO=function(e){return e>100?4*e:300+e};var Rs=function(e){return Ur=Cs(e),_s()(S,e),S},As=qi,js=Rs(As);"_sockjs_onload"in p&&setTimeout(p._sockjs_onload,1);const Ps=On(js);var it={exports:{}},Ht={};(function(e){(function(){var t,n,r,o,s={}.hasOwnProperty,a=[].slice;t={LF:`
`,NULL:"\0"},r=function(){var c;function u(l,f,i){this.command=l,this.headers=f??{},this.body=i??""}return u.prototype.toString=function(){var l,f,i,v,g;l=[this.command],i=this.headers["content-length"]===!1,i&&delete this.headers["content-length"],g=this.headers;for(f in g)s.call(g,f)&&(v=g[f],l.push(""+f+":"+v));return this.body&&!i&&l.push("content-length:"+u.sizeOfUTF8(this.body)),l.push(t.LF+this.body),l.join(t.LF)},u.sizeOfUTF8=function(l){return l?encodeURI(l).match(/%..|./g).length:0},c=function(l){var f,i,v,g,_,C,w,$,I,x,U,ne,X,q,ce,re,R;for(g=l.search(RegExp(""+t.LF+t.LF)),_=l.substring(0,g).split(t.LF),v=_.shift(),C={},ne=function(A){return A.replace(/^\s+|\s+$/g,"")},re=_.reverse(),X=0,ce=re.length;X<ce;X++)x=re[X],$=x.indexOf(":"),C[ne(x.substring(0,$))]=ne(x.substring($+1));if(f="",U=g+2,C["content-length"])I=parseInt(C["content-length"]),f=(""+l).substring(U,U+I);else for(i=null,w=q=U,R=l.length;(U<=R?q<R:q>R)&&(i=l.charAt(w),i!==t.NULL);w=U<=R?++q:--q)f+=i;return new u(v,C,f)},u.unmarshall=function(l){var f;return function(){var i,v,g,_;for(g=l.split(RegExp(""+t.NULL+t.LF+"*")),_=[],i=0,v=g.length;i<v;i++)f=g[i],(f!=null?f.length:void 0)>0&&_.push(c(f));return _}()},u.marshall=function(l,f,i){var v;return v=new u(l,f,i),v.toString()+t.NULL},u}(),n=function(){var c;function u(l){this.ws=l,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16*1024,this.subscriptions={}}return u.prototype.debug=function(l){var f;return typeof window<"u"&&window!==null&&(f=window.console)!=null?f.log(l):void 0},c=function(){return Date.now?Date.now():new Date().valueOf},u.prototype._transmit=function(l,f,i){var v;for(v=r.marshall(l,f,i),typeof this.debug=="function"&&this.debug(">>> "+v);;)if(v.length>this.maxWebSocketFrameSize)this.ws.send(v.substring(0,this.maxWebSocketFrameSize)),v=v.substring(this.maxWebSocketFrameSize),typeof this.debug=="function"&&this.debug("remaining = "+v.length);else return this.ws.send(v)},u.prototype._setupHeartbeat=function(l){var f,i,v,g,_,C;if(!((_=l.version)!==o.VERSIONS.V1_1&&_!==o.VERSIONS.V1_2)&&(C=function(){var w,$,I,x;for(I=l["heart-beat"].split(","),x=[],w=0,$=I.length;w<$;w++)g=I[w],x.push(parseInt(g));return x}(),i=C[0],f=C[1],this.heartbeat.outgoing===0||f===0||(v=Math.max(this.heartbeat.outgoing,f),typeof this.debug=="function"&&this.debug("send PING every "+v+"ms"),this.pinger=o.setInterval(v,function(w){return function(){return w.ws.send(t.LF),typeof w.debug=="function"?w.debug(">>> PING"):void 0}}(this))),!(this.heartbeat.incoming===0||i===0)))return v=Math.max(this.heartbeat.incoming,i),typeof this.debug=="function"&&this.debug("check PONG every "+v+"ms"),this.ponger=o.setInterval(v,function(w){return function(){var $;if($=c()-w.serverActivity,$>v*2)return typeof w.debug=="function"&&w.debug("did not receive server activity for the last "+$+"ms"),w.ws.close()}}(this))},u.prototype._parseConnect=function(){var l,f,i,v;switch(l=1<=arguments.length?a.call(arguments,0):[],v={},l.length){case 2:v=l[0],f=l[1];break;case 3:l[1]instanceof Function?(v=l[0],f=l[1],i=l[2]):(v.login=l[0],v.passcode=l[1],f=l[2]);break;case 4:v.login=l[0],v.passcode=l[1],f=l[2],i=l[3];break;default:v.login=l[0],v.passcode=l[1],f=l[2],i=l[3],v.host=l[4]}return[v,f,i]},u.prototype.connect=function(){var l,f,i,v;return l=1<=arguments.length?a.call(arguments,0):[],v=this._parseConnect.apply(this,l),i=v[0],this.connectCallback=v[1],f=v[2],typeof this.debug=="function"&&this.debug("Opening Web Socket..."),this.ws.onmessage=function(g){return function(_){var C,w,$,I,x,U,ne,X,q,ce,re,R;if(I=typeof ArrayBuffer<"u"&&_.data instanceof ArrayBuffer?(C=new Uint8Array(_.data),typeof g.debug=="function"&&g.debug("--- got data length: "+C.length),function(){var A,ze,ke;for(ke=[],A=0,ze=C.length;A<ze;A++)w=C[A],ke.push(String.fromCharCode(w));return ke}().join("")):_.data,g.serverActivity=c(),I===t.LF){typeof g.debug=="function"&&g.debug("<<< PONG");return}for(typeof g.debug=="function"&&g.debug("<<< "+I),re=r.unmarshall(I),R=[],q=0,ce=re.length;q<ce;q++)switch(x=re[q],x.command){case"CONNECTED":typeof g.debug=="function"&&g.debug("connected to server "+x.headers.server),g.connected=!0,g._setupHeartbeat(x.headers),R.push(typeof g.connectCallback=="function"?g.connectCallback(x):void 0);break;case"MESSAGE":X=x.headers.subscription,ne=g.subscriptions[X]||g.onreceive,ne?($=g,U=x.headers["message-id"],x.ack=function(A){return A==null&&(A={}),$.ack(U,X,A)},x.nack=function(A){return A==null&&(A={}),$.nack(U,X,A)},R.push(ne(x))):R.push(typeof g.debug=="function"?g.debug("Unhandled received MESSAGE: "+x):void 0);break;case"RECEIPT":R.push(typeof g.onreceipt=="function"?g.onreceipt(x):void 0);break;case"ERROR":R.push(typeof f=="function"?f(x):void 0);break;default:R.push(typeof g.debug=="function"?g.debug("Unhandled frame: "+x):void 0)}return R}}(this),this.ws.onclose=function(g){return function(){var _;return _="Whoops! Lost connection to "+g.ws.url,typeof g.debug=="function"&&g.debug(_),g._cleanUp(),typeof f=="function"?f(_):void 0}}(this),this.ws.onopen=function(g){return function(){return typeof g.debug=="function"&&g.debug("Web Socket Opened..."),i["accept-version"]=o.VERSIONS.supportedVersions(),i["heart-beat"]=[g.heartbeat.outgoing,g.heartbeat.incoming].join(","),g._transmit("CONNECT",i)}}(this)},u.prototype.disconnect=function(l,f){return f==null&&(f={}),this._transmit("DISCONNECT",f),this.ws.onclose=null,this.ws.close(),this._cleanUp(),typeof l=="function"?l():void 0},u.prototype._cleanUp=function(){if(this.connected=!1,this.pinger&&o.clearInterval(this.pinger),this.ponger)return o.clearInterval(this.ponger)},u.prototype.send=function(l,f,i){return f==null&&(f={}),i==null&&(i=""),f.destination=l,this._transmit("SEND",f,i)},u.prototype.subscribe=function(l,f,i){var v;return i==null&&(i={}),i.id||(i.id="sub-"+this.counter++),i.destination=l,this.subscriptions[i.id]=f,this._transmit("SUBSCRIBE",i),v=this,{id:i.id,unsubscribe:function(){return v.unsubscribe(i.id)}}},u.prototype.unsubscribe=function(l){return delete this.subscriptions[l],this._transmit("UNSUBSCRIBE",{id:l})},u.prototype.begin=function(l){var f,i;return i=l||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:i}),f=this,{id:i,commit:function(){return f.commit(i)},abort:function(){return f.abort(i)}}},u.prototype.commit=function(l){return this._transmit("COMMIT",{transaction:l})},u.prototype.abort=function(l){return this._transmit("ABORT",{transaction:l})},u.prototype.ack=function(l,f,i){return i==null&&(i={}),i["message-id"]=l,i.subscription=f,this._transmit("ACK",i)},u.prototype.nack=function(l,f,i){return i==null&&(i={}),i["message-id"]=l,i.subscription=f,this._transmit("NACK",i)},u}(),o={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(c,u){var l,f;return u==null&&(u=["v10.stomp","v11.stomp"]),l=o.WebSocketClass||WebSocket,f=new l(c,u),new n(f)},over:function(c){return new n(c)},Frame:r},e!==null&&(e.Stomp=o),typeof window<"u"&&window!==null?(o.setInterval=function(c,u){return window.setInterval(u,c)},o.clearInterval=function(c){return window.clearInterval(c)},window.Stomp=o):e||(self.Stomp=o)}).call(p)})(Ht);var At={};const Us={},Ls=Object.freeze(Object.defineProperty({__proto__:null,default:Us},Symbol.toStringTag,{value:"Module"})),Bs=Jr(Ls);var yt,Cn;function Ws(){if(Cn)return yt;Cn=1;var e=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return yt=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return e()}try{return __global__||e()}finally{delete Object.prototype.__global__}}(),yt}const Ms="1.0.35",Fs={version:Ms};var wt,Tn;function Ds(){return Tn||(Tn=1,wt=Fs.version),wt}var _t,$n;function qs(){if($n)return _t;$n=1;var e;if(typeof globalThis=="object")e=globalThis;else try{e=Ws()}catch{}finally{if(!e&&typeof window<"u"&&(e=window),!e)throw new Error("Could not determine global this")}var t=e.WebSocket||e.MozWebSocket,n=Ds();function r(o,s){var a;return s?a=new t(o,s):a=new t(o),a}return t&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(o){Object.defineProperty(r,o,{get:function(){return t[o]}})}),_t={w3cwebsocket:t?r:null,version:n},_t}(function(){var e,t,n,r,o,s;e=Ht,t=Bs,e.Stomp.setInterval=function(a,c){return setInterval(c,a)},e.Stomp.clearInterval=function(a){return clearInterval(a)},o=function(a,c){var u,l;return u=null,l={url:"tcp:// "+c+":"+a,send:function(f){return u.write(f)},close:function(){return u.end()}},u=t.connect(a,c,function(f){return l.onopen()}),u.on("error",function(f){return typeof l.onclose=="function"?l.onclose(f):void 0}),u.on("close",function(f){return typeof l.onclose=="function"?l.onclose(f):void 0}),u.on("data",function(f){var i;return i={data:f.toString()},l.onmessage(i)}),l},s=function(a){var c,u,l,f;return c=qs().client,u=null,f={url:a,send:function(i){return u.sendUTF(i)},close:function(){return u.close()}},l=new c,l.on("connect",function(i){return u=i,f.onopen(),u.on("error",function(v){return typeof f.onclose=="function"?f.onclose(v):void 0}),u.on("close",function(){return typeof f.onclose=="function"?f.onclose():void 0}),u.on("message",function(v){var g;if(v.type==="utf8")return g={data:v.utf8Data},f.onmessage(g)})}),l.connect(a),f},n=function(a,c){var u;return u=o(c,a),e.Stomp.over(u)},r=function(a){var c;return c=s(a),e.Stomp.over(c)},At.overTCP=n,At.overWS=r}).call(p);var zs=Ht,Br=At;it.exports=zs.Stomp;it.exports.overTCP=Br.overTCP;it.exports.overWS=Br.overWS;var Vs=it.exports;const Xs=On(Vs);class Gs{constructor(){this.stompClient=null,this.connected=!1,this.subscriptions=new Map,this.reconnectTimer=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5}connect(t){return new Promise((n,r)=>{try{if(!t){const s=window.location.protocol==="https:"?"https:":"http:",a=window.location.host;t=`${s}//${a}/api/ws`}console.log("WebSocket:",t);const o=new Ps(t);this.stompClient=Xs.over(o),this.stompClient.debug=null,this.stompClient.connect({},s=>{console.log("WebSocket:",s),this.connected=!0,this.reconnectAttempts=0,n(s)},s=>{console.error("WebSocket:",s),this.connected=!1,this.handleReconnect(),r(s)})}catch(o){console.error("WebSocket:",o),r(o)}})}disconnect(){this.stompClient&&this.connected&&this.stompClient.disconnect(()=>{console.log("WebSocket"),this.connected=!1}),this.subscriptions.clear(),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null)}subscribe(t,n){if(!this.connected||!this.stompClient)return console.warn("WebSocket:",t),null;const r=this.stompClient.subscribe(t,s=>{try{const a=JSON.parse(s.body);n(a)}catch(a){console.error("WebSocket:",a)}}),o=r.id;return this.subscriptions.set(o,r),console.log(":",t,o),o}unsubscribe(t){const n=this.subscriptions.get(t);n&&(n.unsubscribe(),this.subscriptions.delete(t),console.log(":",t))}send(t,n){if(!this.connected||!this.stompClient){console.warn("WebSocket");return}this.stompClient.send(t,{},JSON.stringify(n))}handleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("WebSocket");return}this.reconnectAttempts++;const t=Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4);console.log(`WebSocket ${t}ms  ${this.reconnectAttempts} `),this.reconnectTimer=setTimeout(()=>{console.log("WebSocket..."),this.connect().catch(()=>{})},t)}isConnected(){return this.connected}}const we=new Gs,Hs={class:"task-container"},Js={class:"card-header"},Ks={style:{color:"#67c23a"}},Qs={key:0,style:{color:"#f56c6c","margin-left":"8px"}},Zs={style:{color:"#909399","margin-left":"8px"}},Ys={key:0},ea={key:1,style:{color:"#909399"}},ta={class:"action-buttons"},na={__name:"Task",setup(e){const t=ae(!1),n=ae([]),r=ae([]),o=ae(!1),s=ae([]),a=ae(null),c=ae([]),u=ae(!1),l=at({taskId:null,taskName:"",oldPath:"",newPath:""}),f=at({keyword:"",status:null}),i=at({current:1,size:10,total:0}),v=async()=>{try{await we.connect(),console.log("WebSocket");const d=we.subscribe("/topic/tasks",h=>{console.log(":",h),_(h)});d&&c.value.push(d)}catch(d){console.error("WebSocket:",d)}},g=d=>{if(!we.isConnected())return;const h=we.subscribe(`/topic/task/${d}`,T=>{console.log(` ${d} :`,T),_(T)});h&&c.value.push(h)},_=d=>{const{taskId:h,type:T}=d,L=n.value.findIndex(fe=>fe.id===h);if(L===-1){(T==="TASK_STATUS"||T==="TASK_PROGRESS")&&w();return}const j=n.value[L];if(T==="TASK_PROGRESS")j.progress=d.progress||0,j.uploadedCount=d.uploadedCount||0,j.totalCount=d.totalCount||0,j.uploadedSize=d.uploadedSize||0,j.totalSize=d.totalSize||0,j.currentFileName=d.currentFileName||"";else if(T==="TASK_STATUS")j.status=d.status,d.message&&k.info(d.message);else if(T==="FILE_STATUS"&&o.value&&s.value.length>0){const fe=s.value.findIndex(W=>W.id===d.fileId);fe!==-1&&(s.value[fe].status=d.status,d.message&&(s.value[fe].errorMessage=d.message))}n.value[L]={...j}},C=()=>{c.value.forEach(d=>{we.unsubscribe(d)}),c.value=[],we.disconnect()},w=async()=>{t.value=!0;try{const{data:d}=await K.get("/api/task/page",{params:{current:i.current,size:i.size,keyword:f.keyword,status:f.status}});d.code===200&&(n.value=d.data.records,i.total=d.data.total,n.value.forEach(h=>{h.status===1&&g(h.id)}))}catch{k.error("")}finally{t.value=!1}},$=()=>{i.current=1,w()},I=()=>{f.keyword="",f.status=null,i.current=1,w()},x=async d=>{try{const{data:h}=await K.put(`/api/task/${d}/start`);h.code===200?(k.success(""),g(d),w()):k.error(h.message)}catch{k.error("")}},U=async d=>{try{const{data:h}=await K.put(`/api/task/${d}/pause`);h.code===200?(k.success(""),w()):k.error(h.message)}catch{k.error("")}},ne=async d=>{try{await lt.confirm("","",{confirmButtonText:"",cancelButtonText:"",type:"warning"});const{data:h}=await K.put(`/api/task/${d}/cancel`);h.code===200?(k.success(""),w()):k.error(h.message)}catch(h){h!=="cancel"&&k.error("")}},X=async d=>{try{const{data:h}=await K.put(`/api/task/${d}/retry`);h.code===200?(k.success(""),g(d),w()):k.error(h.message)}catch{k.error("")}},q=async d=>{try{a.value=d.taskType;const{data:h}=await K.get(`/api/task/${d.id}/files`);h.code===200?(s.value=h.data,o.value=!0):k.error(h.message)}catch{k.error("")}},ce=async d=>{try{await lt.confirm("","",{confirmButtonText:"",cancelButtonText:"",type:"warning"});const{data:h}=await K.delete(`/api/task/${d}`);h.code===200?(k.success(""),w()):k.error(h.message)}catch(h){h!=="cancel"&&k.error("")}},re=async()=>{try{await lt.confirm("","",{confirmButtonText:"",cancelButtonText:"",type:"warning"});const{data:d}=await K.delete("/api/task/batch",{data:r.value});d.code===200?(k.success(""),r.value=[],w()):k.error(d.message)}catch(d){d!=="cancel"&&k.error("")}},R=d=>{r.value=d.map(h=>h.id)},A=()=>{w()},ze=()=>{w()},ke=d=>({0:"info",1:"primary",2:"success",3:"warning",4:"info",5:"danger"})[d]||"info",Wr=(d,h)=>h===3?{0:"",1:"",2:"",3:"",4:"",5:""}[d]||"":{0:"",1:"",2:"",3:"",4:"",5:""}[d]||"",Mr=d=>d===2?"success":d===5?"exception":"",Fr=d=>({0:"info",1:"primary",2:"success",3:"danger",4:"warning"})[d]||"info",Dr=d=>a.value===3?{0:"",1:"",2:"",3:"",4:""}[d]||"":{0:"",1:"",2:"",3:""}[d]||"",qr=async d=>{try{const{data:h}=await K.post(`/api/fix/emby-file-info?taskId=${d}`);if(h.code===200){const T=h.data;k.success(`: ${T.totalCount}, : ${T.updatedCount}, : ${T.skippedCount}, : ${T.errorCount}`),w()}else k.error(h.message)}catch{k.error("")}},zr=d=>{l.taskId=d.id,l.taskName=d.taskName,l.oldPath=d.targetPath,l.newPath=d.targetPath,u.value=!0},Vr=async()=>{if(!l.newPath||l.newPath.trim()===""){k.warning("");return}try{const{data:d}=await K.put(`/api/task/${l.taskId}/target-path`,{targetPath:l.newPath});d.code===200?(k.success(""),u.value=!1,w()):k.error(d.message)}catch{k.error("")}},st=d=>{if(!d||d===0)return"0 B";const h=1024,T=["B","KB","MB","GB","TB"],L=Math.floor(Math.log(d)/Math.log(h));return(d/Math.pow(h,L)).toFixed(2)+" "+T[L]};return Qr(()=>{v(),w()}),Zr(()=>{C()}),(d,h)=>{const T=B("el-input"),L=B("el-form-item"),j=B("el-option"),fe=B("el-select"),W=B("el-icon"),M=B("el-button"),Jt=B("el-form"),Kt=B("el-card"),N=B("el-table-column"),Ve=B("el-tag"),Xr=B("el-progress"),Qt=B("el-table"),Gr=B("el-pagination"),Zt=B("el-dialog"),Hr=no("loading");return F(),Xe("div",Hs,[m(Kt,{class:"search-card"},{default:y(()=>[m(Jt,{inline:!0,model:f},{default:y(()=>[m(L,{label:""},{default:y(()=>[m(T,{modelValue:f.keyword,"onUpdate:modelValue":h[0]||(h[0]=b=>f.keyword=b),placeholder:"",clearable:""},null,8,["modelValue"])]),_:1}),m(L,{label:""},{default:y(()=>[m(fe,{modelValue:f.status,"onUpdate:modelValue":h[1]||(h[1]=b=>f.status=b),placeholder:"",clearable:""},{default:y(()=>[m(j,{label:"",value:null}),m(j,{label:"",value:0}),m(j,{label:"",value:1}),m(j,{label:"",value:2}),m(j,{label:"",value:3}),m(j,{label:"",value:4}),m(j,{label:"",value:5})]),_:1},8,["modelValue"])]),_:1}),m(L,null,{default:y(()=>[m(M,{type:"primary",onClick:$},{default:y(()=>[m(W,null,{default:y(()=>[m(G(Yr))]),_:1}),h[10]||(h[10]=O("  ",-1))]),_:1}),m(M,{onClick:I},{default:y(()=>[m(W,null,{default:y(()=>[m(G(eo))]),_:1}),h[11]||(h[11]=O("  ",-1))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),m(Kt,{class:"table-card"},{header:y(()=>[de("div",Js,[h[13]||(h[13]=de("span",{class:"card-title"},"",-1)),de("div",null,[m(M,{type:"danger",disabled:r.value.length===0,onClick:re},{default:y(()=>[m(W,null,{default:y(()=>[m(G(Yt))]),_:1}),h[12]||(h[12]=O("  ",-1))]),_:1},8,["disabled"])])])]),default:y(()=>[to((F(),oe(Qt,{data:n.value,style:{width:"100%"},onSelectionChange:R},{default:y(()=>[m(N,{type:"selection",width:"55"}),m(N,{prop:"taskName",label:"","min-width":"150"}),m(N,{label:"",width:"110"},{default:y(({row:b})=>[b.taskType===3?(F(),oe(Ve,{key:0,type:"warning",size:"small"},{default:y(()=>[...h[14]||(h[14]=[O("Emby",-1)])]),_:1})):(F(),oe(Ve,{key:1,type:"primary",size:"small"},{default:y(()=>[...h[15]||(h[15]=[O("",-1)])]),_:1}))]),_:1}),m(N,{prop:"sourcePath",label:"","min-width":"200","show-overflow-tooltip":""}),m(N,{prop:"targetPath",label:"","min-width":"200","show-overflow-tooltip":""}),m(N,{label:"",width:"200"},{default:y(({row:b})=>[m(Xr,{percentage:b.progress,status:Mr(b.status)},null,8,["percentage","status"])]),_:1}),m(N,{label:"",width:"180"},{default:y(({row:b})=>[de("div",null,[de("span",Ks,J(b.taskType===3?"":"")+": "+J(b.uploadedCount),1),b.failedCount>0?(F(),Xe("span",Qs,": "+J(b.failedCount),1)):pe("",!0),de("span",Zs,"/ "+J(b.totalCount),1)])]),_:1}),m(N,{label:"",width:"150"},{default:y(({row:b})=>[b.taskType!==3?(F(),Xe("span",Ys,J(st(b.uploadedSize))+" / "+J(st(b.totalSize)),1)):(F(),Xe("span",ea,"-"))]),_:1}),m(N,{label:"",width:"100"},{default:y(({row:b})=>[m(Ve,{type:ke(b.status)},{default:y(()=>[O(J(Wr(b.status,b.taskType)),1)]),_:2},1032,["type"])]),_:1}),m(N,{prop:"createTime",label:"",width:"180"}),m(N,{label:"",width:"320",fixed:"right"},{default:y(({row:b})=>[de("div",ta,[b.status===0||b.status===3?(F(),oe(M,{key:0,type:"primary",size:"small",onClick:he=>x(b.id)},{default:y(()=>[m(W,null,{default:y(()=>[m(G(ro))]),_:1}),O(" "+J(b.taskType===3?"":""),1)]),_:2},1032,["onClick"])):pe("",!0),b.status===1?(F(),oe(M,{key:1,type:"warning",size:"small",onClick:he=>U(b.id)},{default:y(()=>[m(W,null,{default:y(()=>[m(G(oo))]),_:1}),h[16]||(h[16]=O("  ",-1))]),_:1},8,["onClick"])):pe("",!0),(b.status===5||b.status===2&&b.failedCount>0)&&b.taskType!==3?(F(),oe(M,{key:2,type:"success",size:"small",onClick:he=>X(b.id)},{default:y(()=>[m(W,null,{default:y(()=>[m(G(io))]),_:1}),h[17]||(h[17]=O("  ",-1))]),_:1},8,["onClick"])):pe("",!0),b.status===1?(F(),oe(M,{key:3,type:"danger",size:"small",onClick:he=>ne(b.id)},{default:y(()=>[m(W,null,{default:y(()=>[m(G(so))]),_:1}),h[18]||(h[18]=O("  ",-1))]),_:1},8,["onClick"])):pe("",!0),m(M,{type:"info",size:"small",onClick:he=>q(b)},{default:y(()=>[m(W,null,{default:y(()=>[m(G(ao))]),_:1}),h[19]||(h[19]=O("  ",-1))]),_:1},8,["onClick"]),m(M,{type:"warning",size:"small",onClick:he=>qr(b.id)},{default:y(()=>[m(W,null,{default:y(()=>[m(G(lo))]),_:1}),h[20]||(h[20]=O("  ",-1))]),_:1},8,["onClick"]),b.status===0||b.status===3||b.status===5?(F(),oe(M,{key:4,type:"primary",size:"small",onClick:he=>zr(b)},{default:y(()=>[m(W,null,{default:y(()=>[m(G(uo))]),_:1}),h[21]||(h[21]=O("  ",-1))]),_:1},8,["onClick"])):pe("",!0),m(M,{type:"danger",size:"small",onClick:he=>ce(b.id)},{default:y(()=>[m(W,null,{default:y(()=>[m(G(Yt))]),_:1}),h[22]||(h[22]=O("  ",-1))]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])),[[Hr,t.value]]),m(Gr,{"current-page":i.current,"onUpdate:currentPage":h[2]||(h[2]=b=>i.current=b),"page-size":i.size,"onUpdate:pageSize":h[3]||(h[3]=b=>i.size=b),total:i.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:A,onCurrentChange:ze},null,8,["current-page","page-size","total"])]),_:1}),m(Zt,{modelValue:o.value,"onUpdate:modelValue":h[4]||(h[4]=b=>o.value=b),title:a.value===3?"":"",width:"80%","close-on-click-modal":!1},{default:y(()=>[m(Qt,{data:s.value,style:{width:"100%"},"max-height":"500"},{default:y(()=>[m(N,{prop:"fileName",label:"","min-width":"200","show-overflow-tooltip":""}),a.value!==3?(F(),oe(N,{key:0,prop:"filePath",label:"","min-width":"250","show-overflow-tooltip":""})):pe("",!0),m(N,{label:"",width:"120"},{default:y(({row:b})=>[O(J(st(b.fileSize)),1)]),_:1}),m(N,{label:"",width:"100"},{default:y(({row:b})=>[m(Ve,{type:Fr(b.status)},{default:y(()=>[O(J(Dr(b.status)),1)]),_:2},1032,["type"])]),_:1}),m(N,{prop:"uploadEndTime",label:a.value===3?"":"",width:"180"},null,8,["label"]),m(N,{prop:"errorMessage",label:"","min-width":"150","show-overflow-tooltip":""})]),_:1},8,["data"])]),_:1},8,["modelValue","title"]),m(Zt,{modelValue:u.value,"onUpdate:modelValue":h[9]||(h[9]=b=>u.value=b),title:"",width:"600px","close-on-click-modal":!1},{footer:y(()=>[m(M,{onClick:h[8]||(h[8]=b=>u.value=!1)},{default:y(()=>[...h[23]||(h[23]=[O("",-1)])]),_:1}),m(M,{type:"primary",onClick:Vr},{default:y(()=>[...h[24]||(h[24]=[O("",-1)])]),_:1})]),default:y(()=>[m(Jt,{model:l,"label-width":"100px"},{default:y(()=>[m(L,{label:""},{default:y(()=>[m(T,{modelValue:l.taskName,"onUpdate:modelValue":h[5]||(h[5]=b=>l.taskName=b),disabled:""},null,8,["modelValue"])]),_:1}),m(L,{label:""},{default:y(()=>[m(T,{modelValue:l.oldPath,"onUpdate:modelValue":h[6]||(h[6]=b=>l.oldPath=b),disabled:""},null,8,["modelValue"])]),_:1}),m(L,{label:"",required:""},{default:y(()=>[m(T,{modelValue:l.newPath,"onUpdate:modelValue":h[7]||(h[7]=b=>l.newPath=b),placeholder:"",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},ia=Kr(na,[["__scopeId","data-v-7f62df1b"]]);export{ia as default};
