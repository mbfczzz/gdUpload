import{A as h,B as Tn,C as qr,_ as zr,a as ve,r as Jt,o as Xr,m as Hr,c as Qt,b as ce,d as v,w as y,e as U,j as P,u as te,s as Vr,D as Gr,g as Jr,h as Qr,i as xe,f as ue,y as Ce,t as oe,F as Kr,G as Zr,H as Yr,I as eo,J as to,v as Kt,E as k,k as it}from"./index-Du7G4jX3.js";import{a as ie}from"./index-B9ygI19o.js";var $n={exports:{}},yt={};h.crypto&&h.crypto.getRandomValues?yt.randomBytes=function(e){var t=new Uint8Array(e);return h.crypto.getRandomValues(t),t}:yt.randomBytes=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(Math.random()*256);return t};var no=yt,Zt="abcdefghijklmnopqrstuvwxyz012345",be={string:function(e){for(var t=Zt.length,n=no.randomBytes(e),r=[],o=0;o<e;o++)r.push(Zt.substr(n[o]%t,1));return r.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length,n=new Array(t+1).join("0");return(n+this.number(e)).slice(-t)}};(function(e){var t=be,n={},r=!1,o=h.chrome&&h.chrome.app&&h.chrome.app.runtime;e.exports={attachEvent:function(a,u){typeof h.addEventListener<"u"?h.addEventListener(a,u,!1):h.document&&h.attachEvent&&(h.document.attachEvent("on"+a,u),h.attachEvent("on"+a,u))},detachEvent:function(a,u){typeof h.addEventListener<"u"?h.removeEventListener(a,u,!1):h.document&&h.detachEvent&&(h.document.detachEvent("on"+a,u),h.detachEvent("on"+a,u))},unloadAdd:function(a){if(o)return null;var u=t.string(8);return n[u]=a,r&&setTimeout(this.triggerUnloadCallbacks,0),u},unloadDel:function(a){a in n&&delete n[a]},triggerUnloadCallbacks:function(){for(var a in n)n[a](),delete n[a]}};var s=function(){r||(r=!0,e.exports.triggerUnloadCallbacks())};o||e.exports.attachEvent("unload",s)})($n);var ae=$n.exports,ro=function(t,n){if(n=n.split(":")[0],t=+t,!t)return!1;switch(n){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0},Rt={},oo=Object.prototype.hasOwnProperty,io;function Yt(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function en(e){try{return encodeURIComponent(e)}catch{return null}}function so(e){for(var t=/([^=?#&]+)=?([^&]*)/g,n={},r;r=t.exec(e);){var o=Yt(r[1]),s=Yt(r[2]);o===null||s===null||o in n||(n[o]=s)}return n}function ao(e,t){t=t||"";var n=[],r,o;typeof t!="string"&&(t="?");for(o in e)if(oo.call(e,o)){if(r=e[o],!r&&(r===null||r===io||isNaN(r))&&(r=""),o=en(o),r=en(r),o===null||r===null)continue;n.push(o+"="+r)}return n.length?t+n.join("&"):""}Rt.stringify=ao;Rt.parse=so;var On=ro,Qe=Rt,lo=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,In=/[\n\r\t]/g,co=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,Rn=/:\d+$/,uo=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,fo=/^[a-zA-Z]:/;function Nt(e){return(e||"").toString().replace(lo,"")}var wt=[["#","hash"],["?","query"],function(t,n){return G(n.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],tn={hash:1,query:1};function Nn(e){var t;typeof window<"u"?t=window:typeof h<"u"?t=h:typeof self<"u"?t=self:t={};var n=t.location||{};e=e||n;var r={},o=typeof e,s;if(e.protocol==="blob:")r=new Q(unescape(e.pathname),{});else if(o==="string"){r=new Q(e,{});for(s in tn)delete r[s]}else if(o==="object"){for(s in e)s in tn||(r[s]=e[s]);r.slashes===void 0&&(r.slashes=co.test(e.href))}return r}function G(e){return e==="file:"||e==="ftp:"||e==="http:"||e==="https:"||e==="ws:"||e==="wss:"}function jn(e,t){e=Nt(e),e=e.replace(In,""),t=t||{};var n=uo.exec(e),r=n[1]?n[1].toLowerCase():"",o=!!n[2],s=!!n[3],a=0,u;return o?s?(u=n[2]+n[3]+n[4],a=n[2].length+n[3].length):(u=n[2]+n[4],a=n[2].length):s?(u=n[3]+n[4],a=n[3].length):u=n[4],r==="file:"?a>=2&&(u=u.slice(2)):G(r)?u=n[4]:r?o&&(u=u.slice(2)):a>=2&&G(t.protocol)&&(u=n[4]),{protocol:r,slashes:o||G(r),slashesCount:a,rest:u}}function ho(e,t){if(e==="")return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,o=n[r-1],s=!1,a=0;r--;)n[r]==="."?n.splice(r,1):n[r]===".."?(n.splice(r,1),a++):a&&(r===0&&(s=!0),n.splice(r,1),a--);return s&&n.unshift(""),(o==="."||o==="..")&&n.push(""),n.join("/")}function Q(e,t,n){if(e=Nt(e),e=e.replace(In,""),!(this instanceof Q))return new Q(e,t,n);var r,o,s,a,u,c,l=wt.slice(),f=typeof t,i=this,m=0;for(f!=="object"&&f!=="string"&&(n=t,t=null),n&&typeof n!="function"&&(n=Qe.parse),t=Nn(t),o=jn(e||"",t),r=!o.protocol&&!o.slashes,i.slashes=o.slashes||r&&t.slashes,i.protocol=o.protocol||t.protocol||"",e=o.rest,(o.protocol==="file:"&&(o.slashesCount!==2||fo.test(e))||!o.slashes&&(o.protocol||o.slashesCount<2||!G(i.protocol)))&&(l[3]=[/(.*)/,"pathname"]);m<l.length;m++){if(a=l[m],typeof a=="function"){e=a(e,i);continue}s=a[0],c=a[1],s!==s?i[c]=e:typeof s=="string"?(u=s==="@"?e.lastIndexOf(s):e.indexOf(s),~u&&(typeof a[2]=="number"?(i[c]=e.slice(0,u),e=e.slice(u+a[2])):(i[c]=e.slice(u),e=e.slice(0,u)))):(u=s.exec(e))&&(i[c]=u[1],e=e.slice(0,u.index)),i[c]=i[c]||r&&a[3]&&t[c]||"",a[4]&&(i[c]=i[c].toLowerCase())}n&&(i.query=n(i.query)),r&&t.slashes&&i.pathname.charAt(0)!=="/"&&(i.pathname!==""||t.pathname!=="")&&(i.pathname=ho(i.pathname,t.pathname)),i.pathname.charAt(0)!=="/"&&G(i.protocol)&&(i.pathname="/"+i.pathname),On(i.port,i.protocol)||(i.host=i.hostname,i.port=""),i.username=i.password="",i.auth&&(u=i.auth.indexOf(":"),~u?(i.username=i.auth.slice(0,u),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=i.auth.slice(u+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(i.auth)),i.auth=i.password?i.username+":"+i.password:i.username),i.origin=i.protocol!=="file:"&&G(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString()}function po(e,t,n){var r=this;switch(e){case"query":typeof t=="string"&&t.length&&(t=(n||Qe.parse)(t)),r[e]=t;break;case"port":r[e]=t,On(t,r.protocol)?t&&(r.host=r.hostname+":"+t):(r.host=r.hostname,r[e]="");break;case"hostname":r[e]=t,r.port&&(t+=":"+r.port),r.host=t;break;case"host":r[e]=t,Rn.test(t)?(t=t.split(":"),r.port=t.pop(),r.hostname=t.join(":")):(r.hostname=t,r.port="");break;case"protocol":r.protocol=t.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(t){var o=e==="pathname"?"/":"#";r[e]=t.charAt(0)!==o?o+t:t}else r[e]=t;break;case"username":case"password":r[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");~s?(r.username=t.slice(0,s),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=t.slice(s+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(t))}for(var a=0;a<wt.length;a++){var u=wt[a];u[4]&&(r[u[1]]=r[u[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin=r.protocol!=="file:"&&G(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r}function mo(e){(!e||typeof e!="function")&&(e=Qe.stringify);var t,n=this,r=n.host,o=n.protocol;o&&o.charAt(o.length-1)!==":"&&(o+=":");var s=o+(n.protocol&&n.slashes||G(n.protocol)?"//":"");return n.username?(s+=n.username,n.password&&(s+=":"+n.password),s+="@"):n.password?(s+=":"+n.password,s+="@"):n.protocol!=="file:"&&G(n.protocol)&&!r&&n.pathname!=="/"&&(s+="@"),(r[r.length-1]===":"||Rn.test(n.hostname)&&!n.port)&&(r+=":"),s+=r+n.pathname,t=typeof n.query=="object"?e(n.query):n.query,t&&(s+=t.charAt(0)!=="?"?"?"+t:t),n.hash&&(s+=n.hash),s}Q.prototype={set:po,toString:mo};Q.extractProtocol=jn;Q.location=Nn;Q.trimLeft=Nt;Q.qs=Qe;var An=Q,vo=An,F={getOrigin:function(e){if(!e)return null;var t=new vo(e);if(t.protocol==="file:")return null;var n=t.port;return n||(n=t.protocol==="https:"?"443":"80"),t.protocol+"//"+t.hostname+":"+n},isOriginEqual:function(e,t){var n=this.getOrigin(e)===this.getOrigin(t);return n},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var n=e.split("?");return n[0]+t+(n[1]?"?"+n[1]:"")},addQuery:function(e,t){return e+(e.indexOf("?")===-1?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}},_t={exports:{}};typeof Object.create=="function"?_t.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:_t.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}};var S=_t.exports,j={};function Ke(){this._listeners={}}Ke.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];n.indexOf(t)===-1&&(n=n.concat([t])),this._listeners[e]=n};Ke.prototype.removeEventListener=function(e,t){var n=this._listeners[e];if(n){var r=n.indexOf(t);if(r!==-1){n.length>1?this._listeners[e]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[e];return}}};Ke.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,n=arguments.length===1?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,n),t in this._listeners)for(var r=this._listeners[t],o=0;o<r.length;o++)r[o].apply(this,n)};var Ln=Ke,go=S,Ze=Ln;function se(){Ze.call(this)}go(se,Ze);se.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}};se.prototype.once=function(e,t){var n=this,r=!1;function o(){n.removeListener(e,o),r||(r=!0,t.apply(this,arguments))}this.on(e,o)};se.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var n=arguments.length,r=new Array(n-1),o=1;o<n;o++)r[o-1]=arguments[o];for(var s=0;s<t.length;s++)t[s].apply(this,r)}};se.prototype.on=se.prototype.addListener=Ze.prototype.addEventListener;se.prototype.removeListener=Ze.prototype.removeEventListener;j.EventEmitter=se;var St={exports:{}},nn=h.WebSocket||h.MozWebSocket;nn?St.exports=function(t){return new nn(t)}:St.exports=void 0;var bo=St.exports,Un=ae,yo=F,wo=S,Pn=j.EventEmitter,Bn=bo,rn=function(){};function re(e,t,n){if(!re.enabled())throw new Error("Transport created when disabled");Pn.call(this);var r=this,o=yo.addPath(e,"/websocket");o.slice(0,5)==="https"?o="wss"+o.slice(5):o="ws"+o.slice(4),this.url=o,this.ws=new Bn(this.url,[],n),this.ws.onmessage=function(s){rn("message event",s.data),r.emit("message",s.data)},this.unloadRef=Un.unloadAdd(function(){r.ws.close()}),this.ws.onclose=function(s){rn("close event",s.code,s.reason),r.emit("close",s.code,s.reason),r._cleanup()},this.ws.onerror=function(s){r.emit("close",1006,"WebSocket connection broken"),r._cleanup()}}wo(re,Pn);re.prototype.send=function(e){var t="["+e+"]";this.ws.send(t)};re.prototype.close=function(){var e=this.ws;this._cleanup(),e&&e.close()};re.prototype._cleanup=function(){var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),Un.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()};re.enabled=function(){return!!Bn};re.transportName="websocket";re.roundTrips=2;var _o=re,So=S,Wn=j.EventEmitter,Eo=function(){};function he(e,t){Wn.call(this),this.sendBuffer=[],this.sender=t,this.url=e}So(he,Wn);he.prototype.send=function(e){this.sendBuffer.push(e),this.sendStop||this.sendSchedule()};he.prototype.sendScheduleWait=function(){var e=this,t;this.sendStop=function(){e.sendStop=null,clearTimeout(t)},t=setTimeout(function(){e.sendStop=null,e.sendSchedule()},25)};he.prototype.sendSchedule=function(){Eo("sendSchedule",this.sendBuffer.length);var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,function(n){e.sendStop=null,n?(e.emit("close",n.code||1006,"Sending error: "+n),e.close()):e.sendScheduleWait()}),this.sendBuffer=[]}};he.prototype._cleanup=function(){this.removeAllListeners()};he.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)};var xo=he,Co=S,Mn=j.EventEmitter,ko=function(){};function Ye(e,t,n){Mn.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=n,this._scheduleReceiver()}Co(Ye,Mn);Ye.prototype._scheduleReceiver=function(){var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",function(n){e.emit("message",n)}),t.once("close",function(n,r){ko("close",n,r,e.pollIsClosing),e.poll=t=null,e.pollIsClosing||(r==="network"?e._scheduleReceiver():(e.emit("close",n||1006,r),e.removeAllListeners()))})};Ye.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()};var To=Ye,$o=S,Oo=F,jt=xo,Io=To;function At(e,t,n,r,o){var s=Oo.addPath(e,t),a=this;jt.call(this,e,n),this.poll=new Io(r,s,o),this.poll.on("message",function(u){a.emit("message",u)}),this.poll.once("close",function(u,c){a.poll=null,a.emit("close",u,c),a.close()})}$o(At,jt);At.prototype.close=function(){jt.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)};var Fn=At,Ro=S,No=F,Dn=Fn;function jo(e){return function(t,n,r){var o={};typeof n=="string"&&(o.headers={"Content-type":"text/plain"});var s=No.addPath(t,"/xhr_send"),a=new e("POST",s,n,o);return a.once("finish",function(u){if(a=null,u!==200&&u!==204)return r(new Error("http status "+u));r()}),function(){a.close(),a=null;var u=new Error("Aborted");u.code=1e3,r(u)}}}function qn(e,t,n,r){Dn.call(this,e,t,jo(r),n,r)}Ro(qn,Dn);var ye=qn,Ao=S,zn=j.EventEmitter;function je(e,t){zn.call(this);var n=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(r,o){n._chunkHandler(r,o),n.xo=null;var s=r===200?"network":"permanent";n.emit("close",null,s),n._cleanup()})}Ao(je,zn);je.prototype._chunkHandler=function(e,t){if(!(e!==200||!t))for(var n=-1;;this.bufferPosition+=n+1){var r=t.slice(this.bufferPosition);if(n=r.indexOf(`
`),n===-1)break;var o=r.slice(0,n);o&&this.emit("message",o)}};je.prototype._cleanup=function(){this.removeAllListeners()};je.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()};var et=je,Xn=j.EventEmitter,Lo=S,Hn=ae,Uo=F,Ie=h.XMLHttpRequest,st=function(){};function K(e,t,n,r){var o=this;Xn.call(this),setTimeout(function(){o._start(e,t,n,r)},0)}Lo(K,Xn);K.prototype._start=function(e,t,n,r){var o=this;try{this.xhr=new Ie}catch{}if(!this.xhr){this.emit("finish",0,"no xhr support"),this._cleanup();return}t=Uo.addQuery(t,"t="+ +new Date),this.unloadRef=Hn.unloadAdd(function(){o._cleanup(!0)});try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){st("xhr timeout"),o.emit("finish",0,""),o._cleanup(!1)})}catch{this.emit("finish",0,""),this._cleanup(!1);return}if((!r||!r.noCredentials)&&K.supportsCORS&&(this.xhr.withCredentials=!0),r&&r.headers)for(var s in r.headers)this.xhr.setRequestHeader(s,r.headers[s]);this.xhr.onreadystatechange=function(){if(o.xhr){var a=o.xhr,u,c;switch(st("readyState",a.readyState),a.readyState){case 3:try{c=a.status,u=a.responseText}catch{}c===1223&&(c=204),c===200&&u&&u.length>0&&o.emit("chunk",c,u);break;case 4:c=a.status,c===1223&&(c=204),(c===12005||c===12029)&&(c=0),st("finish",c,a.responseText),o.emit("finish",c,a.responseText),o._cleanup(!1);break}}};try{o.xhr.send(n)}catch{o.emit("finish",0,""),o._cleanup(!1)}};K.prototype._cleanup=function(e){if(this.xhr){if(this.removeAllListeners(),Hn.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}};K.prototype.close=function(){this._cleanup(!0)};K.enabled=!!Ie;var on=["Active"].concat("Object").join("X");!K.enabled&&on in h&&(Ie=function(){try{return new h[on]("Microsoft.XMLHTTP")}catch{return null}},K.enabled=!!new Ie);var Vn=!1;try{Vn="withCredentials"in new Ie}catch{}K.supportsCORS=Vn;var Gn=K,Po=S,Je=Gn;function Lt(e,t,n,r){Je.call(this,e,t,n,r)}Po(Lt,Je);Lt.enabled=Je.enabled&&Je.supportsCORS;var tt=Lt,Bo=S,Ut=Gn;function Pt(e,t,n){Ut.call(this,e,t,n,{noCredentials:!0})}Bo(Pt,Ut);Pt.enabled=Ut.enabled;var Ae=Pt,Le={isOpera:function(){return h.navigator&&/opera/i.test(h.navigator.userAgent)},isKonqueror:function(){return h.navigator&&/konqueror/i.test(h.navigator.userAgent)},hasDomain:function(){if(!h.document)return!0;try{return!!h.document.domain}catch{return!1}}},Wo=S,Jn=ye,Mo=et,Et=tt,Fo=Ae,Do=Le;function we(e){if(!Fo.enabled&&!Et.enabled)throw new Error("Transport created when disabled");Jn.call(this,e,"/xhr_streaming",Mo,Et)}Wo(we,Jn);we.enabled=function(e){return e.nullOrigin||Do.isOpera()?!1:Et.enabled};we.transportName="xhr-streaming";we.roundTrips=2;we.needBody=!!h.document;var qo=we,Qn=j.EventEmitter,zo=S,Kn=ae,Xo=Le,Ho=F,Vo=function(){};function pe(e,t,n){var r=this;Qn.call(this),setTimeout(function(){r._start(e,t,n)},0)}zo(pe,Qn);pe.prototype._start=function(e,t,n){var r=this,o=new h.XDomainRequest;t=Ho.addQuery(t,"t="+ +new Date),o.onerror=function(){r._error()},o.ontimeout=function(){r._error()},o.onprogress=function(){Vo("progress",o.responseText),r.emit("chunk",200,o.responseText)},o.onload=function(){r.emit("finish",200,o.responseText),r._cleanup(!1)},this.xdr=o,this.unloadRef=Kn.unloadAdd(function(){r._cleanup(!0)});try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(n)}catch{this._error()}};pe.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)};pe.prototype._cleanup=function(e){if(this.xdr){if(this.removeAllListeners(),Kn.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}};pe.prototype.close=function(){this._cleanup(!0)};pe.enabled=!!(h.XDomainRequest&&Xo.hasDomain());var Bt=pe,Go=S,Zn=ye,Jo=et,xt=Bt;function Ue(e){if(!xt.enabled)throw new Error("Transport created when disabled");Zn.call(this,e,"/xhr_streaming",Jo,xt)}Go(Ue,Zn);Ue.enabled=function(e){return e.cookie_needed||e.nullOrigin?!1:xt.enabled&&e.sameScheme};Ue.transportName="xdr-streaming";Ue.roundTrips=2;var Yn=Ue,er=h.EventSource,Qo=S,tr=j.EventEmitter,Ko=er,sn=function(){};function Pe(e){tr.call(this);var t=this,n=this.es=new Ko(e);n.onmessage=function(r){sn("message",r.data),t.emit("message",decodeURI(r.data))},n.onerror=function(r){sn("error",n.readyState);var o=n.readyState!==2?"network":"permanent";t._cleanup(),t._close(o)}}Qo(Pe,tr);Pe.prototype.abort=function(){this._cleanup(),this._close("user")};Pe.prototype._cleanup=function(){var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)};Pe.prototype._close=function(e){var t=this;setTimeout(function(){t.emit("close",null,e),t.removeAllListeners()},200)};var Zo=Pe,Yo=S,nr=ye,ei=Zo,ti=tt,ni=er;function _e(e){if(!_e.enabled())throw new Error("Transport created when disabled");nr.call(this,e,"/eventsource",ei,ti)}Yo(_e,nr);_e.enabled=function(){return!!ni};_e.transportName="eventsource";_e.roundTrips=2;var an=_e,at,ln;function rr(){return ln||(ln=1,at="1.6.1"),at}var or={exports:{}};(function(e){var t=ae,n=Le;e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in h||(h[e.exports.WPrefix]={})},postMessage:function(r,o){h.parent!==h&&h.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:r,data:o||""}),"*")},createIframe:function(r,o){var s=h.document.createElement("iframe"),a,u,c=function(){clearTimeout(a);try{s.onload=null}catch{}s.onerror=null},l=function(){s&&(c(),setTimeout(function(){s&&s.parentNode.removeChild(s),s=null},0),t.unloadDel(u))},f=function(m){s&&(l(),o(m))},i=function(m,d){setTimeout(function(){try{s&&s.contentWindow&&s.contentWindow.postMessage(m,d)}catch{}},0)};return s.src=r,s.style.display="none",s.style.position="absolute",s.onerror=function(){f("onerror")},s.onload=function(){clearTimeout(a),a=setTimeout(function(){f("onload timeout")},2e3)},h.document.body.appendChild(s),a=setTimeout(function(){f("timeout")},15e3),u=t.unloadAdd(l),{post:i,cleanup:l,loaded:c}},createHtmlfile:function(r,o){var s=["Active"].concat("Object").join("X"),a=new h[s]("htmlfile"),u,c,l,f=function(){clearTimeout(u),l.onerror=null},i=function(){a&&(f(),t.unloadDel(c),l.parentNode.removeChild(l),l=a=null,CollectGarbage())},m=function(C){a&&(i(),o(C))},d=function(C,x){try{setTimeout(function(){l&&l.contentWindow&&l.contentWindow.postMessage(C,x)},0)}catch{}};a.open(),a.write('<html><script>document.domain="'+h.document.domain+'";<\/script></html>'),a.close(),a.parentWindow[e.exports.WPrefix]=h[e.exports.WPrefix];var _=a.createElement("div");return a.body.appendChild(_),l=a.createElement("iframe"),_.appendChild(l),l.src=r,l.onerror=function(){m("onerror")},u=setTimeout(function(){m("timeout")},15e3),c=t.unloadAdd(i),{post:d,cleanup:i,loaded:f}}},e.exports.iframeEnabled=!1,h.document&&(e.exports.iframeEnabled=(typeof h.postMessage=="function"||typeof h.postMessage=="object")&&!n.isKonqueror())})(or);var Be=or.exports,ri=S,ir=j.EventEmitter,oi=rr(),Ct=F,sr=Be,ar=ae,ii=be,ke=function(){};function Z(e,t,n){if(!Z.enabled())throw new Error("Transport created when disabled");ir.call(this);var r=this;this.origin=Ct.getOrigin(n),this.baseUrl=n,this.transUrl=t,this.transport=e,this.windowId=ii.string(8);var o=Ct.addPath(n,"/iframe.html")+"#"+this.windowId;this.iframeObj=sr.createIframe(o,function(s){r.emit("close",1006,"Unable to load an iframe ("+s+")"),r.close()}),this.onmessageCallback=this._message.bind(this),ar.attachEvent("message",this.onmessageCallback)}ri(Z,ir);Z.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){ar.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}};Z.prototype._message=function(e){if(ke("message",e.data),!Ct.isOriginEqual(e.origin,this.origin)){ke("not same origin",e.origin,this.origin);return}var t;try{t=JSON.parse(e.data)}catch{ke("bad json",e.data);return}if(t.windowId!==this.windowId){ke("mismatched window id",t.windowId,this.windowId);return}switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([oi,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var n;try{n=JSON.parse(t.data)}catch{ke("bad json",t.data);return}this.emit("close",n[0],n[1]),this.close();break}};Z.prototype.postMessage=function(e,t){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)};Z.prototype.send=function(e){this.postMessage("m",e)};Z.enabled=function(){return sr.iframeEnabled};Z.transportName="iframe";Z.roundTrips=2;var lr=Z,Wt={isObject:function(e){var t=typeof e;return t==="function"||t==="object"&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,n,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}},si=S,Xe=lr,ai=Wt,lt=function(e){function t(n,r){Xe.call(this,e.transportName,n,r)}return si(t,Xe),t.enabled=function(n,r){if(!h.document)return!1;var o=ai.extend({},r);return o.sameOrigin=!0,e.enabled(o)&&Xe.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=Xe.roundTrips+e.roundTrips-1,t.facadeTransport=e,t},li=S,fe=Be,ci=F,cr=j.EventEmitter,ui=be,fi=function(){};function X(e){cr.call(this);var t=this;fe.polluteGlobalNamespace(),this.id="a"+ui.string(6),e=ci.addQuery(e,"c="+decodeURIComponent(fe.WPrefix+"."+this.id)),fi("using htmlfile",X.htmlfileEnabled);var n=X.htmlfileEnabled?fe.createHtmlfile:fe.createIframe;h[fe.WPrefix][this.id]={start:function(){t.iframeObj.loaded()},message:function(r){t.emit("message",r)},stop:function(){t._cleanup(),t._close("network")}},this.iframeObj=n(e,function(){t._cleanup(),t._close("permanent")})}li(X,cr);X.prototype.abort=function(){this._cleanup(),this._close("user")};X.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete h[fe.WPrefix][this.id]};X.prototype._close=function(e){this.emit("close",null,e),this.removeAllListeners()};X.htmlfileEnabled=!1;var cn=["Active"].concat("Object").join("X");if(cn in h)try{X.htmlfileEnabled=!!new h[cn]("htmlfile")}catch{}X.enabled=X.htmlfileEnabled||fe.iframeEnabled;var hi=X,pi=S,kt=hi,di=Ae,ur=ye;function We(e){if(!kt.enabled)throw new Error("Transport created when disabled");ur.call(this,e,"/htmlfile",kt,di)}pi(We,ur);We.enabled=function(e){return kt.enabled&&e.sameOrigin};We.transportName="htmlfile";We.roundTrips=2;var un=We,mi=S,fr=ye,vi=et,Tt=tt,hr=Ae;function Me(e){if(!hr.enabled&&!Tt.enabled)throw new Error("Transport created when disabled");fr.call(this,e,"/xhr",vi,Tt)}mi(Me,fr);Me.enabled=function(e){return e.nullOrigin?!1:hr.enabled&&e.sameOrigin?!0:Tt.enabled};Me.transportName="xhr-polling";Me.roundTrips=2;var fn=Me,gi=S,pr=ye,bi=Yn,yi=et,hn=Bt;function Fe(e){if(!hn.enabled)throw new Error("Transport created when disabled");pr.call(this,e,"/xhr",yi,hn)}gi(Fe,pr);Fe.enabled=bi.enabled;Fe.transportName="xdr-polling";Fe.roundTrips=2;var wi=Fe,$e=Be,dr=be,_i=Le,Si=F,Ei=S,mr=j.EventEmitter,xi=function(){};function M(e){var t=this;mr.call(this),$e.polluteGlobalNamespace(),this.id="a"+dr.string(6);var n=Si.addQuery(e,"c="+encodeURIComponent($e.WPrefix+"."+this.id));h[$e.WPrefix][this.id]=this._callback.bind(this),this._createScript(n),this.timeoutId=setTimeout(function(){t._abort(new Error("JSONP script loaded abnormally (timeout)"))},M.timeout)}Ei(M,mr);M.prototype.abort=function(){if(h[$e.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}};M.timeout=35e3;M.scriptErrorTimeout=1e3;M.prototype._callback=function(e){this._cleanup(),!this.aborting&&(e&&this.emit("message",e),this.emit("close",null,"network"),this.removeAllListeners())};M.prototype._abort=function(e){this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()};M.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete h[$e.WPrefix][this.id]};M.prototype._scriptError=function(){var e=this;this.errorTimer||(this.errorTimer=setTimeout(function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))},M.scriptErrorTimeout))};M.prototype._createScript=function(e){var t=this,n=this.script=h.document.createElement("script"),r;if(n.id="a"+dr.string(8),n.src=e,n.type="text/javascript",n.charset="UTF-8",n.onerror=this._scriptError.bind(this),n.onload=function(){t._abort(new Error("JSONP script loaded abnormally (onload)"))},n.onreadystatechange=function(){if(xi("onreadystatechange",n.readyState),/loaded|closed/.test(n.readyState)){if(n&&n.htmlFor&&n.onclick){t.loadedOkay=!0;try{n.onclick()}catch{}}n&&t._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof n.async>"u"&&h.document.attachEvent)if(_i.isOpera())r=this.script2=h.document.createElement("script"),r.text="try{var a = document.getElementById('"+n.id+"'); if(a)a.onerror();}catch(x){};",n.async=r.async=!1;else{try{n.htmlFor=n.id,n.event="onclick"}catch{}n.async=!0}typeof n.async<"u"&&(n.async=!0);var o=h.document.getElementsByTagName("head")[0];o.insertBefore(n,o.firstChild),r&&o.insertBefore(r,o.firstChild)};var Ci=M,ki=be,pn=F,Ti=function(){},B,Oe;function $i(e){try{return h.document.createElement('<iframe name="'+e+'">')}catch{var t=h.document.createElement("iframe");return t.name=e,t}}function Oi(){B=h.document.createElement("form"),B.style.display="none",B.style.position="absolute",B.method="POST",B.enctype="application/x-www-form-urlencoded",B.acceptCharset="UTF-8",Oe=h.document.createElement("textarea"),Oe.name="d",B.appendChild(Oe),h.document.body.appendChild(B)}var Ii=function(e,t,n){B||Oi();var r="a"+ki.string(8);B.target=r,B.action=pn.addQuery(pn.addPath(e,"/jsonp_send"),"i="+r);var o=$i(r);o.id=r,o.style.display="none",B.appendChild(o);try{Oe.value=t}catch{}B.submit();var s=function(a){o.onerror&&(o.onreadystatechange=o.onerror=o.onload=null,setTimeout(function(){o.parentNode.removeChild(o),o=null},500),Oe.value="",n(a))};return o.onerror=function(){s()},o.onload=function(){s()},o.onreadystatechange=function(a){Ti("onreadystatechange",r,o.readyState),o.readyState==="complete"&&s()},function(){s(new Error("Aborted"))}},Ri=S,vr=Fn,Ni=Ci,ji=Ii;function de(e){if(!de.enabled())throw new Error("Transport created when disabled");vr.call(this,e,"/jsonp",ji,Ni)}Ri(de,vr);de.enabled=function(){return!!h.document};de.transportName="jsonp-polling";de.roundTrips=1;de.needBody=!0;var Ai=de,Li=[_o,qo,Yn,an,lt(an),un,lt(un),fn,wi,lt(fn),Ai],Re=Array.prototype,Mt=Object.prototype,Ui=Function.prototype,Ne=String.prototype,ct=Re.slice,Ft=Mt.toString,gr=function(e){return Mt.toString.call(e)==="[object Function]"},Pi=function(t){return Ft.call(t)==="[object Array]"},br=function(t){return Ft.call(t)==="[object String]"},Bi=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}}(),$t;Bi?$t=function(e,t,n,r){!r&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:$t=function(e,t,n,r){!r&&t in e||(e[t]=n)};var De=function(e,t,n){for(var r in t)Mt.hasOwnProperty.call(t,r)&&$t(e,r,t[r],n)},yr=function(e){if(e==null)throw new TypeError("can't convert "+e+" to object");return Object(e)};function Wi(e){var t=+e;return t!==t?t=0:t!==0&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function Mi(e){return e>>>0}function ut(){}De(Ui,{bind:function(t){var n=this;if(!gr(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var r=ct.call(arguments,1),o=function(){if(this instanceof c){var l=n.apply(this,r.concat(ct.call(arguments)));return Object(l)===l?l:this}else return n.apply(t,r.concat(ct.call(arguments)))},s=Math.max(0,n.length-r.length),a=[],u=0;u<s;u++)a.push("$"+u);var c=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this, arguments); }")(o);return n.prototype&&(ut.prototype=n.prototype,c.prototype=new ut,ut.prototype=null),c}});De(Array,{isArray:Pi});var dn=Object("a"),wr=dn[0]!=="a"||!(0 in dn),Fi=function(t){var n=!0,r=!0;return t&&(t.call("foo",function(o,s,a){typeof a!="object"&&(n=!1)}),t.call([1],function(){r=typeof this=="string"},"x")),!!t&&n&&r};De(Re,{forEach:function(t){var n=yr(this),r=wr&&br(this)?this.split(""):n,o=arguments[1],s=-1,a=r.length>>>0;if(!gr(t))throw new TypeError;for(;++s<a;)s in r&&t.call(o,r[s],s,n)}},!Fi(Re.forEach));var Di=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;De(Re,{indexOf:function(t){var n=wr&&br(this)?this.split(""):yr(this),r=n.length>>>0;if(!r)return-1;var o=0;for(arguments.length>1&&(o=Wi(arguments[1])),o=o>=0?o:Math.max(0,r+o);o<r;o++)if(o in n&&n[o]===t)return o;return-1}},Di);var mn=Ne.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?function(){var e=/()??/.exec("")[1]===void 0;Ne.split=function(t,n){var r=this;if(t===void 0&&n===0)return[];if(Ft.call(t)!=="[object RegExp]")return mn.call(this,t,n);var o=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),a=0,u,c,l,f;for(t=new RegExp(t.source,s+"g"),r+="",e||(u=new RegExp("^"+t.source+"$(?!\\s)",s)),n=n===void 0?-1>>>0:Mi(n);(c=t.exec(r))&&(l=c.index+c[0].length,!(l>a&&(o.push(r.slice(a,c.index)),!e&&c.length>1&&c[0].replace(u,function(){for(var i=1;i<arguments.length-2;i++)arguments[i]===void 0&&(c[i]=void 0)}),c.length>1&&c.index<r.length&&Re.push.apply(o,c.slice(1)),f=c[0].length,a=l,o.length>=n)));)t.lastIndex===c.index&&t.lastIndex++;return a===r.length?(f||!t.test(""))&&o.push(""):o.push(r.slice(a)),o.length>n?o.slice(0,n):o}}():"0".split(void 0,0).length&&(Ne.split=function(t,n){return t===void 0&&n===0?[]:mn.call(this,t,n)});var qi=Ne.substr,zi="".substr&&"0b".substr(-1)!=="b";De(Ne,{substr:function(t,n){return qi.call(this,t<0&&(t=this.length+t)<0?0:t,n)}},zi);var He=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,ft,Xi=function(e){var t,n={},r=[];for(t=0;t<65536;t++)r.push(String.fromCharCode(t));return e.lastIndex=0,r.join("").replace(e,function(o){return n[o]="\\u"+("0000"+o.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n},Hi={quote:function(e){var t=JSON.stringify(e);return He.lastIndex=0,He.test(t)?(ft||(ft=Xi(He)),t.replace(He,function(n){return ft[n]})):t}},ht=function(){},Vi=function(e){return{filterToEnabled:function(t,n){var r={main:[],facade:[]};return t?typeof t=="string"&&(t=[t]):t=[],e.forEach(function(o){if(o&&!(o.transportName==="websocket"&&n.websocket===!1)){if(t.length&&t.indexOf(o.transportName)===-1){ht("not in whitelist",o.transportName);return}o.enabled(n)?(ht("enabled",o.transportName),r.main.push(o),o.facadeTransport&&r.facade.push(o.facadeTransport)):ht("disabled",o.transportName)}}),r}}},Ot={};["log","debug","warn"].forEach(function(e){var t;try{t=h.console&&h.console[e]&&h.console[e].apply}catch{}Ot[e]=t?function(){return h.console[e].apply(h.console,arguments)}:e==="log"?function(){}:Ot.log});var Gi=Ot;function me(e){this.type=e}me.prototype.initEvent=function(e,t,n){return this.type=e,this.bubbles=t,this.cancelable=n,this.timeStamp=+new Date,this};me.prototype.stopPropagation=function(){};me.prototype.preventDefault=function(){};me.CAPTURING_PHASE=1;me.AT_TARGET=2;me.BUBBLING_PHASE=3;var Dt=me,_r=h.location||{protocol:"http:",href:"http://localhost/",hash:""},Ji=S,Sr=Dt;function Er(){Sr.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}Ji(Er,Sr);var Qi=Er,Ki=S,xr=Dt;function Cr(e){xr.call(this),this.initEvent("message",!1,!1),this.data=e}Ki(Cr,xr);var Zi=Cr,kr=j.EventEmitter,Yi=S;function qe(){var e=this;kr.call(this),this.to=setTimeout(function(){e.emit("finish",200,"{}")},qe.timeout)}Yi(qe,kr);qe.prototype.close=function(){clearTimeout(this.to)};qe.timeout=2e3;var es=qe,Tr=j.EventEmitter,ts=S,ns=Wt;function qt(e,t){Tr.call(this);var n=this,r=+new Date;this.xo=new t("GET",e),this.xo.once("finish",function(o,s){var a,u;if(o===200){if(u=+new Date-r,s)try{a=JSON.parse(s)}catch{}ns.isObject(a)||(a={})}n.emit("finish",a,u),n.removeAllListeners()})}ts(qt,Tr);qt.prototype.close=function(){this.removeAllListeners(),this.xo.close()};var $r=qt,pt,vn;function Or(){if(vn)return pt;vn=1;var e=S,t=j.EventEmitter,n=Ae,r=$r;function o(s){var a=this;t.call(this),this.ir=new r(s,n),this.ir.once("finish",function(u,c){a.ir=null,a.emit("message",JSON.stringify([u,c]))})}return e(o,t),o.transportName="iframe-info-receiver",o.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},pt=o,pt}var Ir=j.EventEmitter,rs=S,os=ae,Rr=lr,is=Or();function nt(e,t){var n=this;Ir.call(this);var r=function(){var o=n.ifr=new Rr(is.transportName,t,e);o.once("message",function(s){if(s){var a;try{a=JSON.parse(s)}catch{n.emit("finish"),n.close();return}var u=a[0],c=a[1];n.emit("finish",u,c)}n.close()}),o.once("close",function(){n.emit("finish"),n.close()})};h.document.body?r():os.attachEvent("load",r)}rs(nt,Ir);nt.enabled=function(){return Rr.enabled()};nt.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null};var ss=nt,Nr=j.EventEmitter,as=S,ls=F,gn=Bt,bn=tt,cs=Ae,us=es,yn=ss,Ve=$r;function ne(e,t){var n=this;Nr.call(this),setTimeout(function(){n.doXhr(e,t)},0)}as(ne,Nr);ne._getReceiver=function(e,t,n){return n.sameOrigin?new Ve(t,cs):bn.enabled?new Ve(t,bn):gn.enabled&&n.sameScheme?new Ve(t,gn):yn.enabled()?new yn(e,t):new Ve(t,us)};ne.prototype.doXhr=function(e,t){var n=this,r=ls.addPath(e,"/info");this.xo=ne._getReceiver(e,r,t),this.timeoutRef=setTimeout(function(){n._cleanup(!1),n.emit("finish")},ne.timeout),this.xo.once("finish",function(o,s){n._cleanup(!0),n.emit("finish",o,s)})};ne.prototype._cleanup=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null};ne.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)};ne.timeout=8e3;var fs=ne,dt,wn;function hs(){if(wn)return dt;wn=1;var e=Be;function t(n){this._transport=n,n.on("message",this._transportMessage.bind(this)),n.on("close",this._transportClose.bind(this))}return t.prototype._transportClose=function(n,r){e.postMessage("c",JSON.stringify([n,r]))},t.prototype._transportMessage=function(n){e.postMessage("t",n)},t.prototype._send=function(n){this._transport.send(n)},t.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},dt=t,dt}var mt,_n;function ps(){if(_n)return mt;_n=1;var e=F,t=ae,n=hs(),r=Or(),o=Be,s=_r,a=function(){};return mt=function(u,c){var l={};c.forEach(function(i){i.facadeTransport&&(l[i.facadeTransport.transportName]=i.facadeTransport)}),l[r.transportName]=r;var f;u.bootstrap_iframe=function(){var i;o.currentWindowId=s.hash.slice(1);var m=function(d){if(d.source===parent&&(typeof f>"u"&&(f=d.origin),d.origin===f)){var _;try{_=JSON.parse(d.data)}catch{a("bad json",d.data);return}if(_.windowId===o.currentWindowId)switch(_.type){case"s":var C;try{C=JSON.parse(_.data)}catch{a("bad json",_.data);break}var x=C[0],$=C[1],O=C[2],E=C[3];if(x!==u.version)throw new Error('Incompatible SockJS! Main site uses: "'+x+'", the iframe: "'+u.version+'".');if(!e.isOriginEqual(O,s.href)||!e.isOriginEqual(E,s.href))throw new Error("Can't connect to different domain from within an iframe. ("+s.href+", "+O+", "+E+")");i=new n(new l[$](O,E));break;case"m":i._send(_.data);break;case"c":i&&i._close(),i=null;break}}};t.attachEvent("message",m),o.postMessage("s")}},mt}var ds=An,ms=S,Sn=be,vs=Hi,Te=F,gs=ae,bs=Vi,ys=Wt,ws=Le,_s=Gi,zt=Dt,jr=Ln,Ge=_r,Ss=Qi,En=Zi,Es=fs,J=function(){},Ar;function w(e,t,n){if(!(this instanceof w))return new w(e,t,n);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");jr.call(this),this.readyState=w.CONNECTING,this.extensions="",this.protocol="",n=n||{},n.protocols_whitelist&&_s.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=n.transports,this._transportOptions=n.transportOptions||{},this._timeout=n.timeout||0;var r=n.sessionId||8;if(typeof r=="function")this._generateSessionId=r;else if(typeof r=="number")this._generateSessionId=function(){return Sn.string(r)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=n.server||Sn.numberString(1e3);var o=new ds(e);if(!o.host||!o.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(o.hash)throw new SyntaxError("The URL must not contain a fragment");if(o.protocol!=="http:"&&o.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+o.protocol+"' is not allowed.");var s=o.protocol==="https:";if(Ge.protocol==="https:"&&!s&&!Te.isLoopbackAddr(o.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var a=t.sort();a.forEach(function(c,l){if(!c)throw new SyntaxError("The protocols entry '"+c+"' is invalid.");if(l<a.length-1&&c===a[l+1])throw new SyntaxError("The protocols entry '"+c+"' is duplicated.")});var u=Te.getOrigin(Ge.href);this._origin=u?u.toLowerCase():null,o.set("pathname",o.pathname.replace(/\/+$/,"")),this.url=o.href,J("using url",this.url),this._urlInfo={nullOrigin:!ws.hasDomain(),sameOrigin:Te.isOriginEqual(this.url,Ge.href),sameScheme:Te.isSchemeEqual(this.url,Ge.href)},this._ir=new Es(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}ms(w,jr);function Lr(e){return e===1e3||e>=3e3&&e<=4999}w.prototype.close=function(e,t){if(e&&!Lr(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===w.CLOSING||this.readyState===w.CLOSED)){var n=!0;this._close(e||1e3,t||"Normal closure",n)}};w.prototype.send=function(e){if(typeof e!="string"&&(e=""+e),this.readyState===w.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===w.OPEN&&this._transport.send(vs.quote(e))};w.version=rr();w.CONNECTING=0;w.OPEN=1;w.CLOSING=2;w.CLOSED=3;w.prototype._receiveInfo=function(e,t){if(this._ir=null,!e){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=ys.extend(e,this._urlInfo);var n=Ar.filterToEnabled(this._transportsWhitelist,e);this._transports=n.main,J(this._transports.length+" enabled transports"),this._connect()};w.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(J("attempt",e.transportName),e.needBody&&(!h.document.body||typeof h.document.readyState<"u"&&h.document.readyState!=="complete"&&h.document.readyState!=="interactive")){this._transports.unshift(e),gs.attachEvent("load",this._connect.bind(this));return}var t=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t);var n=Te.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),r=this._transportOptions[e.transportName],o=new e(n,this._transUrl,r);o.on("message",this._transportMessage.bind(this)),o.once("close",this._transportClose.bind(this)),o.transportName=e.transportName,this._transport=o;return}this._close(2e3,"All transports failed",!1)};w.prototype._transportTimeout=function(){this.readyState===w.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))};w.prototype._transportMessage=function(e){var t=this,n=e.slice(0,1),r=e.slice(1),o;switch(n){case"o":this._open();return;case"h":this.dispatchEvent(new zt("heartbeat")),J("heartbeat",this.transport);return}if(r)try{o=JSON.parse(r)}catch{}if(!(typeof o>"u"))switch(n){case"a":Array.isArray(o)&&o.forEach(function(s){J("message",t.transport),t.dispatchEvent(new En(s))});break;case"m":J("message",this.transport),this.dispatchEvent(new En(o));break;case"c":Array.isArray(o)&&o.length===2&&this._close(o[0],o[1],!0);break}};w.prototype._transportClose=function(e,t){if(J("_transportClose",this.transport),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!Lr(e)&&e!==2e3&&this.readyState===w.CONNECTING){this._connect();return}this._close(e,t)};w.prototype._open=function(){J("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===w.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=w.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new zt("open")),J("connected",this.transport)):this._close(1006,"Server lost session")};w.prototype._close=function(e,t,n){J("_close",this.transport,e,t,n,this.readyState);var r=!1;if(this._ir&&(r=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===w.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=w.CLOSING,setTimeout((function(){this.readyState=w.CLOSED,r&&this.dispatchEvent(new zt("error"));var o=new Ss;o.wasClean=n||!1,o.code=e||1e3,o.reason=t,this.dispatchEvent(o),this.onmessage=this.onclose=this.onerror=null}).bind(this),0)};w.prototype.countRTO=function(e){return e>100?4*e:300+e};var xs=function(e){return Ar=bs(e),ps()(w,e),w},Cs=Li,ks=xs(Cs);"_sockjs_onload"in h&&setTimeout(h._sockjs_onload,1);const Ts=Tn(ks);var rt={exports:{}},Xt={};(function(e){(function(){var t,n,r,o,s={}.hasOwnProperty,a=[].slice;t={LF:`
`,NULL:"\0"},r=function(){var u;function c(l,f,i){this.command=l,this.headers=f??{},this.body=i??""}return c.prototype.toString=function(){var l,f,i,m,d;l=[this.command],i=this.headers["content-length"]===!1,i&&delete this.headers["content-length"],d=this.headers;for(f in d)s.call(d,f)&&(m=d[f],l.push(""+f+":"+m));return this.body&&!i&&l.push("content-length:"+c.sizeOfUTF8(this.body)),l.push(t.LF+this.body),l.join(t.LF)},c.sizeOfUTF8=function(l){return l?encodeURI(l).match(/%..|./g).length:0},u=function(l){var f,i,m,d,_,C,x,$,O,E,L,Y,D,W,le,ee,I;for(d=l.search(RegExp(""+t.LF+t.LF)),_=l.substring(0,d).split(t.LF),m=_.shift(),C={},Y=function(R){return R.replace(/^\s+|\s+$/g,"")},ee=_.reverse(),D=0,le=ee.length;D<le;D++)E=ee[D],$=E.indexOf(":"),C[Y(E.substring(0,$))]=Y(E.substring($+1));if(f="",L=d+2,C["content-length"])O=parseInt(C["content-length"]),f=(""+l).substring(L,L+O);else for(i=null,x=W=L,I=l.length;(L<=I?W<I:W>I)&&(i=l.charAt(x),i!==t.NULL);x=L<=I?++W:--W)f+=i;return new c(m,C,f)},c.unmarshall=function(l){var f;return function(){var i,m,d,_;for(d=l.split(RegExp(""+t.NULL+t.LF+"*")),_=[],i=0,m=d.length;i<m;i++)f=d[i],(f!=null?f.length:void 0)>0&&_.push(u(f));return _}()},c.marshall=function(l,f,i){var m;return m=new c(l,f,i),m.toString()+t.NULL},c}(),n=function(){var u;function c(l){this.ws=l,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16*1024,this.subscriptions={}}return c.prototype.debug=function(l){var f;return typeof window<"u"&&window!==null&&(f=window.console)!=null?f.log(l):void 0},u=function(){return Date.now?Date.now():new Date().valueOf},c.prototype._transmit=function(l,f,i){var m;for(m=r.marshall(l,f,i),typeof this.debug=="function"&&this.debug(">>> "+m);;)if(m.length>this.maxWebSocketFrameSize)this.ws.send(m.substring(0,this.maxWebSocketFrameSize)),m=m.substring(this.maxWebSocketFrameSize),typeof this.debug=="function"&&this.debug("remaining = "+m.length);else return this.ws.send(m)},c.prototype._setupHeartbeat=function(l){var f,i,m,d,_,C;if(!((_=l.version)!==o.VERSIONS.V1_1&&_!==o.VERSIONS.V1_2)&&(C=function(){var x,$,O,E;for(O=l["heart-beat"].split(","),E=[],x=0,$=O.length;x<$;x++)d=O[x],E.push(parseInt(d));return E}(),i=C[0],f=C[1],this.heartbeat.outgoing===0||f===0||(m=Math.max(this.heartbeat.outgoing,f),typeof this.debug=="function"&&this.debug("send PING every "+m+"ms"),this.pinger=o.setInterval(m,function(x){return function(){return x.ws.send(t.LF),typeof x.debug=="function"?x.debug(">>> PING"):void 0}}(this))),!(this.heartbeat.incoming===0||i===0)))return m=Math.max(this.heartbeat.incoming,i),typeof this.debug=="function"&&this.debug("check PONG every "+m+"ms"),this.ponger=o.setInterval(m,function(x){return function(){var $;if($=u()-x.serverActivity,$>m*2)return typeof x.debug=="function"&&x.debug("did not receive server activity for the last "+$+"ms"),x.ws.close()}}(this))},c.prototype._parseConnect=function(){var l,f,i,m;switch(l=1<=arguments.length?a.call(arguments,0):[],m={},l.length){case 2:m=l[0],f=l[1];break;case 3:l[1]instanceof Function?(m=l[0],f=l[1],i=l[2]):(m.login=l[0],m.passcode=l[1],f=l[2]);break;case 4:m.login=l[0],m.passcode=l[1],f=l[2],i=l[3];break;default:m.login=l[0],m.passcode=l[1],f=l[2],i=l[3],m.host=l[4]}return[m,f,i]},c.prototype.connect=function(){var l,f,i,m;return l=1<=arguments.length?a.call(arguments,0):[],m=this._parseConnect.apply(this,l),i=m[0],this.connectCallback=m[1],f=m[2],typeof this.debug=="function"&&this.debug("Opening Web Socket..."),this.ws.onmessage=function(d){return function(_){var C,x,$,O,E,L,Y,D,W,le,ee,I;if(O=typeof ArrayBuffer<"u"&&_.data instanceof ArrayBuffer?(C=new Uint8Array(_.data),typeof d.debug=="function"&&d.debug("--- got data length: "+C.length),function(){var R,ze,Se;for(Se=[],R=0,ze=C.length;R<ze;R++)x=C[R],Se.push(String.fromCharCode(x));return Se}().join("")):_.data,d.serverActivity=u(),O===t.LF){typeof d.debug=="function"&&d.debug("<<< PONG");return}for(typeof d.debug=="function"&&d.debug("<<< "+O),ee=r.unmarshall(O),I=[],W=0,le=ee.length;W<le;W++)switch(E=ee[W],E.command){case"CONNECTED":typeof d.debug=="function"&&d.debug("connected to server "+E.headers.server),d.connected=!0,d._setupHeartbeat(E.headers),I.push(typeof d.connectCallback=="function"?d.connectCallback(E):void 0);break;case"MESSAGE":D=E.headers.subscription,Y=d.subscriptions[D]||d.onreceive,Y?($=d,L=E.headers["message-id"],E.ack=function(R){return R==null&&(R={}),$.ack(L,D,R)},E.nack=function(R){return R==null&&(R={}),$.nack(L,D,R)},I.push(Y(E))):I.push(typeof d.debug=="function"?d.debug("Unhandled received MESSAGE: "+E):void 0);break;case"RECEIPT":I.push(typeof d.onreceipt=="function"?d.onreceipt(E):void 0);break;case"ERROR":I.push(typeof f=="function"?f(E):void 0);break;default:I.push(typeof d.debug=="function"?d.debug("Unhandled frame: "+E):void 0)}return I}}(this),this.ws.onclose=function(d){return function(){var _;return _="Whoops! Lost connection to "+d.ws.url,typeof d.debug=="function"&&d.debug(_),d._cleanUp(),typeof f=="function"?f(_):void 0}}(this),this.ws.onopen=function(d){return function(){return typeof d.debug=="function"&&d.debug("Web Socket Opened..."),i["accept-version"]=o.VERSIONS.supportedVersions(),i["heart-beat"]=[d.heartbeat.outgoing,d.heartbeat.incoming].join(","),d._transmit("CONNECT",i)}}(this)},c.prototype.disconnect=function(l,f){return f==null&&(f={}),this._transmit("DISCONNECT",f),this.ws.onclose=null,this.ws.close(),this._cleanUp(),typeof l=="function"?l():void 0},c.prototype._cleanUp=function(){if(this.connected=!1,this.pinger&&o.clearInterval(this.pinger),this.ponger)return o.clearInterval(this.ponger)},c.prototype.send=function(l,f,i){return f==null&&(f={}),i==null&&(i=""),f.destination=l,this._transmit("SEND",f,i)},c.prototype.subscribe=function(l,f,i){var m;return i==null&&(i={}),i.id||(i.id="sub-"+this.counter++),i.destination=l,this.subscriptions[i.id]=f,this._transmit("SUBSCRIBE",i),m=this,{id:i.id,unsubscribe:function(){return m.unsubscribe(i.id)}}},c.prototype.unsubscribe=function(l){return delete this.subscriptions[l],this._transmit("UNSUBSCRIBE",{id:l})},c.prototype.begin=function(l){var f,i;return i=l||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:i}),f=this,{id:i,commit:function(){return f.commit(i)},abort:function(){return f.abort(i)}}},c.prototype.commit=function(l){return this._transmit("COMMIT",{transaction:l})},c.prototype.abort=function(l){return this._transmit("ABORT",{transaction:l})},c.prototype.ack=function(l,f,i){return i==null&&(i={}),i["message-id"]=l,i.subscription=f,this._transmit("ACK",i)},c.prototype.nack=function(l,f,i){return i==null&&(i={}),i["message-id"]=l,i.subscription=f,this._transmit("NACK",i)},c}(),o={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(u,c){var l,f;return c==null&&(c=["v10.stomp","v11.stomp"]),l=o.WebSocketClass||WebSocket,f=new l(u,c),new n(f)},over:function(u){return new n(u)},Frame:r},e!==null&&(e.Stomp=o),typeof window<"u"&&window!==null?(o.setInterval=function(u,c){return window.setInterval(c,u)},o.clearInterval=function(u){return window.clearInterval(u)},window.Stomp=o):e||(self.Stomp=o)}).call(h)})(Xt);var It={};const $s={},Os=Object.freeze(Object.defineProperty({__proto__:null,default:$s},Symbol.toStringTag,{value:"Module"})),Is=qr(Os);var vt,xn;function Rs(){if(xn)return vt;xn=1;var e=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return vt=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return e()}try{return __global__||e()}finally{delete Object.prototype.__global__}}(),vt}const Ns="1.0.35",js={version:Ns};var gt,Cn;function As(){return Cn||(Cn=1,gt=js.version),gt}var bt,kn;function Ls(){if(kn)return bt;kn=1;var e;if(typeof globalThis=="object")e=globalThis;else try{e=Rs()}catch{}finally{if(!e&&typeof window<"u"&&(e=window),!e)throw new Error("Could not determine global this")}var t=e.WebSocket||e.MozWebSocket,n=As();function r(o,s){var a;return s?a=new t(o,s):a=new t(o),a}return t&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(o){Object.defineProperty(r,o,{get:function(){return t[o]}})}),bt={w3cwebsocket:t?r:null,version:n},bt}(function(){var e,t,n,r,o,s;e=Xt,t=Is,e.Stomp.setInterval=function(a,u){return setInterval(u,a)},e.Stomp.clearInterval=function(a){return clearInterval(a)},o=function(a,u){var c,l;return c=null,l={url:"tcp:// "+u+":"+a,send:function(f){return c.write(f)},close:function(){return c.end()}},c=t.connect(a,u,function(f){return l.onopen()}),c.on("error",function(f){return typeof l.onclose=="function"?l.onclose(f):void 0}),c.on("close",function(f){return typeof l.onclose=="function"?l.onclose(f):void 0}),c.on("data",function(f){var i;return i={data:f.toString()},l.onmessage(i)}),l},s=function(a){var u,c,l,f;return u=Ls().client,c=null,f={url:a,send:function(i){return c.sendUTF(i)},close:function(){return c.close()}},l=new u,l.on("connect",function(i){return c=i,f.onopen(),c.on("error",function(m){return typeof f.onclose=="function"?f.onclose(m):void 0}),c.on("close",function(){return typeof f.onclose=="function"?f.onclose():void 0}),c.on("message",function(m){var d;if(m.type==="utf8")return d={data:m.utf8Data},f.onmessage(d)})}),l.connect(a),f},n=function(a,u){var c;return c=o(u,a),e.Stomp.over(c)},r=function(a){var u;return u=s(a),e.Stomp.over(u)},It.overTCP=n,It.overWS=r}).call(h);var Us=Xt,Ur=It;rt.exports=Us.Stomp;rt.exports.overTCP=Ur.overTCP;rt.exports.overWS=Ur.overWS;var Ps=rt.exports;const Bs=Tn(Ps);class Ws{constructor(){this.stompClient=null,this.connected=!1,this.subscriptions=new Map,this.reconnectTimer=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5}connect(t){return new Promise((n,r)=>{try{if(!t){const s=window.location.protocol==="https:"?"https:":"http:",a=window.location.host;t=`${s}//${a}/api/ws`}console.log("WebSocket:",t);const o=new Ts(t);this.stompClient=Bs.over(o),this.stompClient.debug=null,this.stompClient.connect({},s=>{console.log("WebSocket:",s),this.connected=!0,this.reconnectAttempts=0,n(s)},s=>{console.error("WebSocket:",s),this.connected=!1,this.handleReconnect(),r(s)})}catch(o){console.error("WebSocket:",o),r(o)}})}disconnect(){this.stompClient&&this.connected&&this.stompClient.disconnect(()=>{console.log("WebSocket"),this.connected=!1}),this.subscriptions.clear(),this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null)}subscribe(t,n){if(!this.connected||!this.stompClient)return console.warn("WebSocket:",t),null;const r=this.stompClient.subscribe(t,s=>{try{const a=JSON.parse(s.body);n(a)}catch(a){console.error("WebSocket:",a)}}),o=r.id;return this.subscriptions.set(o,r),console.log(":",t,o),o}unsubscribe(t){const n=this.subscriptions.get(t);n&&(n.unsubscribe(),this.subscriptions.delete(t),console.log(":",t))}send(t,n){if(!this.connected||!this.stompClient){console.warn("WebSocket");return}this.stompClient.send(t,{},JSON.stringify(n))}handleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("WebSocket");return}this.reconnectAttempts++;const t=Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4);console.log(`WebSocket ${t}ms  ${this.reconnectAttempts} `),this.reconnectTimer=setTimeout(()=>{console.log("WebSocket..."),this.connect().catch(()=>{})},t)}isConnected(){return this.connected}}const ge=new Ws,Ms={class:"task-container"},Fs={class:"card-header"},Ds={style:{color:"#67c23a"}},qs={key:0,style:{color:"#f56c6c","margin-left":"8px"}},zs={style:{color:"#909399","margin-left":"8px"}},Xs={class:"action-buttons"},Hs={__name:"Task",setup(e){const t=ve(!1),n=ve([]),r=ve([]),o=ve(!1),s=ve([]),a=ve([]),u=Jt({keyword:"",status:null}),c=Jt({current:1,size:10,total:0}),l=async()=>{try{await ge.connect(),console.log("WebSocket");const g=ge.subscribe("/topic/tasks",p=>{console.log(":",p),i(p)});g&&a.value.push(g)}catch(g){console.error("WebSocket:",g)}},f=g=>{if(!ge.isConnected())return;const p=ge.subscribe(`/topic/task/${g}`,H=>{console.log(` ${g} :`,H),i(H)});p&&a.value.push(p)},i=g=>{const{taskId:p,type:H,data:T}=g,q=n.value.findIndex(A=>A.id===p);if(q===-1)return;const V=n.value[q];if(H==="PROGRESS")V.progress=T.progress||0,V.uploadedCount=T.uploadedCount||0,V.totalCount=T.totalCount||0,V.uploadedSize=T.uploadedSize||0,V.totalSize=T.totalSize||0,V.currentFileName=T.currentFileName||"";else if(H==="STATUS")V.status=T.status,T.message&&k.info(T.message);else if(H==="FILE_STATUS"&&o.value&&s.value.length>0){const A=s.value.findIndex(z=>z.id===T.fileId);A!==-1&&(s.value[A].status=T.status,T.message&&(s.value[A].errorMessage=T.message))}n.value[q]={...V}},m=()=>{a.value.forEach(g=>{ge.unsubscribe(g)}),a.value=[],ge.disconnect()},d=async()=>{t.value=!0;try{const{data:g}=await ie.get("/api/task/page",{params:{current:c.current,size:c.size,keyword:u.keyword,status:u.status}});g.code===200&&(n.value=g.data.records,c.total=g.data.total,n.value.forEach(p=>{p.status===1&&f(p.id)}))}catch{k.error("")}finally{t.value=!1}},_=()=>{c.current=1,d()},C=()=>{u.keyword="",u.status=null,c.current=1,d()},x=async g=>{try{const{data:p}=await ie.put(`/api/task/${g}/start`);p.code===200?(k.success(""),f(g),d()):k.error(p.message)}catch{k.error("")}},$=async g=>{try{const{data:p}=await ie.put(`/api/task/${g}/pause`);p.code===200?(k.success(""),d()):k.error(p.message)}catch{k.error("")}},O=async g=>{try{await it.confirm("","",{confirmButtonText:"",cancelButtonText:"",type:"warning"});const{data:p}=await ie.put(`/api/task/${g}/cancel`);p.code===200?(k.success(""),d()):k.error(p.message)}catch(p){p!=="cancel"&&k.error("")}},E=async g=>{try{const{data:p}=await ie.put(`/api/task/${g}/retry`);p.code===200?(k.success(""),f(g),d()):k.error(p.message)}catch{k.error("")}},L=async g=>{try{const{data:p}=await ie.get(`/api/task/${g.id}/files`);p.code===200?(s.value=p.data,o.value=!0):k.error(p.message)}catch{k.error("")}},Y=async g=>{try{await it.confirm("","",{confirmButtonText:"",cancelButtonText:"",type:"warning"});const{data:p}=await ie.delete(`/api/task/${g}`);p.code===200?(k.success(""),d()):k.error(p.message)}catch(p){p!=="cancel"&&k.error("")}},D=async()=>{try{await it.confirm("","",{confirmButtonText:"",cancelButtonText:"",type:"warning"});const{data:g}=await ie.delete("/api/task/batch",{data:r.value});g.code===200?(k.success(""),r.value=[],d()):k.error(g.message)}catch(g){g!=="cancel"&&k.error("")}},W=g=>{r.value=g.map(p=>p.id)},le=()=>{d()},ee=()=>{d()},I=g=>({0:"info",1:"primary",2:"success",3:"warning",4:"info",5:"danger"})[g]||"info",R=g=>({0:"",1:"",2:"",3:"",4:"",5:""})[g]||"",ze=g=>g===2?"success":g===5?"exception":"",Se=g=>({0:"info",1:"primary",2:"success",3:"danger"})[g]||"info",Pr=g=>({0:"",1:"",2:"",3:""})[g]||"",ot=g=>{if(!g||g===0)return"0 B";const p=1024,H=["B","KB","MB","GB","TB"],T=Math.floor(Math.log(g)/Math.log(p));return(g/Math.pow(p,T)).toFixed(2)+" "+H[T]};return Xr(()=>{l(),d()}),Hr(()=>{m()}),(g,p)=>{const H=U("el-input"),T=U("el-form-item"),q=U("el-option"),V=U("el-select"),A=U("el-icon"),z=U("el-button"),Br=U("el-form"),Ht=U("el-card"),N=U("el-table-column"),Wr=U("el-progress"),Vt=U("el-tag"),Gt=U("el-table"),Mr=U("el-pagination"),Fr=U("el-dialog"),Dr=Qr("loading");return ce(),Qt("div",Ms,[v(Ht,{class:"search-card"},{default:y(()=>[v(Br,{inline:!0,model:u},{default:y(()=>[v(T,{label:""},{default:y(()=>[v(H,{modelValue:u.keyword,"onUpdate:modelValue":p[0]||(p[0]=b=>u.keyword=b),placeholder:"",clearable:""},null,8,["modelValue"])]),_:1}),v(T,{label:""},{default:y(()=>[v(V,{modelValue:u.status,"onUpdate:modelValue":p[1]||(p[1]=b=>u.status=b),placeholder:"",clearable:""},{default:y(()=>[v(q,{label:"",value:null}),v(q,{label:"",value:0}),v(q,{label:"",value:1}),v(q,{label:"",value:2}),v(q,{label:"",value:3}),v(q,{label:"",value:4}),v(q,{label:"",value:5})]),_:1},8,["modelValue"])]),_:1}),v(T,null,{default:y(()=>[v(z,{type:"primary",onClick:_},{default:y(()=>[v(A,null,{default:y(()=>[v(te(Vr))]),_:1}),p[5]||(p[5]=P("  ",-1))]),_:1}),v(z,{onClick:C},{default:y(()=>[v(A,null,{default:y(()=>[v(te(Gr))]),_:1}),p[6]||(p[6]=P("  ",-1))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),v(Ht,{class:"table-card"},{header:y(()=>[ue("div",Fs,[p[8]||(p[8]=ue("span",{class:"card-title"},"",-1)),ue("div",null,[v(z,{type:"danger",disabled:r.value.length===0,onClick:D},{default:y(()=>[v(A,null,{default:y(()=>[v(te(Kt))]),_:1}),p[7]||(p[7]=P("  ",-1))]),_:1},8,["disabled"])])])]),default:y(()=>[Jr((ce(),xe(Gt,{data:n.value,style:{width:"100%"},onSelectionChange:W},{default:y(()=>[v(N,{type:"selection",width:"55"}),v(N,{prop:"taskName",label:"","min-width":"150"}),v(N,{prop:"sourcePath",label:"","min-width":"200","show-overflow-tooltip":""}),v(N,{prop:"targetPath",label:"","min-width":"200","show-overflow-tooltip":""}),v(N,{label:"",width:"200"},{default:y(({row:b})=>[v(Wr,{percentage:b.progress,status:ze(b.status)},null,8,["percentage","status"])]),_:1}),v(N,{label:"",width:"180"},{default:y(({row:b})=>[ue("div",null,[ue("span",Ds,": "+oe(b.uploadedCount),1),b.failedCount>0?(ce(),Qt("span",qs,": "+oe(b.failedCount),1)):Ce("",!0),ue("span",zs,"/ "+oe(b.totalCount),1)])]),_:1}),v(N,{label:"",width:"150"},{default:y(({row:b})=>[P(oe(ot(b.uploadedSize))+" / "+oe(ot(b.totalSize)),1)]),_:1}),v(N,{label:"",width:"100"},{default:y(({row:b})=>[v(Vt,{type:I(b.status)},{default:y(()=>[P(oe(R(b.status)),1)]),_:2},1032,["type"])]),_:1}),v(N,{prop:"createTime",label:"",width:"180"}),v(N,{label:"",width:"320",fixed:"right"},{default:y(({row:b})=>[ue("div",Xs,[b.status===0||b.status===3?(ce(),xe(z,{key:0,type:"primary",size:"small",onClick:Ee=>x(b.id)},{default:y(()=>[v(A,null,{default:y(()=>[v(te(Kr))]),_:1}),p[9]||(p[9]=P("  ",-1))]),_:1},8,["onClick"])):Ce("",!0),b.status===1?(ce(),xe(z,{key:1,type:"warning",size:"small",onClick:Ee=>$(b.id)},{default:y(()=>[v(A,null,{default:y(()=>[v(te(Zr))]),_:1}),p[10]||(p[10]=P("  ",-1))]),_:1},8,["onClick"])):Ce("",!0),b.status===5||b.status===2&&b.failedCount>0?(ce(),xe(z,{key:2,type:"success",size:"small",onClick:Ee=>E(b.id)},{default:y(()=>[v(A,null,{default:y(()=>[v(te(Yr))]),_:1}),p[11]||(p[11]=P("  ",-1))]),_:1},8,["onClick"])):Ce("",!0),b.status===1?(ce(),xe(z,{key:3,type:"danger",size:"small",onClick:Ee=>O(b.id)},{default:y(()=>[v(A,null,{default:y(()=>[v(te(eo))]),_:1}),p[12]||(p[12]=P("  ",-1))]),_:1},8,["onClick"])):Ce("",!0),v(z,{type:"info",size:"small",onClick:Ee=>L(b)},{default:y(()=>[v(A,null,{default:y(()=>[v(te(to))]),_:1}),p[13]||(p[13]=P("  ",-1))]),_:1},8,["onClick"]),v(z,{type:"danger",size:"small",onClick:Ee=>Y(b.id)},{default:y(()=>[v(A,null,{default:y(()=>[v(te(Kt))]),_:1}),p[14]||(p[14]=P("  ",-1))]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])),[[Dr,t.value]]),v(Mr,{"current-page":c.current,"onUpdate:currentPage":p[2]||(p[2]=b=>c.current=b),"page-size":c.size,"onUpdate:pageSize":p[3]||(p[3]=b=>c.size=b),total:c.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:le,onCurrentChange:ee},null,8,["current-page","page-size","total"])]),_:1}),v(Fr,{modelValue:o.value,"onUpdate:modelValue":p[4]||(p[4]=b=>o.value=b),title:"",width:"80%","close-on-click-modal":!1},{default:y(()=>[v(Gt,{data:s.value,style:{width:"100%"},"max-height":"500"},{default:y(()=>[v(N,{prop:"fileName",label:"","min-width":"200","show-overflow-tooltip":""}),v(N,{prop:"filePath",label:"","min-width":"250","show-overflow-tooltip":""}),v(N,{label:"",width:"120"},{default:y(({row:b})=>[P(oe(ot(b.fileSize)),1)]),_:1}),v(N,{label:"",width:"100"},{default:y(({row:b})=>[v(Vt,{type:Se(b.status)},{default:y(()=>[P(oe(Pr(b.status)),1)]),_:2},1032,["type"])]),_:1}),v(N,{prop:"uploadEndTime",label:"",width:"180"}),v(N,{prop:"errorMessage",label:"","min-width":"150","show-overflow-tooltip":""})]),_:1},8,["data"])]),_:1},8,["modelValue"])])}}},Js=zr(Hs,[["__scopeId","data-v-5ec341a3"]]);export{Js as default};
