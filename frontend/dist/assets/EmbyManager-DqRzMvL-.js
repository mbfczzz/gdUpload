import{_ as Qt,a as C,o as Jt,c as h,b as o,d as a,i as f,y as M,w as t,f as b,j as u,e as k,t as g,g as de,h as qt,R as D,S as V,Q as Xt,E as _,k as Te}from"./index-Du7G4jX3.js";import{r as R}from"./request-jab3afSv.js";import{a as Zt,t as Ve,b as el}from"./subscribe-DcD-2R_Z.js";import{g as tl}from"./smartSearchConfig-BhYJOK52.js";import"./index-B9ygI19o.js";function ll(){return R({url:"/emby/test",method:"get"})}function al(){return R({url:"/emby/server-info",method:"get"})}function nl(){return R({url:"/emby/libraries",method:"get"})}function sl(F,H=0,j=50){return R({url:`/emby/libraries/${F}/items/paged`,method:"get",params:{startIndex:H,limit:j}})}function ol(F){return R({url:`/emby/items/${F}`,method:"get"})}function rl(){return R({url:"/emby/genres",method:"get"})}function il(){return R({url:"/emby/tags",method:"get"})}function ul(){return R({url:"/emby/studios",method:"get"})}function cl(F){return R({url:"/emby/search",method:"get",params:{keyword:F}})}function dl(){return R({url:"/emby/sync",method:"post"})}function fl(){return R({url:"/emby/cache/status",method:"get"})}function Ie(F){return R({url:"/transfer-history/save",method:"post",data:F})}function pl(F){return R({url:`/transfer-history/item/${F}`,method:"get"})}function gl(F){return R({url:"/transfer-history/batch-check",method:"post",data:F})}function ml(F,H,j,te){return R({url:"/resource115/smart-search",method:"get",params:{tmdbId:F,name:H,originalTitle:j,year:te}})}const yl={class:"emby-container"},vl={class:"header-content"},_l={class:"header-left"},hl={class:"header-actions"},bl={class:"card-header"},kl={key:1},wl={class:"card-header"},Cl={class:"library-name"},Tl={key:0},Il={key:1,class:"text-muted"},$l={class:"card-header"},Sl={class:"category-list"},xl={key:0,class:"count"},zl={class:"card-header"},Ml={class:"category-list"},Ll={key:0,class:"count"},Al={class:"card-header"},Bl={class:"category-list"},Rl={key:0,class:"count"},Fl={class:"items-dialog-content"},Dl={class:"dialog-toolbar"},Vl={class:"total-count"},El={class:"item-name"},Nl={key:1,class:"text-muted"},Ul={key:1,class:"text-muted"},Yl={key:1,class:"text-muted"},Kl={class:"pagination-container"},jl={key:0,class:"download-dialog-content"},Pl={style:{"font-size":"13px","line-height":"1.6"}},Hl={style:{"margin-top":"4px"}},Ol={key:0,class:"search-results"},Wl={key:0},Gl={key:1},Ql={key:2},Jl={style:{display:"flex","align-items":"center",gap:"8px"}},ql={style:{"margin-top":"4px"}},Xl={key:1},Zl={key:2,class:"selected-result"},ea={class:"json-preview"},ta={key:1},la={key:1},aa={key:1},na={key:1},sa={key:0},oa={key:1,class:"text-muted"},ra={key:0},ia={key:1,class:"text-muted"},ua={key:0},ca={key:1,class:"text-muted"},da={key:0},fa={key:1,class:"text-muted"},pa={key:1,class:"text-muted"},ga={key:1,class:"text-muted"},ma={style:{display:"flex","justify-content":"space-between","align-items":"center"}},ya={style:{"font-weight":"bold"}},va={__name:"EmbyManager",setup(F){const H=C(!1),j=C(!1),te=C(!1),fe=C(!1),X=C(!1),pe=C(!1),ge=C(!1),me=C(!1),B=C(null),le=C(!0),Q=C([]),ae=C([]),ne=C([]),se=C([]),O=C([]),Y=C(null),T=C(null),ye=C(""),J=C(1),Z=C(50),$e=C(0),Se=C(!1),xe=C(!1),W=C(!1),ze=C(!1),ve=C([]),$=C(null),st=C(""),ot=C(null);C(!1);const G=C(""),_e=C(!1),K=C([]),P=C(null),q=C(!1),U=C([]),rt=C(!1),Me=C(!1),oe=C(!0),he=C(!0),re=C({}),Ee=l=>{const e=U.value.find(c=>c.cloudType===l);return e||(console.warn(`æœªæ‰¾åˆ° cloudType=${l} çš„äº‘ç›˜é…ç½®`),null)},it=async()=>{try{const l=await tl();if(l.data&&Object.keys(l.data).length>0){l.data.cloudConfigs&&Array.isArray(l.data.cloudConfigs)&&l.data.cloudConfigs.length>0&&(U.value=l.data.cloudConfigs),l.data.aiEnabled!==void 0&&(oe.value=l.data.aiEnabled),l.data.validateLinks!==void 0&&(he.value=l.data.validateLinks),console.log("ä»æ•°æ®åº“åŠ è½½æ™ºèƒ½æœç´¢é…ç½®:",l.data),console.log("äº‘ç›˜é…ç½®åˆ—è¡¨:",U.value);return}}catch(l){console.error("ä»æ•°æ®åº“åŠ è½½é…ç½®å¤±è´¥:",l)}try{const l=localStorage.getItem("smartSearchConfig");if(l){const e=JSON.parse(l);e.cloudConfigs&&Array.isArray(e.cloudConfigs)&&e.cloudConfigs.length>0?U.value=e.cloudConfigs:U.value=[{name:"é˜¿é‡Œäº‘ç›˜",cloudType:e.cloudType||"channel_alipan",parentId:e.alipanParentId||"697f2333cd2704159fa446d8bc5077584838e3dc",remark:""}],e.aiEnabled!==void 0&&(oe.value=e.aiEnabled),e.validateLinks!==void 0&&(he.value=e.validateLinks),console.log("ä»æœ¬åœ°åŠ è½½æ™ºèƒ½æœç´¢é…ç½®:",e),console.log("äº‘ç›˜é…ç½®åˆ—è¡¨:",U.value)}}catch(l){console.error("åŠ è½½æ™ºèƒ½æœç´¢é…ç½®å¤±è´¥:",l)}},ut=async()=>{H.value=!0;try{(await ll()).data?(_.success("Embyè¿æ¥æˆåŠŸ"),await Ne()):_.error("Embyè¿æ¥å¤±è´¥")}catch(l){_.error("è¿æ¥æµ‹è¯•å¤±è´¥: "+l.message)}finally{H.value=!1}},Ne=async()=>{try{const l=await al();B.value=l.data,await ct()}catch(l){console.error("åŠ è½½æœåŠ¡å™¨ä¿¡æ¯å¤±è´¥:",l)}},ct=async()=>{try{const l=await fl();le.value=l.data.hasCache,le.value||_.warning({message:'æ•°æ®åº“ä¸­æš‚æ— æ•°æ®ï¼Œè¯·å…ˆç‚¹å‡»"åŒæ­¥æ‰€æœ‰æ•°æ®"æŒ‰é’®ï¼',duration:5e3,showClose:!0})}catch(l){console.error("æ£€æŸ¥ç¼“å­˜çŠ¶æ€å¤±è´¥:",l)}},ie=async()=>{fe.value=!0;try{const l=await nl();Q.value=l.data}catch(l){_.error("åŠ è½½åª’ä½“åº“å¤±è´¥: "+l.message)}finally{fe.value=!1}},be=async()=>{pe.value=!0;try{const l=await rl();ae.value=l.data}catch(l){_.error("åŠ è½½ç±»å‹å¤±è´¥: "+l.message)}finally{pe.value=!1}},ke=async()=>{ge.value=!0;try{const l=await il();ne.value=l.data}catch(l){_.error("åŠ è½½æ ‡ç­¾å¤±è´¥: "+l.message)}finally{ge.value=!1}},we=async()=>{me.value=!0;try{const l=await ul();se.value=l.data}catch(l){_.error("åŠ è½½å·¥ä½œå®¤å¤±è´¥: "+l.message)}finally{me.value=!1}},dt=async l=>{Y.value=l,J.value=1,Se.value=!0,await ee()},ee=async()=>{if(Y.value){X.value=!0;try{const l=(J.value-1)*Z.value,e=await sl(Y.value.id,l,Z.value);if(O.value=e.data.items,$e.value=e.data.totalCount,Y.value.itemCount===void 0||Y.value.itemCount===null){const c=Q.value.findIndex(r=>r.id===Y.value.id);c!==-1&&(Q.value[c].itemCount=e.data.totalCount,Y.value.itemCount=e.data.totalCount)}await ft()}catch(l){_.error("åŠ è½½åª’ä½“é¡¹å¤±è´¥: "+l.message)}finally{X.value=!1}}},ft=async()=>{if(!(!O.value||O.value.length===0))try{const l=O.value.map(c=>c.id),e=await gl(l);e.data&&(re.value=e.data)}catch(l){console.error("åŠ è½½è½¬å­˜çŠ¶æ€å¤±è´¥:",l)}},pt=l=>{J.value=l,ee()},gt=l=>{Z.value=l,J.value=1,ee()},mt=async()=>{if(!ye.value.trim()){await ee();return}X.value=!0;try{const l=await cl(ye.value);O.value=l.data.filter(e=>e.parentId===Y.value.id||e.id===Y.value.id)}catch(l){_.error("æœç´¢å¤±è´¥: "+l.message)}finally{X.value=!1}},yt=async l=>{var e;console.log("æŸ¥çœ‹è¯¦æƒ… - itemId:",l.id,"name:",l.name,"type:",l.type);try{const c=await ol(l.id);T.value=c.data,xe.value=!0}catch(c){console.error("åŠ è½½è¯¦æƒ…å¤±è´¥:",c);let r="åŠ è½½è¯¦æƒ…å¤±è´¥";((e=c.response)==null?void 0:e.status)===404?r=`è¯¥åª’ä½“é¡¹ä¸å­˜åœ¨æˆ–æ— æƒè®¿é—®ï¼ˆID: ${l.id}ï¼‰`:c.message&&(r="åŠ è½½è¯¦æƒ…å¤±è´¥: "+c.message),_.error(r)}},vt=async l=>{try{const e=await pl(l.id);ve.value=e.data||[],ze.value=!0}catch(e){console.error("åŠ è½½è½¬å­˜å†å²å¤±è´¥:",e),_.error("åŠ è½½è½¬å­˜å†å²å¤±è´¥: "+e.message)}},Ue=async()=>{var l;try{await Te.confirm("æ­¤æ“ä½œå°†ä¸€æ¬¡æ€§å…¨é‡åŒæ­¥æ‰€æœ‰åª’ä½“åº“æ•°æ®åˆ°æ•°æ®åº“ï¼Œå¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ","æç¤º",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:"warning"}),j.value=!0;const e=await dl();e.data.success?(_.success({message:`åŒæ­¥å®Œæˆï¼å…± ${e.data.totalLibraries} ä¸ªåª’ä½“åº“ï¼Œ${e.data.totalItems} ä¸ªåª’ä½“é¡¹ï¼Œè€—æ—¶ ${e.data.duration}`,duration:5e3}),le.value=!0,await ie(),await be(),await ke(),await we()):e.data.failedLibraries>0?(_.warning({message:`åŒæ­¥å®Œæˆï¼Œä½†æœ‰ ${e.data.failedLibraries} ä¸ªåª’ä½“åº“å¤±è´¥ã€‚æˆåŠŸ: ${e.data.successLibraries} ä¸ªï¼Œåª’ä½“é¡¹: ${e.data.totalItems} ä¸ªã€‚å¤±è´¥çš„åª’ä½“åº“: ${(l=e.data.failedLibraryNames)==null?void 0:l.join(", ")}`,duration:1e4,showClose:!0}),le.value=!0,await ie(),await be(),await ke(),await we()):_.error("åŒæ­¥å¤±è´¥: "+(e.data.error||e.data.message))}catch(e){e!=="cancel"&&_.error("åŒæ­¥å¤±è´¥: "+e.message)}finally{j.value=!1}},_t=async()=>{try{await Te.confirm("æ­¤æ“ä½œå°†æ¸…ç©ºæ‰€æœ‰Embyæ•°æ®ç¼“å­˜ï¼Œä¸‹æ¬¡è®¿é—®æ—¶å°†ä»EmbyæœåŠ¡å™¨é‡æ–°è·å–æ•°æ®ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ","è­¦å‘Š",{confirmButtonText:"ç¡®å®šæ¸…ç©º",cancelButtonText:"å–æ¶ˆ",type:"warning"}),te.value=!0;const l=await fetch("/api/emby/cache/clear",{method:"POST",headers:{"Content-Type":"application/json"}}).then(e=>e.json());l.code===200?(_.success("ç¼“å­˜å·²æ¸…ç©ºï¼Œä¸‹æ¬¡è®¿é—®å°†ä»EmbyæœåŠ¡å™¨è·å–æœ€æ–°æ•°æ®"),Q.value=[],O.value=[],ae.value=[],ne.value=[],se.value=[]):_.error("æ¸…ç©ºç¼“å­˜å¤±è´¥: "+l.message)}catch(l){l!=="cancel"&&_.error("æ¸…ç©ºç¼“å­˜å¤±è´¥: "+l.message)}finally{te.value=!1}},Le=l=>{if(!l)return"-";const e=["B","KB","MB","GB","TB"],c=Math.floor(Math.log(l)/Math.log(1024));return(l/Math.pow(1024,c)).toFixed(2)+" "+e[c]},ht=l=>l?(l/1e6).toFixed(2)+" Mbps":"-",Ae=l=>{if(!l)return"";let e=l;return e=e.replace(/[\u0022\u0027\u0060\u00B4\u2018\u2019\u201A\u201B\u201C\u201D\u201E\u201F\u2032\u2033\u2034\u2035\u2036\u2037\u2039\u203A\u275B\u275C\u275D\u275E\u276E\u276F\u2E42\u301D\u301E\u301F\uFF02\uFF07\u00AB\u00BB\u3008\u3009\u300A\u300B\u300C\u300D\u300E\u300F\u3010\u3011]/g,""),e=e.replace(/\([^)]*\)/g," "),e=e.replace(/\[[^\]]*\]/g," "),e=e.replace(/\{[^}]*\}/g," "),e=e.replace(/ï¼ˆ[^ï¼‰]*ï¼‰/g," "),e=e.replace(/ã€[^ã€‘]*ã€‘/g," "),e=e.replace(/ã€”[^ã€•]*ã€•/g," "),e=e.replace(/ã€ˆ[^ã€‰]*ã€‰/g," "),e=e.replace(/ã€Š[^ã€‹]*ã€‹/g," "),e=e.replace(/ï¹[^ï¹]*ï¹/g," "),e=e.replace(/ï¹™[^ï¹š]*ï¹š/g," "),e=e.replace(/[,ï¼Œ.ã€‚:ï¼š;ï¼›!ï¼?ï¼Ÿã€]/g," "),e=e.replace(/[-â€“â€”_~Â·â€¢]/g," "),e=e.replace(/[/\\|]/g," "),e=e.replace(/[&ï¼†@ï¼ #ï¼ƒ$ï¼„%ï¼…^ï¼¾*ï¼Š+=ï¼‹ï¼<>ï¼œï¼]/g," "),e=e.replace(/[\u{1F300}-\u{1F9FF}]/gu,""),e=e.replace(/[\u{2600}-\u{26FF}]/gu,""),e=e.replace(/[\u{2700}-\u{27BF}]/gu,""),e=e.replace(/\s+/g," ").trim(),console.log("æ¸…ç†å…³é”®è¯ - åŸå§‹:",l),console.log("æ¸…ç†å…³é”®è¯ - ç»“æœ:",e),e},bt=async l=>{$.value=l,st.value="",ot.value=null,K.value=[],P.value=null;let e=null;l.providerIds&&l.providerIds.Tmdb?(e=l.providerIds.Tmdb,console.log("æå–åˆ° TMDB ID:",e)):console.log("æœªæ‰¾åˆ° TMDB ID");try{_.info("æ­£åœ¨ä»115èµ„æºåº“æœç´¢åŒ¹é…èµ„æº...");const r=await ml(e,l.name,l.originalTitle,l.productionYear);if(r.data){const s=r.data;_.success(`æ‰¾åˆ°åŒ¹é…èµ„æº: ${s.name}`),await Lt(s);return}else _.info("115èµ„æºåº“ä¸­æœªæ‰¾åˆ°åŒ¹é…èµ„æºï¼Œå°†ä½¿ç”¨æœç´¢å¼•æ“æœç´¢")}catch(r){console.error("æœç´¢115èµ„æºå¤±è´¥:",r),_.warning("115èµ„æºåº“æœç´¢å¤±è´¥ï¼Œå°†ä½¿ç”¨æœç´¢å¼•æ“æœç´¢")}let c=l.originalTitle||l.name;c=Ae(c),console.log("åŸå§‹å…³é”®è¯:",l.originalTitle||l.name),console.log("æ¸…ç†åå…³é”®è¯:",c),G.value=c,W.value=!0,ue()},ue=async()=>{var l,e,c,r;if(!G.value){_.warning("è¯·è¾“å…¥æœç´¢å…³é”®è¯");return}_e.value=!0,K.value=[],P.value=null;try{const s=await Zt(G.value,!0);console.log("=== æœç´¢è¿”å›åŸå§‹ç»“æœ ==="),console.log("å®Œæ•´å“åº”:",s),console.log("res.data:",s.data),console.log("res.data.channels:",(l=s.data)==null?void 0:l.channels),console.log("res.data.channel_info_list:",(e=s.data)==null?void 0:e.channel_info_list);let d=[];const m=((c=s.data)==null?void 0:c.channels)||((r=s.data)==null?void 0:r.channel_info_list);if(m&&Array.isArray(m)?(console.log(`æ‰¾åˆ° ${m.length} ä¸ªé¢‘é“`),m.forEach((p,w)=>{const v=p.channelInfo||{};console.log(`
=== é¢‘é“ ${w+1}: ${v.name||"æœªçŸ¥"} ===`),p.messages&&Array.isArray(p.messages)&&(console.log(`  - messages æ•°ç»„é•¿åº¦: ${p.messages.length}`),p.messages.forEach((i,y)=>{var z,x;console.log(`    æ¶ˆæ¯ ${y+1}:`,{messageId:i.messageId,title:(z=i.title)==null?void 0:z.substring(0,50),text:(x=i.text)==null?void 0:x.substring(0,50),cloudLinks:i.cloudLinks}),i.cloudLinks&&i.cloudLinks.length>0&&i.cloudLinks.forEach((L,A)=>{const I=i.title||i.text,E=Ye(I);console.log(`      é“¾æ¥ ${A+1}: ${L}`),console.log(`      æå–çš„æ ‡é¢˜: ${E}`),d.push({id:`${i.messageId}-${A}`,messageId:i.messageId,title:E,rawTitle:I,description:i.text||i.content,url:L,link:L,share_url:L,size:Ke(i.text||i.content),resolution:je(i.text||i.content),tags:i.tags||[],image:i.image,cloudType:i.cloudType,channelId:i.channelId||v.id,channelName:v.name||"æœªçŸ¥æ¥æº"})})})),p.list&&Array.isArray(p.list)&&(console.log(`  - list æ•°ç»„é•¿åº¦: ${p.list.length}`),p.list.forEach((i,y)=>{var z,x;console.log(`    é¡¹ç›® ${y+1}:`,{messageId:i.messageId,title:(z=i.title)==null?void 0:z.substring(0,50),content:(x=i.content)==null?void 0:x.substring(0,50),cloudLinks:i.cloudLinks}),i.cloudLinks&&i.cloudLinks.length>0&&i.cloudLinks.forEach((L,A)=>{const I=i.title||i.content,E=Ye(I);console.log(`      é“¾æ¥ ${A+1}: ${L}`),console.log(`      æå–çš„æ ‡é¢˜: ${E}`),d.push({id:`${i.messageId}-${A}`,messageId:i.messageId,title:E,rawTitle:I,description:i.content||i.title,url:L,link:L,share_url:L,size:Ke(i.content||i.title),resolution:je(i.content||i.title),tags:i.tags||[],image:i.image,cloudType:i.cloudType,channelId:i.channelId||v.id,channelName:v.name||"æœªçŸ¥æ¥æº",pubDate:i.pubDate})})}))})):Array.isArray(s)?(console.log("å“åº”æ˜¯æ•°ç»„æ ¼å¼"),d=s):s.data&&Array.isArray(s.data)?(console.log("res.data æ˜¯æ•°ç»„æ ¼å¼"),d=s.data):s.results&&Array.isArray(s.results)?(console.log("res.results æ˜¯æ•°ç»„æ ¼å¼"),d=s.results):console.error("æ— æ³•è¯†åˆ«çš„æ•°æ®æ ¼å¼:",s),console.log(`
=== æœ€ç»ˆç»“æœ ===`),console.log(`æ€»å…±æå–äº† ${d.length} ä¸ªç»“æœ`),console.log("å‰3ä¸ªç»“æœ:",d.slice(0,3)),d.length>0&&(d=wt(d,G.value,$.value),console.log("æ’åºåå‰3ä¸ªç»“æœ:",d.slice(0,3))),oe.value&&d.length>0&&await kt(d),K.value=d,d.length>0){const w=d.filter(v=>v.matchScore>=30);if(w.length===0){_.warning("æœªæ‰¾åˆ°ç¬¦åˆè¦æ±‚çš„èµ„æºï¼ˆæ‰€æœ‰ç»“æœè¯„åˆ†è¿‡ä½ï¼‰");return}console.log(`
=== ç­›é€‰ç»“æœ ===`),console.log(`åŸå§‹ç»“æœ: ${d.length} ä¸ª`),console.log(`åˆæ ¼ç»“æœ: ${w.length} ä¸ªï¼ˆè¯„åˆ†â‰¥30ï¼‰`),_.success(`æ‰¾åˆ° ${w.length} ä¸ªåˆæ ¼ç»“æœï¼Œå‡†å¤‡è‡ªåŠ¨è½¬å­˜`),await Mt(w,1)}else _.warning("æœªæ‰¾åˆ°æœç´¢ç»“æœ")}catch(s){console.error("æœç´¢å¤±è´¥:",s),K.value=[]}finally{_e.value=!1}},kt=async l=>{console.log(`
=== å¼€å§‹AIæ™ºèƒ½ç­›é€‰ ===`),Me.value=!0;try{const e={name:$.value.name,originalTitle:$.value.originalTitle,productionYear:$.value.productionYear,communityRating:$.value.communityRating,genres:$.value.genres,overview:$.value.overview},c=l.slice(0,10).map(s=>{var d;return{id:s.id,title:s.title,size:s.size,resolution:s.resolution,tags:s.tags,description:(d=s.description)==null?void 0:d.substring(0,200),matchScore:s.matchScore,isValid:s.isValid,hasFiles:s.hasFiles}});console.log("å‘é€ç»™AIçš„æ•°æ®:",{movieInfo:e,resourceCount:c.length});const r=await el(e,c);if(console.log("AIç­›é€‰ç»“æœ:",r),r.data&&r.data.title_match===!1){console.log("AIåˆ¤æ–­: æ‰€æœ‰èµ„æºéƒ½ä¸åŒ¹é…"),_.warning(`AIåˆ¤æ–­: ${r.data.reason}`),l.length=0;return}if(r.data&&r.data.best_resource_id){const s=r.data.best_resource_id,d=l.find(m=>m.id===s);if(d){d.aiRecommended=!0,d.aiReason=r.data.reason,d.matchScore+=15,d.matchReasons.push("AIæ¨è: +15åˆ†"),console.log("AIæ¨èèµ„æº:",d.title),console.log("æ¨èç†ç”±:",r.data.reason);const m=l.indexOf(d);m>0&&(l.splice(m,1),l.unshift(d))}}}catch(e){console.error("AIç­›é€‰å¤±è´¥:",e),_.warning("AIç­›é€‰æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œä½¿ç”¨è§„åˆ™ç­›é€‰")}finally{Me.value=!1}},wt=(l,e,c)=>{var d,m;console.log(`
=== å¼€å§‹æ™ºèƒ½æ’åº ===`),console.log("æœç´¢å…³é”®è¯:",e),console.log("ç”µå½±ä¿¡æ¯:",c);let r={titleMatch:40,resolution:20,fileSize:15,tagMatch:10,sourceCredibility:10,timeliness:5};try{const p=localStorage.getItem("smartSearchConfig");if(p){const w=JSON.parse(p);w.weights&&(r=w.weights,console.log("ä½¿ç”¨è‡ªå®šä¹‰æƒé‡:",r))}}catch(p){console.error("åŠ è½½æƒé‡é…ç½®å¤±è´¥:",p)}const s=l.map(p=>{let w=0;const v=[],i=Ct(p.title,e,c,r.titleMatch);w+=i,i>0&&v.push(`æ ‡é¢˜åŒ¹é…: ${i.toFixed(1)}åˆ†`);const y=Tt(p.resolution,p.description,r.resolution);w+=y,y>0&&v.push(`åˆ†è¾¨ç‡: ${y.toFixed(1)}åˆ†`);const z=It(p.size,r.fileSize);w+=z,z>0&&v.push(`æ–‡ä»¶å¤§å°: ${z.toFixed(1)}åˆ†`);const x=$t(p.tags,c,r.tagMatch);w+=x,x>0&&v.push(`æ ‡ç­¾åŒ¹é…: ${x.toFixed(1)}åˆ†`);const L=St(p.channelName,p.cloudType,r.sourceCredibility);w+=L,L>0&&v.push(`æ¥æº: ${L.toFixed(1)}åˆ†`);const A=xt(p.pubDate,r.timeliness);return w+=A,A>0&&v.push(`æ—¶æ•ˆæ€§: ${A.toFixed(1)}åˆ†`),console.log(`
èµ„æº: ${p.title}`),console.log(`æ€»åˆ†: ${w.toFixed(1)}`),console.log(`è¯„åˆ†è¯¦æƒ…: ${v.join(", ")}`),{...p,matchScore:w,matchReasons:v}});return s.sort((p,w)=>w.matchScore-p.matchScore),console.log(`
=== æ’åºå®Œæˆ ===`),console.log("æœ€ä½³åŒ¹é…:",(d=s[0])==null?void 0:d.title,"å¾—åˆ†:",(m=s[0])==null?void 0:m.matchScore.toFixed(1)),s},Ct=(l,e,c,r=40)=>{let s=0;const d=l.toLowerCase(),m=e.toLowerCase();if(d.includes(m))s+=r;else{const p=m.split(""),w=p.filter(v=>d.includes(v));s+=w.length/p.length*(r*.75)}if(c!=null&&c.originalTitle){const p=c.originalTitle.toLowerCase();d.includes(p)&&(s+=r*.25)}return Math.min(s,r)},Tt=(l,e,c=20)=>{const s=((l||"")+" "+(e||"")).toLowerCase();return s.includes("4k")||s.includes("2160p")?c:s.includes("remux")||s.includes("è“å…‰åŸç›˜")?c*.9:s.includes("1080p")||s.includes("bluray")?c*.75:s.includes("720p")?c*.5:s.includes("480p")?c*.25:0},It=(l,e=15)=>{if(!l||l==="-"||l==="N")return 0;const c=l.match(/(\d+\.?\d*)\s*(GB|MB|TB)/i);if(!c)return 0;const r=parseFloat(c[1]),s=c[2].toUpperCase();let d=r;return s==="MB"?d=r/1024:s==="TB"&&(d=r*1024),d>=10&&d<=50?e:d>=5&&d<=80?e*.67:d>=2&&d<=100?e*.33:0},$t=(l,e,c=10)=>{if(!l||l.length===0)return 0;let r=0;const s=["#ç”µå½±","#movie","#å‰§æƒ…","#åŠ¨ä½œ","#å–œå‰§","#ç§‘å¹»"];l.some(w=>s.some(v=>w.toLowerCase().includes(v.toLowerCase())))&&(r+=c*.5);const m=["#è“å…‰","#é«˜æ¸…","#4k","#remux","#bluray"];return l.some(w=>m.some(v=>w.toLowerCase().includes(v.toLowerCase())))&&(r+=c*.5),Math.min(r,c)},St=(l,e,c=10)=>{let r=c*.5;return e==="channel_alipan"&&(r+=c*.3),["ali-01","å¤©ç¿¼äº‘ç›˜","shareAliyun"].includes(l)&&(r+=c*.2),Math.min(r,c)},xt=(l,e=5)=>{if(!l)return 0;try{const c=new Date(l),s=(new Date-c)/(1e3*60*60*24);if(s<=30)return e;if(s<=90)return e*.6;if(s<=180)return e*.2}catch(c){console.error("è§£æå‘å¸ƒæ—¶é—´å¤±è´¥:",c)}return 0},Ye=l=>{if(!l)return"æœªçŸ¥æ ‡é¢˜";if(!l.includes(`
`)&&l.length<100)return l.trim();l=l.replace(/https?:\/\/[^\s]+/g,"");const e=l.split(`
`).map(r=>r.trim()).filter(r=>r.length>0);for(let r=0;r<Math.min(5,e.length);r++){const s=e[r];if(!(s.includes("æœ¬ç‰‡")||s.includes("æè¿°ï¼š")||s.includes("ç®€ä»‹ï¼š")||s.includes("é“¾æ¥ï¼š")||s.includes("ğŸ“")||s.includes("ğŸ·")||s.includes("ğŸ‰")||s.includes("âš ï¸")||s.includes("ğŸ“¢")||s.includes("ğŸ‘¥")||s.includes("ğŸ¤–")||s.startsWith("å¤§å°")||s.startsWith("æ ‡ç­¾")||s.startsWith("æ¥è‡ª")||s.startsWith("ç‰ˆæƒ")||s.startsWith("é¢‘é“")||s.startsWith("ç¾¤ç»„")||s.startsWith("æŠ•ç¨¿"))&&!(s.length<2)&&s.length>=2){let d=s.replace(/^åç§°[ï¼š:]\s*/g,"").replace(/^æ ‡é¢˜[ï¼š:]\s*/g,"").replace(/\s*\(\d{4}\)\s*/g," ").replace(/\s*ï¼ˆ\d{4}ï¼‰\s*/g," ").trim();if(d.length>60){const m=d.substring(0,60).lastIndexOf(" ");m>30?d=d.substring(0,m)+"...":d=d.substring(0,60)+"..."}return d}}const c=e[0]||"æœªçŸ¥æ ‡é¢˜";return c.substring(0,60)+(c.length>60?"...":"")},Ke=l=>{if(!l)return"-";const e=[/ğŸ“\s*å¤§å°[ï¼š:]\s*([^\n]+)/,/å¤§å°[ï¼š:]\s*([^\n]+)/,/(\d+\.?\d*\s*[KMGT]B)/i,/\((\d+\.?\d*\s*[KMGT]B)\)/i];for(const c of e){const r=l.match(c);if(r)return r[1].trim()}return"-"},je=l=>{if(!l)return null;const e=["4K","2160p","1080p","720p","480p","REMUX","BluRay","Blu-ray","WEB-DL","WEBRip","è“å…‰","è“å…‰åŸç›˜","è¶…æ¸…","é«˜æ¸…","æ ‡æ¸…","HDR","SDR","Dolby","æœæ¯”"];for(const c of e)if(l.includes(c))return c;return null},zt=l=>{P.value=l},Mt=async(l,e=1)=>{var r,s,d,m;console.log(`
=== å¼€å§‹è‡ªåŠ¨è½¬å­˜ ===`),console.log(`å€™é€‰èµ„æºæ•°: ${l.length}`),console.log(`æœ€å¤šå°è¯•: ${e} æ¬¡`),q.value=!0;const c=[];try{let p=0,w=null;for(let v=0;v<l.length&&p<e;v++){const i=l[v];console.log(`
--- æ£€æŸ¥èµ„æº ${v+1}/${l.length} ---`),console.log(`èµ„æº: ${i.title}`),console.log(`è¯„åˆ†: ${(r=i.matchScore)==null?void 0:r.toFixed(1)}`),console.log(`cloudType: ${i.cloudType}`);const y=i.url||i.link||i.share_url;if(!y){console.log("âœ— è·³è¿‡: æ²¡æœ‰æœ‰æ•ˆé“¾æ¥");continue}const z=Ee(i.cloudType);if(!z){console.log(`âœ— è·³è¿‡: æœªé…ç½® ${i.cloudType}`);continue}if(!z.parentId){console.log(`âœ— è·³è¿‡: ${z.name} æœªè®¾ç½®ç›®å½•ID`);continue}p++,console.log(`
>>> å¼€å§‹ç¬¬ ${p} æ¬¡è½¬å­˜å°è¯• <<<`),console.log(`ä½¿ç”¨äº‘ç›˜: ${z.name} (${z.cloudType})`);try{_.info(`æ­£åœ¨è½¬å­˜: ${i.title}`);const x=await Ve(y,z.parentId,z.cloudType);console.log("è½¬å­˜å“åº”:",x);const L=x.success||x.code===0||x.code===200||x.status==="success",A=x.message||x.msg||x.error||(L?"è½¬å­˜æˆåŠŸ":"è½¬å­˜å¤±è´¥"),I={embyItemId:$.value.id,embyItemName:$.value.name,embyItemYear:$.value.productionYear,resourceId:i.id,resourceTitle:i.title,resourceUrl:y,matchScore:i.matchScore,cloudType:i.cloudType,cloudName:z.name,parentId:z.parentId,transferStatus:L?"success":"failed",transferMessage:A};try{await Ie(I)}catch(E){console.error("ä¿å­˜è½¬å­˜å†å²å¤±è´¥:",E)}if(c.push({...I,index:v+1,total:l.length}),L){w=i,console.log("âœ“âœ“âœ“ è½¬å­˜æˆåŠŸï¼âœ“âœ“âœ“"),_.success({message:`è½¬å­˜æˆåŠŸï¼
èµ„æº: ${i.title}
è¯„åˆ†: ${(s=i.matchScore)==null?void 0:s.toFixed(1)}åˆ†
äº‘ç›˜: ${z.name}`,duration:5e3,showClose:!0}),re.value[$.value.id]=!0,W.value=!1;break}else console.log(`âœ— è½¬å­˜å¤±è´¥: ${A}`),_.warning({message:`è½¬å­˜å¤±è´¥: ${A}`,duration:3e3}),p<e&&(console.log("ç»§ç»­å°è¯•ä¸‹ä¸€ä¸ªèµ„æº..."),await new Promise(E=>setTimeout(E,1e3)))}catch(x){console.error("âœ— è½¬å­˜å¼‚å¸¸:",x);const L=((m=(d=x.response)==null?void 0:d.data)==null?void 0:m.message)||x.message||"æœªçŸ¥é”™è¯¯",A={embyItemId:$.value.id,embyItemName:$.value.name,embyItemYear:$.value.productionYear,resourceId:i.id,resourceTitle:i.title,resourceUrl:y,matchScore:i.matchScore,cloudType:i.cloudType,cloudName:z.name,parentId:z.parentId,transferStatus:"failed",transferMessage:L};try{await Ie(A)}catch(I){console.error("ä¿å­˜è½¬å­˜å†å²å¤±è´¥:",I)}c.push({...A,index:v+1,total:l.length}),_.warning({message:`è½¬å­˜å¤±è´¥: ${L}`,duration:3e3}),p<e&&(console.log("ç»§ç»­å°è¯•ä¸‹ä¸€ä¸ªèµ„æº..."),await new Promise(I=>setTimeout(I,1e3)))}}if(console.log(`
=== è½¬å­˜è®°å½• ===`),console.log(`å°è¯•æ¬¡æ•°: ${c.length}`),c.forEach((v,i)=>{const y=v.transferStatus==="success"?"âœ“ æˆåŠŸ":"âœ— å¤±è´¥";console.log(`${i+1}. ${y} - ${v.resourceTitle} - ${v.transferMessage}`)}),w)console.log(`
=== è½¬å­˜å®Œæˆ ===`),console.log(`æˆåŠŸè½¬å­˜: ${w.title}`),console.log(`å®é™…å°è¯•æ¬¡æ•°: ${p}`);else{console.log(`
=== è½¬å­˜å¤±è´¥ ===`),console.log(`å·²å°è¯• ${p} æ¬¡ï¼Œå…¨éƒ¨å¤±è´¥`);let v=`è‡ªåŠ¨è½¬å­˜å¤±è´¥ï¼å·²å°è¯• ${p} ä¸ªèµ„æºï¼š

`;c.forEach((i,y)=>{v+=`${y+1}. ${i.resourceTitle}
   çŠ¶æ€: ${i.transferStatus==="success"?"æˆåŠŸ":"å¤±è´¥"}
   åŸå› : ${i.transferMessage}

`}),Te.alert(v,"è½¬å­˜ç»“æœ",{confirmButtonText:"ç¡®å®š",type:"warning",dangerouslyUseHTMLString:!1})}}catch(p){console.error("è‡ªåŠ¨è½¬å­˜å¼‚å¸¸:",p),_.error("è‡ªåŠ¨è½¬å­˜å¤±è´¥: "+p.message)}finally{q.value=!1}},Lt=async l=>{var e,c,r,s;try{if(!U.value||U.value.length===0){_.error("è¯·å…ˆé…ç½®äº‘ç›˜ä¿¡æ¯");return}const d=U.value[0];if(!d||!d.parentId){_.error("è¯·å…ˆé…ç½®äº‘ç›˜ä¿¡æ¯");return}q.value=!0;let m=l.url;l.code&&(m=`${l.url}?code=${l.code}`),_.info(`æ­£åœ¨è½¬å­˜: ${l.name}`);const p=await Ve(m,d.parentId,"115");console.log("115èµ„æºè½¬å­˜ç»“æœ:",p);const w=p.code===200||p.success===!0,v=p.message||p.msg||p.error||(w?"è½¬å­˜æˆåŠŸ":"è½¬å­˜å¤±è´¥"),i={embyItemId:$.value.id,embyItemName:$.value.name,embyItemYear:$.value.productionYear,resourceId:(e=l.id)==null?void 0:e.toString(),resourceTitle:l.name,resourceUrl:m,matchScore:100,cloudType:"115",cloudName:d.name,parentId:d.parentId,transferStatus:w?"success":"failed",transferMessage:v};try{await Ie(i)}catch(y){console.error("ä¿å­˜è½¬å­˜å†å²å¤±è´¥:",y)}if(w)_.success({message:`è½¬å­˜æˆåŠŸï¼
èµ„æº: ${l.name}
æ¥æº: 115èµ„æºåº“
äº‘ç›˜: ${d.name}`,duration:5e3,showClose:!0}),re.value[$.value.id]=!0,W.value=!1;else{_.error(`è½¬å­˜å¤±è´¥: ${v}`),_.info("å°†ä½¿ç”¨æœç´¢å¼•æ“ç»§ç»­æœç´¢èµ„æº");let y=$.value.originalTitle||$.value.name;y=Ae(y),G.value=y,W.value=!0,ue()}}catch(d){console.error("115èµ„æºè½¬å­˜å¼‚å¸¸:",d);const m=((r=(c=d.response)==null?void 0:c.data)==null?void 0:r.message)||d.message||"è½¬å­˜å¤±è´¥",p={embyItemId:$.value.id,embyItemName:$.value.name,embyItemYear:$.value.productionYear,resourceId:(s=l.id)==null?void 0:s.toString(),resourceTitle:l.name,resourceUrl:l.url,matchScore:100,cloudType:"115",cloudName:"115",parentId:"",transferStatus:"failed",transferMessage:m};try{await Ie(p)}catch(v){console.error("ä¿å­˜è½¬å­˜å†å²å¤±è´¥:",v)}_.error(`è½¬å­˜å¤±è´¥: ${m}`),_.info("å°†ä½¿ç”¨æœç´¢å¼•æ“ç»§ç»­æœç´¢èµ„æº");let w=$.value.originalTitle||$.value.name;w=Ae(w),G.value=w,W.value=!0,ue()}finally{q.value=!1}},At=async l=>{var s,d;const e=l.url||l.link||l.share_url;if(!e){_.error("è¯¥èµ„æºæ²¡æœ‰æœ‰æ•ˆçš„åˆ†äº«é“¾æ¥");return}const c=e.includes("alipan.com")||e.includes("aliyundrive.com"),r=e.includes("cloud.189.cn");if(!c&&!r){_.warning("è¯¥é“¾æ¥ä¸æ˜¯é˜¿é‡Œäº‘ç›˜æˆ–å¤©ç¿¼äº‘ç›˜åˆ†äº«é“¾æ¥ï¼Œæ— æ³•è½¬å­˜");return}r&&_.info("æ£€æµ‹åˆ°å¤©ç¿¼äº‘ç›˜é“¾æ¥ï¼Œå°†å°è¯•è½¬å­˜"),P.value=l,q.value=!0;try{await Te.confirm(`ç¡®å®šè¦è½¬å­˜è¿™ä¸ªèµ„æºå—ï¼Ÿ

æ ‡é¢˜: ${l.title}
å¤§å°: ${l.size||"æœªçŸ¥"}
æ¥æº: ${l.channelName}
é“¾æ¥: ${e}`,"ç¡®è®¤è½¬å­˜",{confirmButtonText:"ç¡®å®šè½¬å­˜",cancelButtonText:"å–æ¶ˆ",type:"warning"});const m=Ee(P.value.cloudType);if(!m){_.error(`æœªæ‰¾åˆ° cloudType="${P.value.cloudType}" çš„äº‘ç›˜é…ç½®ï¼Œè¯·åœ¨æ™ºèƒ½æœç´¢é…ç½®ä¸­æ·»åŠ `);return}if(!m.parentId){_.warning(`äº‘ç›˜é…ç½®"${m.name}"æœªè®¾ç½®ç›®å½•IDï¼Œè¯·åœ¨æ™ºèƒ½æœç´¢é…ç½®ä¸­å®Œå–„`);return}console.log("ä½¿ç”¨äº‘ç›˜é…ç½®:",m);const p=await Ve(e,m.parentId,m.cloudType);if(console.log("è½¬å­˜ç»“æœ:",p),p.success||p.code===0||p.status==="success")_.success("è½¬å­˜æˆåŠŸï¼èµ„æºå·²ä¿å­˜åˆ°é˜¿é‡Œäº‘ç›˜"),W.value=!1;else{const w=p.message||p.msg||p.error||"è½¬å­˜å¤±è´¥";_.error("è½¬å­˜å¤±è´¥: "+w)}}catch(m){if(m!=="cancel"){console.error("è½¬å­˜å¤±è´¥:",m);const p=((d=(s=m.response)==null?void 0:s.data)==null?void 0:d.message)||m.message||"æœªçŸ¥é”™è¯¯";_.error("è½¬å­˜å¤±è´¥: "+p)}}finally{q.value=!1}},Bt=l=>JSON.stringify(l,null,2);return Jt(async()=>{it(),await Ne(),await ie(),await be(),await ke(),await we()}),(l,e)=>{var lt,at,nt;const c=k("CircleCheck"),r=k("el-icon"),s=k("el-tag"),d=k("Connection"),m=k("el-button"),p=k("Refresh"),w=k("Delete"),v=k("el-card"),i=k("el-text"),y=k("el-descriptions-item"),z=k("el-link"),x=k("el-descriptions"),L=k("el-alert"),A=k("el-empty"),I=k("el-table-column"),E=k("Film"),Pe=k("Monitor"),He=k("Headset"),Rt=k("Folder"),Ft=k("FolderOpened"),Oe=k("View"),Be=k("el-table"),Re=k("el-col"),Dt=k("el-row"),We=k("Search"),Ge=k("el-input"),Vt=k("VideoPlay"),Qe=k("Document"),Et=k("Check"),Fe=k("el-rate"),De=k("el-tooltip"),Je=k("Download"),Nt=k("el-pagination"),Ce=k("el-dialog"),qe=k("el-divider"),Xe=k("el-form-item"),Ze=k("el-checkbox"),Ut=k("el-form"),et=k("Loading"),Yt=k("CircleClose"),Kt=k("QuestionFilled"),tt=k("el-progress"),jt=k("el-image"),Pt=k("Star"),Ht=k("el-timeline-item"),Ot=k("el-timeline"),ce=qt("loading");return o(),h("div",yl,[a(v,{class:"header-card"},{default:t(()=>[b("div",vl,[b("div",_l,[e[11]||(e[11]=b("h2",null,"Emby åª’ä½“åº“ç®¡ç†",-1)),B.value?(o(),f(s,{key:0,type:"success",size:"large"},{default:t(()=>[a(r,null,{default:t(()=>[a(c)]),_:1}),e[10]||(e[10]=u(" å·²è¿æ¥ ",-1))]),_:1})):M("",!0)]),b("div",hl,[a(m,{type:"primary",onClick:ut,loading:H.value},{default:t(()=>[a(r,null,{default:t(()=>[a(d)]),_:1}),e[12]||(e[12]=u(" æµ‹è¯•è¿æ¥ ",-1))]),_:1},8,["loading"]),a(m,{type:"success",onClick:Ue,loading:j.value},{default:t(()=>[a(r,null,{default:t(()=>[a(p)]),_:1}),e[13]||(e[13]=u(" åŒæ­¥æ‰€æœ‰æ•°æ® ",-1))]),_:1},8,["loading"]),a(m,{type:"warning",onClick:_t,loading:te.value},{default:t(()=>[a(r,null,{default:t(()=>[a(w)]),_:1}),e[14]||(e[14]=u(" æ¸…ç©ºç¼“å­˜ ",-1))]),_:1},8,["loading"])])])]),_:1}),B.value?(o(),f(v,{key:0,class:"info-card"},{header:t(()=>[b("div",bl,[e[15]||(e[15]=b("span",null,"æœåŠ¡å™¨ä¿¡æ¯",-1)),a(s,{type:"info"},{default:t(()=>[u(g(B.value.version),1)]),_:1})])]),default:t(()=>[a(x,{column:3,border:""},{default:t(()=>[a(y,{label:"æœåŠ¡å™¨åç§°"},{default:t(()=>[a(i,{tag:"b"},{default:t(()=>[u(g(B.value.serverName),1)]),_:1})]),_:1}),a(y,{label:"ç‰ˆæœ¬"},{default:t(()=>[u(g(B.value.version),1)]),_:1}),a(y,{label:"æ“ä½œç³»ç»Ÿ"},{default:t(()=>[u(g(B.value.operatingSystem),1)]),_:1}),a(y,{label:"æœ¬åœ°åœ°å€"},{default:t(()=>[a(z,{href:`http://${B.value.localAddress}`,target:"_blank",type:"primary"},{default:t(()=>[u(g(B.value.localAddress),1)]),_:1},8,["href"])]),_:1}),a(y,{label:"å¤–ç½‘åœ°å€"},{default:t(()=>[B.value.wanAddress?(o(),f(z,{key:0,href:`http://${B.value.wanAddress}`,target:"_blank",type:"primary"},{default:t(()=>[u(g(B.value.wanAddress),1)]),_:1},8,["href"])):(o(),h("span",kl,"-"))]),_:1}),a(y,{label:"æœåŠ¡å™¨ID"},{default:t(()=>[a(i,{type:"info",size:"small"},{default:t(()=>[u(g(B.value.id),1)]),_:1})]),_:1})]),_:1})]),_:1})):M("",!0),!B.value&&!H.value?(o(),f(L,{key:1,title:"è¯·å…ˆé…ç½® Emby æœåŠ¡å™¨",type:"warning",closable:!1,"show-icon":"",class:"config-alert"},{default:t(()=>[...e[16]||(e[16]=[b("div",null,[b("p",null,[u("è¯·åœ¨åç«¯é…ç½®æ–‡ä»¶ "),b("code",null,"application.yml"),u(" ä¸­é…ç½® Emby æœåŠ¡å™¨ä¿¡æ¯ï¼š")]),b("pre",{class:"config-example"},`app:
  emby:
    server-url: http://your-emby-server:8096
    api-key: your-api-key-here
    enabled: true`),b("p",null,'é…ç½®å®Œæˆåï¼Œç‚¹å‡»"æµ‹è¯•è¿æ¥"æŒ‰é’®éªŒè¯é…ç½®ã€‚')],-1)])]),_:1})):M("",!0),B.value&&!le.value&&!j.value?(o(),f(L,{key:2,title:"âš ï¸ é¦–æ¬¡ä½¿ç”¨éœ€è¦åŒæ­¥æ•°æ®",type:"error",closable:!1,"show-icon":"",class:"sync-alert"},{default:t(()=>[b("div",null,[e[18]||(e[18]=b("p",null,[b("strong",null,'æ•°æ®åº“ä¸­æš‚æ— æ•°æ®ï¼Œè¯·å…ˆç‚¹å‡»"åŒæ­¥æ‰€æœ‰æ•°æ®"æŒ‰é’®ï¼')],-1)),e[19]||(e[19]=b("p",null,"åŒæ­¥è¿‡ç¨‹ä¼šä» Emby æœåŠ¡å™¨è·å–æ‰€æœ‰åª’ä½“åº“ã€åª’ä½“é¡¹ã€ç±»å‹ã€æ ‡ç­¾ã€å·¥ä½œå®¤ç­‰æ•°æ®å¹¶ä¿å­˜åˆ°æ•°æ®åº“ã€‚",-1)),e[20]||(e[20]=b("p",null,"æ ¹æ®åª’ä½“åº“å¤§å°ï¼ŒåŒæ­¥å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿåˆ°å‡ ååˆ†é’Ÿï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚",-1)),a(m,{type:"danger",size:"large",onClick:Ue,loading:j.value,style:{"margin-top":"10px"}},{default:t(()=>[a(r,null,{default:t(()=>[a(p)]),_:1}),e[17]||(e[17]=u(" ç«‹å³åŒæ­¥æ‰€æœ‰æ•°æ® ",-1))]),_:1},8,["loading"])])]),_:1})):M("",!0),a(v,{class:"library-card"},{header:t(()=>[b("div",wl,[b("span",null,"åª’ä½“åº“åˆ—è¡¨ ("+g(Q.value.length)+")",1),a(m,{type:"primary",size:"small",onClick:ie},{default:t(()=>[a(r,null,{default:t(()=>[a(p)]),_:1}),e[21]||(e[21]=u(" åˆ·æ–° ",-1))]),_:1})])]),default:t(()=>[!fe.value&&Q.value.length===0?(o(),f(A,{key:0,description:"æš‚æ— åª’ä½“åº“æ•°æ®"},{default:t(()=>[a(m,{type:"primary",onClick:ie},{default:t(()=>[...e[22]||(e[22]=[u("åˆ·æ–°æ•°æ®",-1)])]),_:1})]),_:1})):de((o(),f(Be,{key:1,data:Q.value,border:"",stripe:""},{default:t(()=>[a(I,{type:"index",label:"#",width:"60",align:"center"}),a(I,{prop:"name",label:"åç§°","min-width":"150"},{default:t(({row:n})=>[b("div",Cl,[n.collectionType==="movies"?(o(),f(r,{key:0,color:"#34c759"},{default:t(()=>[a(E)]),_:1})):n.collectionType==="tvshows"?(o(),f(r,{key:1,color:"#007aff"},{default:t(()=>[a(Pe)]),_:1})):n.collectionType==="music"?(o(),f(r,{key:2,color:"#ff9500"},{default:t(()=>[a(He)]),_:1})):(o(),f(r,{key:3,color:"#86868b"},{default:t(()=>[a(Rt)]),_:1})),b("span",null,g(n.name),1)])]),_:1}),a(I,{prop:"collectionType",label:"ç±»å‹",width:"120"},{default:t(({row:n})=>[n.collectionType==="movies"?(o(),f(s,{key:0,type:"success"},{default:t(()=>[...e[23]||(e[23]=[u("ç”µå½±",-1)])]),_:1})):n.collectionType==="tvshows"?(o(),f(s,{key:1,type:"primary"},{default:t(()=>[...e[24]||(e[24]=[u("ç”µè§†å‰§",-1)])]),_:1})):n.collectionType==="music"?(o(),f(s,{key:2,type:"warning"},{default:t(()=>[...e[25]||(e[25]=[u("éŸ³ä¹",-1)])]),_:1})):(o(),f(s,{key:3},{default:t(()=>[u(g(n.collectionType||"å…¶ä»–"),1)]),_:2},1024))]),_:1}),a(I,{prop:"itemCount",label:"åª’ä½“é¡¹æ•°é‡",width:"120",align:"center"},{default:t(({row:n})=>[n.itemCount!==void 0&&n.itemCount!==null?(o(),f(i,{key:0,type:"primary",tag:"b"},{default:t(()=>[u(g(n.itemCount),1)]),_:2},1024)):(o(),f(i,{key:1,type:"info",size:"small"},{default:t(()=>[...e[26]||(e[26]=[u("ç‚¹å‡»æŸ¥çœ‹",-1)])]),_:1}))]),_:1}),a(I,{prop:"locations",label:"è·¯å¾„","min-width":"300"},{default:t(({row:n})=>[n.locations&&n.locations.length>0?(o(),h("div",Tl,[(o(!0),h(D,null,V(n.locations,(S,N)=>(o(),h("div",{key:N,class:"path-item"},[a(r,null,{default:t(()=>[a(Ft)]),_:1}),u(" "+g(S),1)]))),128))])):(o(),h("span",Il,"-"))]),_:1}),a(I,{label:"æ“ä½œ",width:"200",fixed:"right"},{default:t(({row:n})=>[a(m,{type:"primary",size:"small",onClick:S=>dt(n)},{default:t(()=>[a(r,null,{default:t(()=>[a(Oe)]),_:1}),e[27]||(e[27]=u(" æŸ¥çœ‹åª’ä½“é¡¹ ",-1))]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[ce,fe.value]])]),_:1}),a(Dt,{gutter:20,class:"category-row"},{default:t(()=>[a(Re,{span:8},{default:t(()=>[a(v,null,{header:t(()=>[b("div",$l,[b("span",null,"ç±»å‹ ("+g(ae.value.length)+")",1),a(m,{type:"text",size:"small",onClick:be},{default:t(()=>[...e[28]||(e[28]=[u("åˆ·æ–°",-1)])]),_:1})])]),default:t(()=>[de((o(),h("div",Sl,[!pe.value&&ae.value.length===0?(o(),f(A,{key:0,description:"æš‚æ— æ•°æ®","image-size":60})):(o(!0),h(D,{key:1},V(ae.value,n=>(o(),f(s,{key:n.id,class:"category-tag"},{default:t(()=>[u(g(n.name)+" ",1),n.itemCount?(o(),h("span",xl,"("+g(n.itemCount)+")",1)):M("",!0)]),_:2},1024))),128))])),[[ce,pe.value]])]),_:1})]),_:1}),a(Re,{span:8},{default:t(()=>[a(v,null,{header:t(()=>[b("div",zl,[b("span",null,"æ ‡ç­¾ ("+g(ne.value.length)+")",1),a(m,{type:"text",size:"small",onClick:ke},{default:t(()=>[...e[29]||(e[29]=[u("åˆ·æ–°",-1)])]),_:1})])]),default:t(()=>[de((o(),h("div",Ml,[!ge.value&&ne.value.length===0?(o(),f(A,{key:0,description:"æš‚æ— æ•°æ®","image-size":60})):(o(!0),h(D,{key:1},V(ne.value,n=>(o(),f(s,{key:n.id,type:"success",class:"category-tag"},{default:t(()=>[u(g(n.name)+" ",1),n.itemCount?(o(),h("span",Ll,"("+g(n.itemCount)+")",1)):M("",!0)]),_:2},1024))),128))])),[[ce,ge.value]])]),_:1})]),_:1}),a(Re,{span:8},{default:t(()=>[a(v,null,{header:t(()=>[b("div",Al,[b("span",null,"å·¥ä½œå®¤ ("+g(se.value.length)+")",1),a(m,{type:"text",size:"small",onClick:we},{default:t(()=>[...e[30]||(e[30]=[u("åˆ·æ–°",-1)])]),_:1})])]),default:t(()=>[de((o(),h("div",Bl,[!me.value&&se.value.length===0?(o(),f(A,{key:0,description:"æš‚æ— æ•°æ®","image-size":60})):(o(!0),h(D,{key:1},V(se.value,n=>(o(),f(s,{key:n.id,type:"warning",class:"category-tag"},{default:t(()=>[u(g(n.name)+" ",1),n.itemCount?(o(),h("span",Rl,"("+g(n.itemCount)+")",1)):M("",!0)]),_:2},1024))),128))])),[[ce,me.value]])]),_:1})]),_:1})]),_:1}),a(Ce,{modelValue:Se.value,"onUpdate:modelValue":e[3]||(e[3]=n=>Se.value=n),title:`${(lt=Y.value)==null?void 0:lt.name} - åª’ä½“é¡¹åˆ—è¡¨`,width:"90%",top:"5vh"},{default:t(()=>[b("div",Fl,[b("div",Dl,[a(Ge,{modelValue:ye.value,"onUpdate:modelValue":e[0]||(e[0]=n=>ye.value=n),placeholder:"æœç´¢åª’ä½“é¡¹...",style:{width:"300px"},clearable:"",onClear:ee},{append:t(()=>[a(m,{onClick:mt},{default:t(()=>[a(r,null,{default:t(()=>[a(We)]),_:1})]),_:1})]),_:1},8,["modelValue"]),b("div",null,[b("span",Vl,"å…± "+g($e.value)+" é¡¹",1)])]),!X.value&&O.value.length===0?(o(),f(A,{key:0,description:"æš‚æ— åª’ä½“é¡¹æ•°æ®"},{default:t(()=>[a(m,{type:"primary",onClick:ee},{default:t(()=>[...e[31]||(e[31]=[u("åˆ·æ–°æ•°æ®",-1)])]),_:1})]),_:1})):de((o(),f(Be,{key:1,data:O.value,border:"",stripe:"","max-height":"600"},{default:t(()=>[a(I,{type:"index",label:"#",width:"60",align:"center",index:n=>(J.value-1)*Z.value+n+1},null,8,["index"]),a(I,{prop:"name",label:"åç§°","min-width":"200","show-overflow-tooltip":""},{default:t(({row:n})=>[b("div",El,[n.type==="Movie"?(o(),f(r,{key:0,color:"#34c759"},{default:t(()=>[a(E)]),_:1})):n.type==="Series"?(o(),f(r,{key:1,color:"#007aff"},{default:t(()=>[a(Pe)]),_:1})):n.type==="Episode"?(o(),f(r,{key:2,color:"#007aff"},{default:t(()=>[a(Vt)]),_:1})):n.type==="Audio"?(o(),f(r,{key:3,color:"#ff9500"},{default:t(()=>[a(He)]),_:1})):(o(),f(r,{key:4,color:"#86868b"},{default:t(()=>[a(Qe)]),_:1})),b("span",null,g(n.name),1),re.value[n.id]?(o(),f(s,{key:5,type:"success",size:"small",effect:"dark",style:{"margin-left":"8px"}},{default:t(()=>[a(r,null,{default:t(()=>[a(Et)]),_:1}),e[32]||(e[32]=u(" å·²è½¬å­˜ ",-1))]),_:1})):M("",!0)])]),_:1}),a(I,{prop:"type",label:"ç±»å‹",width:"100"},{default:t(({row:n})=>[a(s,{size:"small"},{default:t(()=>[u(g(n.type),1)]),_:2},1024)]),_:1}),a(I,{prop:"productionYear",label:"å¹´ä»½",width:"80",align:"center"},{default:t(({row:n})=>[u(g(n.productionYear||"-"),1)]),_:1}),a(I,{prop:"communityRating",label:"è¯„åˆ†",width:"100",align:"center"},{default:t(({row:n})=>[n.communityRating?(o(),f(Fe,{key:0,"model-value":n.communityRating/2,disabled:"","show-score":"","score-template":n.communityRating.toFixed(1),size:"small"},null,8,["model-value","score-template"])):(o(),h("span",Nl,"-"))]),_:1}),a(I,{prop:"genres",label:"ç±»å‹",width:"180"},{default:t(({row:n})=>{var S,N;return[(o(!0),h(D,null,V((S=n.genres)==null?void 0:S.slice(0,2),(Wt,Gt)=>(o(),f(s,{key:Gt,size:"small",class:"genre-tag"},{default:t(()=>[u(g(Wt),1)]),_:2},1024))),128)),((N=n.genres)==null?void 0:N.length)>2?(o(),f(s,{key:0,size:"small",type:"info"},{default:t(()=>[u(" +"+g(n.genres.length-2),1)]),_:2},1024)):M("",!0)]}),_:1}),a(I,{prop:"size",label:"å¤§å°",width:"120",align:"right"},{default:t(({row:n})=>[n.size?(o(),f(i,{key:0,type:"primary"},{default:t(()=>[u(g(Le(n.size)),1)]),_:2},1024)):(o(),h("span",Ul,"-"))]),_:1}),a(I,{prop:"path",label:"è·¯å¾„","min-width":"300","show-overflow-tooltip":""},{default:t(({row:n})=>[n.path?(o(),f(De,{key:0,content:n.path,placement:"top"},{default:t(()=>[a(i,{type:"info",size:"small"},{default:t(()=>[u(g(n.path),1)]),_:2},1024)]),_:2},1032,["content"])):(o(),h("span",Yl,"-"))]),_:1}),a(I,{label:"æ“ä½œ",width:"280",fixed:"right"},{default:t(({row:n})=>[a(m,{type:"primary",link:"",size:"small",onClick:S=>yt(n)},{default:t(()=>[a(r,null,{default:t(()=>[a(Oe)]),_:1}),e[33]||(e[33]=u(" è¯¦æƒ… ",-1))]),_:1},8,["onClick"]),n.type==="Movie"||n.type==="Series"?(o(),f(m,{key:0,type:"success",link:"",size:"small",onClick:S=>bt(n)},{default:t(()=>[a(r,null,{default:t(()=>[a(Je)]),_:1}),e[34]||(e[34]=u(" æœç´¢ä¸‹è½½ ",-1))]),_:1},8,["onClick"])):M("",!0),(n.type==="Movie"||n.type==="Series")&&re.value[n.id]?(o(),f(m,{key:1,type:"info",link:"",size:"small",onClick:S=>vt(n)},{default:t(()=>[a(r,null,{default:t(()=>[a(Qe)]),_:1}),e[35]||(e[35]=u(" è½¬å­˜è®°å½• ",-1))]),_:1},8,["onClick"])):M("",!0)]),_:1})]),_:1},8,["data"])),[[ce,X.value]]),b("div",Kl,[a(Nt,{"current-page":J.value,"onUpdate:currentPage":e[1]||(e[1]=n=>J.value=n),"page-size":Z.value,"onUpdate:pageSize":e[2]||(e[2]=n=>Z.value=n),"page-sizes":[20,50,100,200],total:$e.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:gt,onCurrentChange:pt},null,8,["current-page","page-size","total"])])])]),_:1},8,["modelValue","title"]),a(Ce,{modelValue:W.value,"onUpdate:modelValue":e[7]||(e[7]=n=>W.value=n),title:((at=$.value)==null?void 0:at.type)==="Series"?"æœç´¢å¹¶ä¸‹è½½ç”µè§†å‰§":"æœç´¢å¹¶ä¸‹è½½ç”µå½±",width:"800px","close-on-click-modal":!1},{default:t(()=>[$.value?(o(),h("div",jl,[a(x,{column:1,border:""},{default:t(()=>[a(y,{label:"ç”µå½±åç§°"},{default:t(()=>[a(i,{tag:"b"},{default:t(()=>[u(g($.value.name),1)]),_:1})]),_:1}),$.value.originalTitle?(o(),f(y,{key:0,label:"åŸå§‹åç§°"},{default:t(()=>[u(g($.value.originalTitle),1)]),_:1})):M("",!0),$.value.productionYear?(o(),f(y,{key:1,label:"å¹´ä»½"},{default:t(()=>[u(g($.value.productionYear),1)]),_:1})):M("",!0),$.value.communityRating?(o(),f(y,{key:2,label:"è¯„åˆ†"},{default:t(()=>[a(Fe,{"model-value":$.value.communityRating/2,disabled:"","show-score":"","score-template":$.value.communityRating.toFixed(1),size:"small"},null,8,["model-value","score-template"])]),_:1})):M("",!0)]),_:1}),a(qe),a(Ut,{"label-width":"100px"},{default:t(()=>[a(Xe,{label:"æœç´¢å…³é”®è¯"},{default:t(()=>[a(Ge,{modelValue:G.value,"onUpdate:modelValue":e[4]||(e[4]=n=>G.value=n),placeholder:"è‡ªåŠ¨å¡«å……ç”µå½±åç§°ï¼Œå¯ä¿®æ”¹",clearable:"",onKeyup:Xt(ue,["enter"])},{append:t(()=>[a(m,{onClick:ue,loading:_e.value},{default:t(()=>[a(r,null,{default:t(()=>[a(We)]),_:1}),e[36]||(e[36]=u(" æœç´¢ ",-1))]),_:1},8,["loading"])]),_:1},8,["modelValue"])]),_:1}),a(Xe,{label:"æ™ºèƒ½ç­›é€‰"},{default:t(()=>[a(Ze,{modelValue:he.value,"onUpdate:modelValue":e[5]||(e[5]=n=>he.value=n),label:"éªŒè¯é“¾æ¥æœ‰æ•ˆæ€§"},null,8,["modelValue"]),a(Ze,{modelValue:oe.value,"onUpdate:modelValue":e[6]||(e[6]=n=>oe.value=n),label:"ä½¿ç”¨AIæ™ºèƒ½æ¨è",style:{"margin-left":"16px"}},null,8,["modelValue"])]),_:1}),a(L,{title:"äº‘ç›˜é…ç½®è¯´æ˜",type:"info",closable:!1,style:{"margin-bottom":"16px"}},{default:t(()=>[b("div",Pl,[e[39]||(e[39]=b("p",null,[u("ç³»ç»Ÿä¼šæ ¹æ®æœç´¢ç»“æœçš„ "),b("code",null,"cloudType"),u(" è‡ªåŠ¨åŒ¹é…å¯¹åº”çš„äº‘ç›˜é…ç½®ã€‚")],-1)),b("p",Hl,[e[37]||(e[37]=u(" å·²é…ç½® ",-1)),b("strong",null,g(U.value.length),1),e[38]||(e[38]=u(" ä¸ªäº‘ç›˜ï¼š ",-1)),(o(!0),h(D,null,V(U.value,(n,S)=>(o(),f(s,{key:S,size:"small",style:{"margin-left":"4px"}},{default:t(()=>[u(g(n.cloudType),1)]),_:2},1024))),128))]),e[40]||(e[40]=b("p",{style:{"margin-top":"4px",color:"#909399"}},' å¦‚éœ€æ·»åŠ æˆ–ä¿®æ”¹äº‘ç›˜é…ç½®ï¼Œè¯·å‰å¾€"æ™ºèƒ½æœç´¢é…ç½®"é¡µé¢ ',-1))])]),_:1})]),_:1}),K.value&&K.value.length>0?(o(),h("div",Ol,[a(L,{title:`æ‰¾åˆ° ${K.value.length} ä¸ªç»“æœ`,type:"success",closable:!1,"show-icon":"",style:{"margin-bottom":"16px"}},{default:t(()=>[rt.value?(o(),h("div",Wl,[a(r,{class:"is-loading"},{default:t(()=>[a(et)]),_:1}),e[41]||(e[41]=u(" æ­£åœ¨éªŒè¯é“¾æ¥æœ‰æ•ˆæ€§... ",-1))])):Me.value?(o(),h("div",Gl,[a(r,{class:"is-loading"},{default:t(()=>[a(et)]),_:1}),e[42]||(e[42]=u(" AIæ­£åœ¨æ™ºèƒ½ç­›é€‰æœ€ä½³èµ„æº... ",-1))])):(o(),h("div",Ql," å·²å®Œæˆæ™ºèƒ½ç­›é€‰å’Œæ’åº "))]),_:1},8,["title"]),a(Be,{data:K.value,style:{width:"100%"},"max-height":"400","highlight-current-row":"",onCurrentChange:zt},{default:t(()=>[a(I,{type:"index",label:"#",width:"50"}),a(I,{label:"çŠ¶æ€",width:"80"},{default:t(({row:n})=>[a(De,{content:n.validationMessage||"æœªéªŒè¯",placement:"top"},{default:t(()=>[b("div",null,[n.isValid===!0?(o(),f(r,{key:0,color:"#67c23a",size:20},{default:t(()=>[a(c)]),_:1})):n.isValid===!1?(o(),f(r,{key:1,color:"#f56c6c",size:20},{default:t(()=>[a(Yt)]),_:1})):(o(),f(r,{key:2,color:"#909399",size:20},{default:t(()=>[a(Kt)]),_:1}))])]),_:2},1032,["content"])]),_:1}),a(I,{label:"åŒ¹é…åº¦",width:"100",sortable:"","sort-method":(n,S)=>S.matchScore-n.matchScore},{default:t(({row:n})=>{var S;return[a(tt,{percentage:Math.min(Math.round(n.matchScore),100),color:n.matchScore>=80?"#67c23a":n.matchScore>=60?"#e6a23c":"#909399","stroke-width":8},null,8,["percentage","color"]),a(De,{content:(S=n.matchReasons)==null?void 0:S.join(`
`),placement:"top"},{default:t(()=>[a(i,{size:"small",type:"info",style:{cursor:"help"}},{default:t(()=>[u(g(Math.round(n.matchScore))+"åˆ† ",1)]),_:2},1024)]),_:2},1032,["content"])]}),_:1},8,["sort-method"]),a(I,{prop:"title",label:"æ ‡é¢˜","min-width":"250","show-overflow-tooltip":""},{default:t(({row:n})=>[b("div",Jl,[n.image?(o(),f(jt,{key:0,src:n.image,style:{width:"40px",height:"40px","border-radius":"4px"},fit:"cover"},null,8,["src"])):M("",!0),b("div",null,[b("div",null,g(n.title),1),b("div",ql,[n.aiRecommended?(o(),f(s,{key:0,size:"small",type:"danger",effect:"dark"},{default:t(()=>[a(r,null,{default:t(()=>[a(Pt)]),_:1}),e[43]||(e[43]=u(" AIæ¨è ",-1))]),_:1})):n.matchScore>=80?(o(),f(s,{key:1,size:"small",type:"success",effect:"dark"},{default:t(()=>[...e[44]||(e[44]=[u(" æ¨è ",-1)])]),_:1})):M("",!0),n.hasFiles?(o(),f(s,{key:2,size:"small",type:"info",style:{"margin-left":"4px"}},{default:t(()=>[u(g(n.fileCount)+"ä¸ªæ–‡ä»¶ ",1)]),_:2},1024)):M("",!0)])])])]),_:1}),a(I,{prop:"size",label:"å¤§å°",width:"120"},{default:t(({row:n})=>[a(i,{type:"primary"},{default:t(()=>[u(g(n.size||"-"),1)]),_:2},1024)]),_:1}),a(I,{prop:"resolution",label:"åˆ†è¾¨ç‡",width:"100"},{default:t(({row:n})=>[n.resolution?(o(),f(s,{key:0,size:"small",type:"success"},{default:t(()=>[u(g(n.resolution),1)]),_:2},1024)):(o(),h("span",Xl,"-"))]),_:1}),a(I,{prop:"tags",label:"æ ‡ç­¾",width:"150"},{default:t(({row:n})=>[(o(!0),h(D,null,V(n.tags.slice(0,2),(S,N)=>(o(),f(s,{key:N,size:"small",style:{"margin-right":"4px"}},{default:t(()=>[u(g(S),1)]),_:2},1024))),128)),n.tags.length>2?(o(),f(s,{key:0,size:"small",type:"info"},{default:t(()=>[u(" +"+g(n.tags.length-2),1)]),_:2},1024)):M("",!0)]),_:1}),a(I,{prop:"channelName",label:"æ¥æº",width:"100"},{default:t(({row:n})=>[a(i,{size:"small",type:"info"},{default:t(()=>[u(g(n.channelName||"-"),1)]),_:2},1024)]),_:1}),a(I,{label:"æ“ä½œ",width:"120",fixed:"right"},{default:t(({row:n})=>{var S;return[a(m,{type:"primary",size:"small",onClick:N=>At(n),loading:q.value&&((S=P.value)==null?void 0:S.id)===n.id},{default:t(()=>[a(r,null,{default:t(()=>[a(Je)]),_:1}),e[45]||(e[45]=u(" è½¬å­˜ ",-1))]),_:1},8,["onClick","loading"])]}),_:1})]),_:1},8,["data"])])):M("",!0),K.value&&K.value.length===0&&!_e.value?(o(),f(A,{key:1,description:"æœªæ‰¾åˆ°æœç´¢ç»“æœ","image-size":100})):M("",!0),P.value?(o(),h("div",Zl,[a(qe,{"content-position":"left"},{default:t(()=>[...e[46]||(e[46]=[u("é€‰ä¸­çš„èµ„æº",-1)])]),_:1}),a(v,{class:"result-preview",shadow:"never"},{default:t(()=>[b("pre",ea,g(Bt(P.value)),1)]),_:1})])):M("",!0)])):M("",!0)]),_:1},8,["modelValue","title"]),a(Ce,{modelValue:xe.value,"onUpdate:modelValue":e[8]||(e[8]=n=>xe.value=n),title:(nt=T.value)==null?void 0:nt.name,width:"70%"},{default:t(()=>[T.value?(o(),f(x,{key:0,column:2,border:""},{default:t(()=>[a(y,{label:"ID"},{default:t(()=>[a(i,{type:"info",size:"small"},{default:t(()=>[u(g(T.value.id),1)]),_:1})]),_:1}),a(y,{label:"ç±»å‹"},{default:t(()=>[a(s,null,{default:t(()=>[u(g(T.value.type),1)]),_:1})]),_:1}),a(y,{label:"åŸå§‹åç§°"},{default:t(()=>[u(g(T.value.originalTitle||"-"),1)]),_:1}),a(y,{label:"å¹´ä»½"},{default:t(()=>[T.value.productionYear?(o(),f(s,{key:0,type:"info"},{default:t(()=>[u(g(T.value.productionYear),1)]),_:1})):(o(),h("span",ta,"-"))]),_:1}),a(y,{label:"è¯„åˆ†"},{default:t(()=>[T.value.communityRating?(o(),f(Fe,{key:0,"model-value":T.value.communityRating/2,disabled:"","show-score":"","score-template":T.value.communityRating.toFixed(1)},null,8,["model-value","score-template"])):(o(),h("span",la,"-"))]),_:1}),a(y,{label:"åˆ†çº§"},{default:t(()=>[T.value.officialRating?(o(),f(s,{key:0,type:"warning"},{default:t(()=>[u(g(T.value.officialRating),1)]),_:1})):(o(),h("span",aa,"-"))]),_:1}),a(y,{label:"æ–‡ä»¶å¤§å°"},{default:t(()=>[T.value.size?(o(),f(i,{key:0,type:"primary",tag:"b"},{default:t(()=>[u(g(Le(T.value.size)),1)]),_:1})):(o(),h("span",na,"-"))]),_:1}),a(y,{label:"æ’­æ”¾æ¬¡æ•°"},{default:t(()=>[a(s,{type:"success"},{default:t(()=>[u(g(T.value.playCount||0)+" æ¬¡",1)]),_:1})]),_:1}),a(y,{label:"ç±»å‹",span:2},{default:t(()=>[T.value.genres&&T.value.genres.length>0?(o(),h("div",sa,[(o(!0),h(D,null,V(T.value.genres,(n,S)=>(o(),f(s,{key:S,class:"detail-tag"},{default:t(()=>[u(g(n),1)]),_:2},1024))),128))])):(o(),h("span",oa,"-"))]),_:1}),a(y,{label:"æ ‡ç­¾",span:2},{default:t(()=>[T.value.tags&&T.value.tags.length>0?(o(),h("div",ra,[(o(!0),h(D,null,V(T.value.tags,(n,S)=>(o(),f(s,{key:S,type:"success",class:"detail-tag"},{default:t(()=>[u(g(n),1)]),_:2},1024))),128))])):(o(),h("span",ia,"-"))]),_:1}),a(y,{label:"å·¥ä½œå®¤",span:2},{default:t(()=>[T.value.studios&&T.value.studios.length>0?(o(),h("div",ua,[(o(!0),h(D,null,V(T.value.studios,(n,S)=>(o(),f(s,{key:S,type:"warning",class:"detail-tag"},{default:t(()=>[u(g(n),1)]),_:2},1024))),128))])):(o(),h("span",ca,"-"))]),_:1}),a(y,{label:"æ¼”å‘˜",span:2},{default:t(()=>{var n;return[T.value.people&&T.value.people.length>0?(o(),h("div",da,[(o(!0),h(D,null,V((n=T.value.people)==null?void 0:n.slice(0,10),(S,N)=>(o(),f(s,{key:N,type:"info",class:"detail-tag"},{default:t(()=>[u(g(S),1)]),_:2},1024))),128)),T.value.people.length>10?(o(),f(s,{key:0,type:"info"},{default:t(()=>[u(" +"+g(T.value.people.length-10),1)]),_:1})):M("",!0)])):(o(),h("span",fa,"-"))]}),_:1}),a(y,{label:"ç®€ä»‹",span:2},{default:t(()=>[T.value.overview?(o(),f(i,{key:0,class:"overview-text"},{default:t(()=>[u(g(T.value.overview),1)]),_:1})):(o(),h("span",pa,"-"))]),_:1}),a(y,{label:"æ–‡ä»¶è·¯å¾„",span:2},{default:t(()=>[T.value.path?(o(),f(i,{key:0,type:"info",size:"small"},{default:t(()=>[u(g(T.value.path),1)]),_:1})):(o(),h("span",ga,"-"))]),_:1}),T.value.mediaSources&&T.value.mediaSources.length>0?(o(),f(y,{key:0,label:"åª’ä½“æº",span:2},{default:t(()=>[(o(!0),h(D,null,V(T.value.mediaSources,(n,S)=>(o(),h("div",{key:S,class:"media-source"},[a(s,{type:"primary"},{default:t(()=>{var N;return[u(g((N=n.container)==null?void 0:N.toUpperCase()),1)]}),_:2},1024),a(i,{type:"info",size:"small"},{default:t(()=>[u(g(Le(n.size)),1)]),_:2},1024),a(i,{type:"info",size:"small"},{default:t(()=>[u(g(ht(n.bitrate)),1)]),_:2},1024)]))),128))]),_:1})):M("",!0)]),_:1})):M("",!0)]),_:1},8,["modelValue","title"]),a(Ce,{modelValue:ze.value,"onUpdate:modelValue":e[9]||(e[9]=n=>ze.value=n),title:"è½¬å­˜å†å²è®°å½•",width:"800px"},{default:t(()=>[!ve.value||ve.value.length===0?(o(),f(A,{key:0,description:"æš‚æ— è½¬å­˜è®°å½•"})):(o(),f(Ot,{key:1},{default:t(()=>[(o(!0),h(D,null,V(ve.value,(n,S)=>(o(),f(Ht,{key:S,timestamp:n.createTime,placement:"top",type:n.transferStatus==="success"?"success":"danger",icon:n.transferStatus==="success"?"CircleCheck":"CircleClose"},{default:t(()=>[a(v,{shadow:"hover"},{header:t(()=>[b("div",ma,[b("span",ya,g(n.resourceTitle),1),a(s,{type:n.transferStatus==="success"?"success":"danger",size:"small"},{default:t(()=>[u(g(n.transferStatus==="success"?"è½¬å­˜æˆåŠŸ":"è½¬å­˜å¤±è´¥"),1)]),_:2},1032,["type"])])]),default:t(()=>[a(x,{column:2,size:"small",border:""},{default:t(()=>[a(y,{label:"åŒ¹é…åˆ†æ•°"},{default:t(()=>[n.matchScore?(o(),f(tt,{key:0,percentage:Math.min(Math.round(n.matchScore),100),color:n.matchScore>=80?"#67c23a":n.matchScore>=60?"#e6a23c":"#909399","stroke-width":6,"show-text":!1,style:{width:"100px",display:"inline-block","margin-right":"8px"}},null,8,["percentage","color"])):M("",!0),b("span",null,g(n.matchScore?Math.round(n.matchScore)+"åˆ†":"-"),1)]),_:2},1024),a(y,{label:"äº‘ç›˜"},{default:t(()=>[u(g(n.cloudName||"-"),1)]),_:2},1024),a(y,{label:"äº‘ç›˜ç±»å‹"},{default:t(()=>[a(s,{size:"small"},{default:t(()=>[u(g(n.cloudType||"-"),1)]),_:2},1024)]),_:2},1024),a(y,{label:"è½¬å­˜æ—¶é—´"},{default:t(()=>[u(g(n.createTime),1)]),_:2},1024),a(y,{label:"ç»“æœæ¶ˆæ¯",span:2},{default:t(()=>[a(i,{type:n.transferStatus==="success"?"success":"danger"},{default:t(()=>[u(g(n.transferMessage||"-"),1)]),_:2},1032,["type"])]),_:2},1024),a(y,{label:"èµ„æºé“¾æ¥",span:2},{default:t(()=>[a(z,{href:n.resourceUrl,target:"_blank",type:"primary",underline:!1,style:{"font-size":"12px"}},{default:t(()=>[u(g(n.resourceUrl),1)]),_:2},1032,["href"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["timestamp","type","icon"]))),128))]),_:1}))]),_:1},8,["modelValue"])])}}},Ca=Qt(va,[["__scopeId","data-v-483f8a38"]]);export{Ca as default};
