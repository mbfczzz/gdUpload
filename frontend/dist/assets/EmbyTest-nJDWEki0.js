import{a as x}from"./index-B9ygI19o.js";import{_ as $,a as g,c as b,b as _,d as l,w as s,y as I,e as u,j as d,f as k,t as N,E as f}from"./index-DS01B9Je.js";const T={class:"test-container"},K={key:0,class:"result-container"},B={key:0,class:"result-data"},S={key:1,class:"result-error"},U={__name:"EmbyTest",setup(j){const y=g("http://localhost:8096"),c=g(""),o=g(!1),t=g(null),A=async()=>{if(!y.value||!c.value){f.warning("请输入服务器地址和 API Key");return}o.value=!0,t.value=null;try{const i=await x.get(`${y.value}/emby/System/Info`,{headers:{"X-Emby-Token":c.value}});t.value={success:!0,data:i.data},f.success("API 测试成功")}catch(i){t.value={success:!1,error:i.message},f.error("API 测试失败: "+i.message)}finally{o.value=!1}},m=async i=>{var e,v,p,r;o.value=!0,t.value=null;try{let a="";switch(i){case"serverInfo":a="/api/emby/server-info";break;case"libraries":a="/api/emby/libraries";break;case"genres":a="/api/emby/genres";break;case"tags":a="/api/emby/tags";break;case"studios":a="/api/emby/studios";break}const w=await x.get(a);t.value={success:!0,data:w.data},f.success("测试成功")}catch(a){t.value={success:!1,error:((v=(e=a.response)==null?void 0:e.data)==null?void 0:v.message)||a.message},f.error("测试失败: "+(((r=(p=a.response)==null?void 0:p.data)==null?void 0:r.message)||a.message))}finally{o.value=!1}},E=()=>{t.value=null};return(i,e)=>{const v=u("el-input"),p=u("el-form-item"),r=u("el-button"),a=u("el-form"),w=u("el-divider"),C=u("el-alert"),V=u("el-card"),P=u("el-space");return _(),b("div",T,[l(V,null,{header:s(()=>[...e[7]||(e[7]=[k("h3",null,"Emby API 测试工具",-1)])]),default:s(()=>[l(a,{"label-width":"120px"},{default:s(()=>[l(p,{label:"服务器地址"},{default:s(()=>[l(v,{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=n=>y.value=n),placeholder:"http://your-emby-server:8096"},null,8,["modelValue"])]),_:1}),l(p,{label:"API Key"},{default:s(()=>[l(v,{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=n=>c.value=n),type:"password","show-password":"",placeholder:"输入你的 API Key"},null,8,["modelValue"])]),_:1}),l(p,null,{default:s(()=>[l(r,{type:"primary",onClick:A,loading:o.value},{default:s(()=>[...e[8]||(e[8]=[d(" 测试 API ",-1)])]),_:1},8,["loading"]),l(r,{onClick:E},{default:s(()=>[...e[9]||(e[9]=[d("清空结果",-1)])]),_:1})]),_:1})]),_:1}),l(w),t.value?(_(),b("div",K,[e[10]||(e[10]=k("h4",null,"测试结果：",-1)),l(C,{title:t.value.success?"连接成功":"连接失败",type:t.value.success?"success":"error",closable:!1,"show-icon":""},null,8,["title","type"]),t.value.data?(_(),b("div",B,[k("pre",null,N(JSON.stringify(t.value.data,null,2)),1)])):I("",!0),t.value.error?(_(),b("div",S,[l(C,{title:t.value.error,type:"error",closable:!1},null,8,["title"])])):I("",!0)])):I("",!0)]),_:1}),l(V,{style:{"margin-top":"20px"}},{header:s(()=>[...e[11]||(e[11]=[k("h3",null,"快速测试",-1)])]),default:s(()=>[l(P,{wrap:""},{default:s(()=>[l(r,{onClick:e[2]||(e[2]=n=>m("serverInfo")),loading:o.value},{default:s(()=>[...e[12]||(e[12]=[d(" 获取服务器信息 ",-1)])]),_:1},8,["loading"]),l(r,{onClick:e[3]||(e[3]=n=>m("libraries")),loading:o.value},{default:s(()=>[...e[13]||(e[13]=[d(" 获取媒体库列表 ",-1)])]),_:1},8,["loading"]),l(r,{onClick:e[4]||(e[4]=n=>m("genres")),loading:o.value},{default:s(()=>[...e[14]||(e[14]=[d(" 获取类型列表 ",-1)])]),_:1},8,["loading"]),l(r,{onClick:e[5]||(e[5]=n=>m("tags")),loading:o.value},{default:s(()=>[...e[15]||(e[15]=[d(" 获取标签列表 ",-1)])]),_:1},8,["loading"]),l(r,{onClick:e[6]||(e[6]=n=>m("studios")),loading:o.value},{default:s(()=>[...e[16]||(e[16]=[d(" 获取工作室列表 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1})])}}},J=$(U,[["__scopeId","data-v-b22ed8c5"]]);export{J as default};
