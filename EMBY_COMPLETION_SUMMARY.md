# âœ… Emby é›†æˆå®Œæˆæ€»ç»“

## ğŸ“¦ å·²åˆ›å»ºçš„æ–‡ä»¶

### åç«¯æ–‡ä»¶ï¼ˆJava/Spring Bootï¼‰

1. **é…ç½®ç±»**
   - `backend/src/main/java/com/gdupload/config/EmbyProperties.java`
   - é…ç½®å±æ€§ç®¡ç†ç±»

2. **DTO å®ä½“ç±»**
   - `backend/src/main/java/com/gdupload/dto/EmbyItem.java` - åª’ä½“é¡¹
   - `backend/src/main/java/com/gdupload/dto/EmbyLibrary.java` - åª’ä½“åº“
   - `backend/src/main/java/com/gdupload/dto/EmbyGenre.java` - åˆ†ç±»

3. **æœåŠ¡å±‚**
   - `backend/src/main/java/com/gdupload/service/IEmbyService.java` - æ¥å£
   - `backend/src/main/java/com/gdupload/service/impl/EmbyServiceImpl.java` - å®ç°

4. **æ§åˆ¶å™¨**
   - `backend/src/main/java/com/gdupload/controller/EmbyController.java`

5. **é…ç½®æ–‡ä»¶**
   - `backend/src/main/resources/application.yml` - å·²æ›´æ–°

### å‰ç«¯æ–‡ä»¶ï¼ˆVue 3ï¼‰

1. **API å°è£…**
   - `frontend/src/api/emby.js`

2. **é¡µé¢ç»„ä»¶**
   - `frontend/src/views/EmbyManager.vue` - ä¸»ç®¡ç†é¡µé¢
   - `frontend/src/views/EmbyTest.vue` - æµ‹è¯•å·¥å…·é¡µé¢

3. **è·¯ç”±é…ç½®**
   - `frontend/src/router/index.js` - å·²æ›´æ–°
   - `frontend/src/App.vue` - å·²æ›´æ–°ï¼ˆæ·»åŠ èœå•ï¼‰

### æ–‡æ¡£æ–‡ä»¶

1. `EMBY_INTEGRATION_GUIDE.md` - å®Œæ•´é›†æˆæŒ‡å—
2. `EMBY_FRONTEND_GUIDE.md` - å‰ç«¯ä½¿ç”¨æŒ‡å—
3. `EMBY_QUICKSTART.md` - å¿«é€Ÿå¼€å§‹æŒ‡å—

### å¯åŠ¨è„šæœ¬

1. `start.sh` - Linux/Mac å¯åŠ¨è„šæœ¬
2. `start.bat` - Windows å¯åŠ¨è„šæœ¬

## ğŸ¯ å®ç°çš„åŠŸèƒ½

### æ ¸å¿ƒåŠŸèƒ½

âœ… **è¿æ¥æµ‹è¯•**
- æµ‹è¯• Emby æœåŠ¡å™¨è¿æ¥
- éªŒè¯ API Key æœ‰æ•ˆæ€§
- æ˜¾ç¤ºè¿æ¥çŠ¶æ€

âœ… **æœåŠ¡å™¨ä¿¡æ¯**
- æœåŠ¡å™¨åç§°ã€ç‰ˆæœ¬
- æ“ä½œç³»ç»Ÿä¿¡æ¯
- æœ¬åœ°å’Œå¤–ç½‘åœ°å€

âœ… **åª’ä½“åº“ç®¡ç†**
- è·å–æ‰€æœ‰åª’ä½“åº“åˆ—è¡¨
- æ˜¾ç¤ºåª’ä½“åº“ç±»å‹ï¼ˆç”µå½±/ç”µè§†å‰§/éŸ³ä¹ï¼‰
- æ˜¾ç¤ºåª’ä½“é¡¹æ•°é‡
- æ˜¾ç¤ºå­˜å‚¨è·¯å¾„

âœ… **åª’ä½“é¡¹æµè§ˆ**
- æŸ¥çœ‹åª’ä½“åº“ä¸­çš„æ‰€æœ‰åª’ä½“é¡¹
- æ˜¾ç¤ºåª’ä½“é¡¹è¯¦ç»†ä¿¡æ¯
- æ”¯æŒæœç´¢åŠŸèƒ½
- åˆ†é¡µæŸ¥è¯¢æ”¯æŒ

âœ… **åª’ä½“é¡¹è¯¦æƒ…**
- åŸºæœ¬ä¿¡æ¯ï¼ˆåç§°ã€ç±»å‹ã€å¹´ä»½ã€è¯„åˆ†ï¼‰
- åˆ†ç±»ä¿¡æ¯ï¼ˆç±»å‹ã€æ ‡ç­¾ã€å·¥ä½œå®¤ï¼‰
- æ¼”å‘˜åˆ—è¡¨
- ç®€ä»‹å†…å®¹
- æ–‡ä»¶è·¯å¾„å’Œå¤§å°
- åª’ä½“æºä¿¡æ¯

âœ… **åˆ†ç±»æµè§ˆ**
- ç±»å‹ï¼ˆGenresï¼‰åˆ—è¡¨
- æ ‡ç­¾ï¼ˆTagsï¼‰åˆ—è¡¨
- å·¥ä½œå®¤ï¼ˆStudiosï¼‰åˆ—è¡¨
- æ˜¾ç¤ºæ¯ä¸ªåˆ†ç±»çš„é¡¹ç›®æ•°é‡

âœ… **æ•°æ®åŒæ­¥**
- ä¸€é”®åŒæ­¥æ‰€æœ‰åª’ä½“åº“
- ç»Ÿè®¡åª’ä½“åº“å’Œåª’ä½“é¡¹æ•°é‡
- æ˜¾ç¤ºåŒæ­¥ç»“æœ

âœ… **æœç´¢åŠŸèƒ½**
- æŒ‰å…³é”®è¯æœç´¢åª’ä½“é¡¹
- æ”¯æŒå…¨å±€æœç´¢
- æ”¯æŒåª’ä½“åº“å†…æœç´¢

### UI/UX ç‰¹æ€§

âœ… **å“åº”å¼è®¾è®¡**
- æ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯
- è‡ªé€‚åº”ä¸åŒå±å¹•å°ºå¯¸

âœ… **åŠ è½½çŠ¶æ€**
- æ‰€æœ‰æ“ä½œéƒ½æœ‰ loading åŠ¨ç”»
- é˜²æ­¢é‡å¤ç‚¹å‡»

âœ… **ç©ºçŠ¶æ€å¤„ç†**
- å‹å¥½çš„ç©ºæ•°æ®æç¤º
- æä¾›åˆ·æ–°æŒ‰é’®

âœ… **é”™è¯¯å¤„ç†**
- ç½‘ç»œé”™è¯¯è‡ªåŠ¨æç¤º
- API é”™è¯¯è¯¦ç»†ä¿¡æ¯
- é…ç½®é”™è¯¯æŒ‡å¯¼

âœ… **å›¾æ ‡ç³»ç»Ÿ**
- ä¸åŒç±»å‹åª’ä½“ä½¿ç”¨ä¸åŒå›¾æ ‡
- çŠ¶æ€å›¾æ ‡æ˜¾ç¤º
- æ“ä½œå›¾æ ‡æç¤º

âœ… **è¯„åˆ†æ˜¾ç¤º**
- æ˜Ÿçº§è¯„åˆ†å±•ç¤º
- æ•°å­—è¯„åˆ†æ˜¾ç¤º

## ğŸ“‹ API æ¥å£åˆ—è¡¨

| æ¥å£ | æ–¹æ³• | åŠŸèƒ½ |
|------|------|------|
| `/api/emby/test` | GET | æµ‹è¯•è¿æ¥ |
| `/api/emby/server-info` | GET | è·å–æœåŠ¡å™¨ä¿¡æ¯ |
| `/api/emby/libraries` | GET | è·å–æ‰€æœ‰åª’ä½“åº“ |
| `/api/emby/libraries/{id}/items` | GET | è·å–åª’ä½“é¡¹ï¼ˆæ”¯æŒåˆ†é¡µï¼‰ |
| `/api/emby/items/{id}` | GET | è·å–åª’ä½“é¡¹è¯¦æƒ… |
| `/api/emby/genres` | GET | è·å–æ‰€æœ‰ç±»å‹ |
| `/api/emby/tags` | GET | è·å–æ‰€æœ‰æ ‡ç­¾ |
| `/api/emby/studios` | GET | è·å–æ‰€æœ‰å·¥ä½œå®¤ |
| `/api/emby/search` | GET | æœç´¢åª’ä½“é¡¹ |
| `/api/emby/sync` | POST | åŒæ­¥æ‰€æœ‰æ•°æ® |

## ğŸ”§ é…ç½®è¯´æ˜

### åç«¯é…ç½®ï¼ˆapplication.ymlï¼‰

```yaml
app:
  emby:
    server-url: http://your-emby-server:8096  # Emby æœåŠ¡å™¨åœ°å€
    api-key: your-api-key-here                # API å¯†é’¥
    user-id: ""                               # ç”¨æˆ·IDï¼ˆå¯é€‰ï¼‰
    timeout: 30000                            # è¶…æ—¶æ—¶é—´
    enabled: true                             # æ˜¯å¦å¯ç”¨
```

### å‰ç«¯é…ç½®

**å¼€å‘ç¯å¢ƒ**ï¼ˆvite.config.jsï¼‰ï¼š
```javascript
proxy: {
  '/api': {
    target: 'http://104.251.122.51:8099',
    changeOrigin: true
  }
}
```

**ç”Ÿäº§ç¯å¢ƒ**ï¼ˆrequest.jsï¼‰ï¼š
```javascript
baseURL: 'http://104.251.122.51:8099/api'
```

## ğŸš€ ä½¿ç”¨æ­¥éª¤

### 1. è·å– Emby API Key

1. ç™»å½• Emby â†’ è®¾ç½® â†’ é«˜çº§ â†’ API å¯†é’¥
2. æ–°å»º API å¯†é’¥
3. å¤åˆ¶ç”Ÿæˆçš„ Key

### 2. é…ç½®åç«¯

ç¼–è¾‘ `application.yml`ï¼Œå¡«å…¥ Emby æœåŠ¡å™¨åœ°å€å’Œ API Key

### 3. å¯åŠ¨æœåŠ¡

**Windows**: åŒå‡» `start.bat`
**Linux/Mac**: è¿è¡Œ `./start.sh`

æˆ–æ‰‹åŠ¨å¯åŠ¨ï¼š
```bash
# åç«¯
cd backend && mvn spring-boot:run

# å‰ç«¯
cd frontend && npm run dev
```

### 4. è®¿é—®é¡µé¢

- ä¸»é¡µ: http://localhost:3000
- Emby ç®¡ç†: http://localhost:3000/emby
- Emby æµ‹è¯•: http://localhost:3000/emby-test

## ğŸ“Š æŠ€æœ¯æ ˆ

### åç«¯
- Spring Boot 2.7.18
- Hutool 5.8.16ï¼ˆHTTP å·¥å…·ï¼‰
- Lombokï¼ˆç®€åŒ–ä»£ç ï¼‰
- MyBatis-Plusï¼ˆæ•°æ®åº“ï¼‰

### å‰ç«¯
- Vue 3.4.15
- Vite 5.0.11
- Element Plus 2.5.4
- Vue Router 4.2.5
- Axios 1.6.5
- Sass 1.69.7

## ğŸ¨ ç•Œé¢é¢„è§ˆ

### Emby ç®¡ç†é¡µé¢
- é¡¶éƒ¨ï¼šè¿æ¥çŠ¶æ€ã€æµ‹è¯•æŒ‰é’®ã€åŒæ­¥æŒ‰é’®
- æœåŠ¡å™¨ä¿¡æ¯å¡ç‰‡
- åª’ä½“åº“åˆ—è¡¨è¡¨æ ¼
- åˆ†ç±»ä¿¡æ¯å¡ç‰‡ï¼ˆç±»å‹/æ ‡ç­¾/å·¥ä½œå®¤ï¼‰

### åª’ä½“é¡¹å¯¹è¯æ¡†
- åª’ä½“é¡¹åˆ—è¡¨è¡¨æ ¼
- æœç´¢æ¡†
- è¯¦æƒ…æŒ‰é’®

### è¯¦æƒ…å¯¹è¯æ¡†
- å®Œæ•´çš„åª’ä½“é¡¹ä¿¡æ¯
- æè¿°ä¿¡æ¯
- åˆ†ç±»æ ‡ç­¾
- æ–‡ä»¶ä¿¡æ¯

## ğŸ” ä½¿ç”¨ Surge æŠ“åŒ…

### é…ç½® Surge

```ini
[MITM]
hostname = your-emby-server.com, %APPEND%

[Rule]
DOMAIN,your-emby-server.com,DIRECT
```

### æŸ¥çœ‹è¯·æ±‚

1. å¯ç”¨ Surge MITM
2. æ‰“å¼€ Recent Requests
3. è®¿é—® Emby åº”ç”¨
4. æŸ¥çœ‹æ‰€æœ‰ API è¯·æ±‚

## ğŸ’¡ æ‰©å±•å»ºè®®

### ä¸ä¸Šä¼ ç³»ç»Ÿé›†æˆ

```java
// ç¤ºä¾‹ï¼šå°† Emby åª’ä½“ä¸Šä¼ åˆ° Google Drive
List<EmbyItem> items = embyService.getLibraryItems(libraryId);
for (EmbyItem item : items) {
    UploadTask task = new UploadTask();
    task.setSourcePath(item.getPath());
    task.setTargetPath("/GoogleDrive/" + item.getName());
    uploadTaskService.createTask(task);
}
```

### å®šæ—¶åŒæ­¥

```java
@Scheduled(cron = "0 0 2 * * ?")  // æ¯å¤©å‡Œæ™¨2ç‚¹
public void syncEmbyData() {
    embyService.syncAllLibraries();
}
```

### æ•°æ®å¯¼å‡º

```java
// å¯¼å‡ºä¸º JSON
List<EmbyLibrary> libraries = embyService.getAllLibraries();
String json = JSONUtil.toJsonStr(libraries);
FileUtil.writeUtf8String(json, "emby-data.json");
```

## â“ å¸¸è§é—®é¢˜

### Q1: è¿æ¥å¤±è´¥
**A**: æ£€æŸ¥æœåŠ¡å™¨åœ°å€ã€API Keyã€ç½‘ç»œè¿æ¥

### Q2: æ•°æ®ä¸ºç©º
**A**: æ£€æŸ¥ç”¨æˆ·æƒé™ã€åª’ä½“åº“å†…å®¹ã€åˆ·æ–°æ•°æ®

### Q3: è¶…æ—¶é”™è¯¯
**A**: å¢åŠ  timeout é…ç½®ã€ä½¿ç”¨åˆ†é¡µæŸ¥è¯¢

### Q4: å›¾ç‰‡ä¸æ˜¾ç¤º
**A**: å½“å‰ç‰ˆæœ¬æš‚ä¸æ”¯æŒå›¾ç‰‡ï¼Œè®¡åˆ’åç»­ç‰ˆæœ¬æ·»åŠ 

## ğŸ“ å¾…å®ç°åŠŸèƒ½

- [ ] å›¾ç‰‡æ˜¾ç¤ºï¼ˆæµ·æŠ¥ã€èƒŒæ™¯ï¼‰
- [ ] åˆ†é¡µåŠŸèƒ½ä¼˜åŒ–
- [ ] é«˜çº§æœç´¢ï¼ˆå¤šæ¡ä»¶ï¼‰
- [ ] æ‰¹é‡æ“ä½œ
- [ ] æ•°æ®å¯¼å‡ºï¼ˆJSON/CSVï¼‰
- [ ] å®šæ—¶åŒæ­¥ä»»åŠ¡
- [ ] ç»Ÿè®¡åˆ†æå›¾è¡¨
- [ ] ä¸ä¸Šä¼ ç³»ç»Ÿæ·±åº¦é›†æˆ
- [ ] æ’­æ”¾å†å²è®°å½•
- [ ] æ”¶è—åŠŸèƒ½

## ğŸ“š ç›¸å…³æ–‡æ¡£

1. **EMBY_INTEGRATION_GUIDE.md** - å®Œæ•´çš„åç«¯é›†æˆæŒ‡å—
2. **EMBY_FRONTEND_GUIDE.md** - è¯¦ç»†çš„å‰ç«¯ä½¿ç”¨æŒ‡å—
3. **EMBY_QUICKSTART.md** - å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸ‰ æ€»ç»“

Emby é›†æˆåŠŸèƒ½å·²å®Œå…¨å®ç°ï¼åŒ…æ‹¬ï¼š

âœ… 10 ä¸ª REST API æ¥å£
âœ… 2 ä¸ªå‰ç«¯é¡µé¢ï¼ˆç®¡ç†+æµ‹è¯•ï¼‰
âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†
âœ… å“åº”å¼ UI è®¾è®¡
âœ… è¯¦ç»†çš„æ–‡æ¡£è¯´æ˜
âœ… å¯åŠ¨è„šæœ¬
âœ… Surge æŠ“åŒ…æ”¯æŒ

ç°åœ¨ä½ å¯ä»¥ï¼š
1. è¯»å– Emby çš„å…¨éƒ¨ç›®å½•å’Œåˆ†ç±»
2. æµè§ˆå’Œæœç´¢åª’ä½“å†…å®¹
3. æŸ¥çœ‹è¯¦ç»†çš„åª’ä½“ä¿¡æ¯
4. è¿›è¡Œæ‰¹é‡æ“ä½œå’ŒåŒæ­¥
5. ä¸ç°æœ‰çš„ä¸Šä¼ ç³»ç»Ÿé›†æˆ

**ç¥ä½¿ç”¨æ„‰å¿«ï¼** ğŸ¬ğŸ‰
