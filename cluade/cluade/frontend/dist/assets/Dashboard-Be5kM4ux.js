import{r as A}from"./request-BS_vZder.js";import{_ as B,r as z,a as U,o as C,c as M,b as p,d as s,w as a,e as n,f as t,t as i,g as T,h as D,i as S,j as E,E as m}from"./index-BfPiXcrJ.js";import"./index-B9ygI19o.js";function N(){return A({url:"/dashboard/stats",method:"get"})}const V={class:"dashboard-container"},F={class:"stat-content"},I={class:"stat-icon",style:{"background-color":"#007aff"}},L={class:"stat-info"},R={class:"stat-value"},j={class:"stat-content"},q={class:"stat-icon",style:{"background-color":"#34c759"}},G={class:"stat-info"},K={class:"stat-value"},H={class:"stat-content"},J={class:"stat-icon",style:{"background-color":"#ff9500"}},O={class:"stat-info"},P={class:"stat-value"},Q={class:"stat-content"},W={class:"stat-icon",style:{"background-color":"#ff3b30"}},X={class:"stat-info"},Y={class:"stat-value"},Z={class:"card-header"},$={class:"overview-item"},tt={class:"overview-value"},st={class:"overview-item"},at={class:"overview-value"},ot={__name:"Dashboard",setup(et){const l=z({totalAccounts:0,availableAccounts:0,runningTasks:0,todayUpload:0}),_=U(!1),h=e=>{if(e===0)return"0 B";const o=1024,v=["B","KB","MB","GB","TB"],c=Math.floor(Math.log(e)/Math.log(o));return(e/Math.pow(o,c)).toFixed(2)+" "+v[c]},u=async()=>{_.value=!0;try{const e=await N();e.code===200?(l.totalAccounts=e.data.totalAccounts||0,l.availableAccounts=e.data.availableAccounts||0,l.runningTasks=e.data.runningTasks||0,l.todayUpload=e.data.todayUploadSize||0):m.error(e.message||"加载统计数据失败")}catch(e){console.error("加载统计数据失败:",e),m.error("加载统计数据失败")}finally{_.value=!1}};return C(()=>{u(),setInterval(u,3e4)}),(e,o)=>{const v=n("User"),c=n("el-icon"),r=n("el-card"),d=n("el-col"),g=n("CircleCheck"),b=n("List"),k=n("Upload"),f=n("el-row"),w=n("Refresh"),y=n("el-button"),x=D("loading");return p(),M("div",V,[s(f,{gutter:20},{default:a(()=>[s(d,{xs:24,sm:12,md:6},{default:a(()=>[s(r,{class:"stat-card"},{default:a(()=>[t("div",F,[t("div",I,[s(c,{size:30},{default:a(()=>[s(v)]),_:1})]),t("div",L,[t("div",R,i(l.totalAccounts),1),o[0]||(o[0]=t("div",{class:"stat-label"},"总账号数",-1))])])]),_:1})]),_:1}),s(d,{xs:24,sm:12,md:6},{default:a(()=>[s(r,{class:"stat-card"},{default:a(()=>[t("div",j,[t("div",q,[s(c,{size:30},{default:a(()=>[s(g)]),_:1})]),t("div",G,[t("div",K,i(l.availableAccounts),1),o[1]||(o[1]=t("div",{class:"stat-label"},"可用账号",-1))])])]),_:1})]),_:1}),s(d,{xs:24,sm:12,md:6},{default:a(()=>[s(r,{class:"stat-card"},{default:a(()=>[t("div",H,[t("div",J,[s(c,{size:30},{default:a(()=>[s(b)]),_:1})]),t("div",O,[t("div",P,i(l.runningTasks),1),o[2]||(o[2]=t("div",{class:"stat-label"},"运行中任务",-1))])])]),_:1})]),_:1}),s(d,{xs:24,sm:12,md:6},{default:a(()=>[s(r,{class:"stat-card"},{default:a(()=>[t("div",Q,[t("div",W,[s(c,{size:30},{default:a(()=>[s(k)]),_:1})]),t("div",X,[t("div",Y,i(h(l.todayUpload)),1),o[3]||(o[3]=t("div",{class:"stat-label"},"今日上传",-1))])])]),_:1})]),_:1})]),_:1}),s(f,{gutter:20,style:{"margin-top":"20px"}},{default:a(()=>[s(d,{span:24},{default:a(()=>[T((p(),S(r,null,{header:a(()=>[t("div",Z,[o[5]||(o[5]=t("span",null,"系统概览",-1)),s(y,{type:"primary",size:"small",onClick:u},{default:a(()=>[s(c,null,{default:a(()=>[s(w)]),_:1}),o[4]||(o[4]=E(" 刷新 ",-1))]),_:1})])]),default:a(()=>[s(f,{gutter:20},{default:a(()=>[s(d,{span:12},{default:a(()=>[t("div",$,[o[6]||(o[6]=t("div",{class:"overview-label"},"总任务数",-1)),t("div",tt,i(l.totalTasks||0),1)])]),_:1}),s(d,{span:12},{default:a(()=>[t("div",st,[o[7]||(o[7]=t("div",{class:"overview-label"},"账号使用率",-1)),t("div",at,i(l.totalAccounts>0?(l.availableAccounts/l.totalAccounts*100).toFixed(1):0)+"% ",1)])]),_:1})]),_:1})]),_:1})),[[x,_.value]])]),_:1})]),_:1})])}}},dt=B(ot,[["__scopeId","data-v-efa688a0"]]);export{dt as default};
