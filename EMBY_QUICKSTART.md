# ğŸ¬ Emby é›†æˆå¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸ“‹ å‰ç½®è¦æ±‚

- âœ… Node.js 16+ å·²å®‰è£…
- âœ… Java 8+ å·²å®‰è£…
- âœ… Maven å·²å®‰è£…
- âœ… Emby æœåŠ¡å™¨å·²è¿è¡Œ

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### Windows ç”¨æˆ·

åŒå‡»è¿è¡Œ `start.bat`

### Linux/Mac ç”¨æˆ·

```bash
chmod +x start.sh
./start.sh
```

### æ‰‹åŠ¨å¯åŠ¨

#### 1. å¯åŠ¨åç«¯

```bash
cd backend
mvn spring-boot:run
```

#### 2. å¯åŠ¨å‰ç«¯

```bash
cd frontend
npm install  # é¦–æ¬¡è¿è¡Œéœ€è¦
npm run dev
```

## âš™ï¸ é…ç½® Emby

### 1. è·å– API Key

1. ç™»å½• Emby Web ç•Œé¢ï¼ˆé€šå¸¸æ˜¯ `http://your-server:8096`ï¼‰
2. è¿›å…¥ **è®¾ç½®** â†’ **é«˜çº§** â†’ **API å¯†é’¥**
3. ç‚¹å‡» **æ–°å»º API å¯†é’¥**
4. è¾“å…¥åç§°ï¼ˆå¦‚ "GD Upload Manager"ï¼‰
5. å¤åˆ¶ç”Ÿæˆçš„ API Key

### 2. é…ç½®åç«¯

ç¼–è¾‘ `backend/src/main/resources/application.yml`ï¼š

```yaml
app:
  emby:
    server-url: http://your-emby-server:8096  # ä½ çš„ Emby æœåŠ¡å™¨åœ°å€
    api-key: your-api-key-here                # åˆšæ‰è·å–çš„ API Key
    user-id: ""                               # ç•™ç©ºè‡ªåŠ¨è·å–
    timeout: 30000
    enabled: true
```

### 3. é‡å¯åç«¯æœåŠ¡

æŒ‰ `Ctrl+C` åœæ­¢åç«¯ï¼Œç„¶åé‡æ–°è¿è¡Œ `mvn spring-boot:run`

## ğŸŒ è®¿é—®åœ°å€

å¯åŠ¨æˆåŠŸåï¼Œè®¿é—®ä»¥ä¸‹åœ°å€ï¼š

- **å‰ç«¯ä¸»é¡µ**: http://localhost:3000
- **Emby ç®¡ç†**: http://localhost:3000/emby
- **Emby æµ‹è¯•**: http://localhost:3000/emby-test
- **åç«¯ API**: http://localhost:8099/api

## ğŸ“š åŠŸèƒ½è¯´æ˜

### Emby ç®¡ç†é¡µé¢

- âœ… æµ‹è¯• Emby æœåŠ¡å™¨è¿æ¥
- âœ… æŸ¥çœ‹æœåŠ¡å™¨ä¿¡æ¯
- âœ… æµè§ˆæ‰€æœ‰åª’ä½“åº“
- âœ… æŸ¥çœ‹åª’ä½“é¡¹è¯¦æƒ…
- âœ… æœç´¢åª’ä½“å†…å®¹
- âœ… æŸ¥çœ‹åˆ†ç±»ï¼ˆç±»å‹/æ ‡ç­¾/å·¥ä½œå®¤ï¼‰
- âœ… ä¸€é”®åŒæ­¥æ‰€æœ‰æ•°æ®

### Emby æµ‹è¯•é¡µé¢

- âœ… ç›´æ¥æµ‹è¯• Emby API è¿æ¥
- âœ… å¿«é€Ÿæµ‹è¯•å„ä¸ªæ¥å£
- âœ… æŸ¥çœ‹åŸå§‹ API å“åº”

## ğŸ”§ API æ¥å£

æ‰€æœ‰æ¥å£åŸºç¡€è·¯å¾„ï¼š`/api/emby`

| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/test` | GET | æµ‹è¯•è¿æ¥ |
| `/server-info` | GET | è·å–æœåŠ¡å™¨ä¿¡æ¯ |
| `/libraries` | GET | è·å–æ‰€æœ‰åª’ä½“åº“ |
| `/libraries/{id}/items` | GET | è·å–åª’ä½“é¡¹ |
| `/items/{id}` | GET | è·å–åª’ä½“é¡¹è¯¦æƒ… |
| `/genres` | GET | è·å–æ‰€æœ‰ç±»å‹ |
| `/tags` | GET | è·å–æ‰€æœ‰æ ‡ç­¾ |
| `/studios` | GET | è·å–æ‰€æœ‰å·¥ä½œå®¤ |
| `/search?keyword=xxx` | GET | æœç´¢åª’ä½“é¡¹ |
| `/sync` | POST | åŒæ­¥æ‰€æœ‰æ•°æ® |

## ğŸ“– è¯¦ç»†æ–‡æ¡£

- **é›†æˆæŒ‡å—**: [EMBY_INTEGRATION_GUIDE.md](./EMBY_INTEGRATION_GUIDE.md)
- **å‰ç«¯æŒ‡å—**: [EMBY_FRONTEND_GUIDE.md](./EMBY_FRONTEND_GUIDE.md)

## â“ å¸¸è§é—®é¢˜

### Q: è¿æ¥æµ‹è¯•å¤±è´¥ï¼Ÿ

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. Emby æœåŠ¡å™¨æ˜¯å¦è¿è¡Œ
2. `server-url` é…ç½®æ˜¯å¦æ­£ç¡®
3. `api-key` æ˜¯å¦æœ‰æ•ˆ
4. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
5. é˜²ç«å¢™æ˜¯å¦é˜»æ­¢è¿æ¥

### Q: åª’ä½“åº“åˆ—è¡¨ä¸ºç©ºï¼Ÿ

**A**: å¯èƒ½åŸå› ï¼š
1. Emby ä¸­æ²¡æœ‰åª’ä½“åº“
2. API Key å¯¹åº”ç”¨æˆ·æ²¡æœ‰æƒé™
3. ç‚¹å‡»"åˆ·æ–°"æŒ‰é’®é‡æ–°åŠ è½½

### Q: å‰ç«¯æ— æ³•è®¿é—®åç«¯ï¼Ÿ

**A**: æ£€æŸ¥ï¼š
1. åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨ï¼ˆç«¯å£ 8099ï¼‰
2. å‰ç«¯ä»£ç†é…ç½®æ˜¯å¦æ­£ç¡®
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### Q: å¦‚ä½•ä½¿ç”¨ Surge æŠ“åŒ…ï¼Ÿ

**A**: å‚è€ƒ [Surge æŠ“åŒ…é…ç½®](#ä½¿ç”¨-surge-æŠ“åŒ…)

## ğŸ› ï¸ ä½¿ç”¨ Surge æŠ“åŒ…

### é…ç½® Surge

åœ¨ Surge é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š

```ini
[MITM]
hostname = your-emby-server.com, %APPEND%

[Rule]
DOMAIN,your-emby-server.com,DIRECT
```

### å¯ç”¨ MITM

1. æ‰“å¼€ Surge
2. å¯ç”¨ **è§£å¯† HTTPS æµé‡**
3. å®‰è£…å¹¶ä¿¡ä»» CA è¯ä¹¦

### æŸ¥çœ‹è¯·æ±‚

1. æ‰“å¼€ Surge çš„ **Recent Requests**
2. è®¿é—® Emby æˆ–ä½¿ç”¨åº”ç”¨
3. æŸ¥çœ‹æ‰€æœ‰ Emby API è¯·æ±‚

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### 1. æ‰¹é‡å¯¼å‡ºåª’ä½“ä¿¡æ¯

è®¿é—® `/api/emby/sync` æ¥å£ï¼Œè·å–æ‰€æœ‰åª’ä½“åº“å’Œåª’ä½“é¡¹ä¿¡æ¯ã€‚

### 2. æœç´¢ç‰¹å®šå†…å®¹

ä½¿ç”¨ `/api/emby/search?keyword=xxx` æœç´¢åª’ä½“é¡¹ã€‚

### 3. ä¸ä¸Šä¼ ç³»ç»Ÿé›†æˆ

å°† Emby åª’ä½“é¡¹è·¯å¾„ä¸ Google Drive ä¸Šä¼ ä»»åŠ¡å…³è”ã€‚

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ backend/                 # åç«¯ Spring Boot é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ main/
â”‚   â”‚       â”œâ”€â”€ java/
â”‚   â”‚       â”‚   â””â”€â”€ com/gdupload/
â”‚   â”‚       â”‚       â”œâ”€â”€ config/
â”‚   â”‚       â”‚       â”‚   â””â”€â”€ EmbyProperties.java
â”‚   â”‚       â”‚       â”œâ”€â”€ controller/
â”‚   â”‚       â”‚       â”‚   â””â”€â”€ EmbyController.java
â”‚   â”‚       â”‚       â”œâ”€â”€ dto/
â”‚   â”‚       â”‚       â”‚   â”œâ”€â”€ EmbyItem.java
â”‚   â”‚       â”‚       â”‚   â”œâ”€â”€ EmbyLibrary.java
â”‚   â”‚       â”‚       â”‚   â””â”€â”€ EmbyGenre.java
â”‚   â”‚       â”‚       â””â”€â”€ service/
â”‚   â”‚       â”‚           â”œâ”€â”€ IEmbyService.java
â”‚   â”‚       â”‚           â””â”€â”€ impl/
â”‚   â”‚       â”‚               â””â”€â”€ EmbyServiceImpl.java
â”‚   â”‚       â””â”€â”€ resources/
â”‚   â”‚           â””â”€â”€ application.yml
â”‚   â””â”€â”€ pom.xml
â”‚
â”œâ”€â”€ frontend/                # å‰ç«¯ Vue 3 é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ emby.js
â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”‚   â”œâ”€â”€ EmbyManager.vue
â”‚   â”‚   â”‚   â””â”€â”€ EmbyTest.vue
â”‚   â”‚   â”œâ”€â”€ router/
â”‚   â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â””â”€â”€ request.js
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.js
â”‚
â”œâ”€â”€ EMBY_INTEGRATION_GUIDE.md    # åç«¯é›†æˆæŒ‡å—
â”œâ”€â”€ EMBY_FRONTEND_GUIDE.md       # å‰ç«¯ä½¿ç”¨æŒ‡å—
â”œâ”€â”€ start.sh                     # Linux/Mac å¯åŠ¨è„šæœ¬
â””â”€â”€ start.bat                    # Windows å¯åŠ¨è„šæœ¬
```

## ğŸ” å®‰å…¨å»ºè®®

1. **ä¸è¦æäº¤ API Key** åˆ°ä»£ç ä»“åº“
2. **ä½¿ç”¨ç¯å¢ƒå˜é‡** å­˜å‚¨æ•æ„Ÿä¿¡æ¯
3. **å¯ç”¨ HTTPS** ä¿æŠ¤æ•°æ®ä¼ è¾“
4. **é™åˆ¶ API è®¿é—®** ä½¿ç”¨é˜²ç«å¢™è§„åˆ™

## ğŸš§ å¼€å‘è®¡åˆ’

- [ ] å›¾ç‰‡æ˜¾ç¤ºæ”¯æŒ
- [ ] åˆ†é¡µåŠŸèƒ½
- [ ] é«˜çº§æœç´¢
- [ ] æ‰¹é‡æ“ä½œ
- [ ] å¯¼å‡ºåŠŸèƒ½
- [ ] ä¸ä¸Šä¼ ç³»ç»Ÿæ·±åº¦é›†æˆ
- [ ] å®šæ—¶åŒæ­¥ä»»åŠ¡
- [ ] æ•°æ®ç»Ÿè®¡åˆ†æ

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**ç¥ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£æˆ–æäº¤ Issueã€‚
