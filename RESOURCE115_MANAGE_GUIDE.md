# 115 资源管理模块 - 配置说明

## 功能概述

完整的 115 资源管理模块，支持可视化管理资源，包括增删改查、批量操作、TMDB ID 补充等功能。

## 实现文件

### 后端

1. **IResource115ManageService.java** - Service 接口
   - 分页查询
   - 增删改查
   - 批量删除

2. **Resource115ManageServiceImpl.java** - Service 实现
   - 实现所有管理功能
   - 支持关键词搜索

3. **Resource115ManageController.java** - REST API 控制器
   - 提供完整的 RESTful API

### 前端

1. **resource115Manage.js** - API 封装
   - 封装所有后端接口

2. **Resource115Manage.vue** - 页面组件
   - 完整的管理界面
   - 表格展示
   - 添加/编辑对话框
   - 搜索功能
   - 批量操作

## 路由配置

### 方式1：修改现有路由文件

找到 `frontend/src/router/index.js`，添加路由：

```javascript
{
  path: '/resource115',
  name: 'Resource115Manage',
  component: () => import('@/views/Resource115Manage.vue'),
  meta: {
    title: '115资源管理'
  }
}
```

### 方式2：如果使用嵌套路由

```javascript
{
  path: '/manage',
  name: 'Manage',
  component: Layout,
  children: [
    {
      path: 'resource115',
      name: 'Resource115Manage',
      component: () => import('@/views/Resource115Manage.vue'),
      meta: {
        title: '115资源管理'
      }
    }
  ]
}
```

## 菜单配置

在侧边栏菜单中添加入口（根据您的项目结构调整）：

```javascript
{
  title: '115资源管理',
  icon: 'Files',
  path: '/resource115'
}
```

## 功能特性

### 1. 资源列表

- ✅ 分页展示
- ✅ 表格展示所有字段
- ✅ 支持排序
- ✅ 支持多选

### 2. 搜索功能

- ✅ 支持搜索资源名称
- ✅ 支持搜索 TMDB ID
- ✅ 支持搜索资源类型
- ✅ 实时搜索

### 3. 添加资源

- ✅ 表单验证
- ✅ 必填项检查
- ✅ 支持搜索 TMDB ID

### 4. 编辑资源

- ✅ 加载现有数据
- ✅ 修改所有字段
- ✅ 实时保存

### 5. 删除资源

- ✅ 单个删除
- ✅ 批量删除
- ✅ 确认提示

### 6. TMDB ID 管理

- ✅ 单个资源搜索 TMDB ID
- ✅ 批量补充所有资源的 TMDB ID
- ✅ 显示补充进度

## 页面截图说明

### 主界面

```
┌─────────────────────────────────────────────────────────┐
│ 115 资源管理                                    [资源库] │
│                                                          │
│ [+ 添加资源] [批量补充TMDB ID] [批量删除(0)]            │
└─────────────────────────────────────────────────────────┘

┌───────────────────��─────────────────────────────────────┐
│ [搜索框: 搜索资源名称、TMDB ID、类型...]      [搜索]    │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│ ☑ ID  资源名称          TMDB ID  类型  大小  链接  操作 │
├─────────────────────────────────────────────────────────┤
│ ☐ 1   大秦赋 (2020)    114043   国产剧 109.73 ...  编辑│
│ ☐ 2   鱿鱼游戏 (2021)  93405    韩剧   16.59  ...  编辑│
│ ☐ 3   韫色过浓 (2020)  未设置   国产剧 168.87 ...  编辑│
└─────────────────────────────────────────────────────────┘

                    [共 6 条] [每页 20 条] [1/1]
```

### 添加/编辑对话框

```
┌─────────────────────────────────────┐
│ 添加资源                      [×]   │
├─────────────────────────────────────┤
│ 资源名称: [________________]        │
│ TMDB ID:  [________________] [搜索] │
│ 资源类型: [下拉选择▼]               │
│ 资源大小: [________________]        │
│ 分享链接: [________________]        │
│ 访问码:   [________________]        │
├─────────────────────────────────────┤
│                    [取消]  [确定]   │
└─────────────────────────────────────┘
```

## API 接口

### 1. 分页查询

```
GET /resource115/manage/page?page=1&size=20&keyword=大秦赋
```

**响应**:
```json
{
  "code": 200,
  "data": {
    "records": [...],
    "total": 6,
    "size": 20,
    "current": 1
  }
}
```

### 2. 添加资源

```
POST /resource115/manage
Content-Type: application/json

{
  "name": "大秦赋 (2020)",
  "tmdbId": "114043",
  "type": "国产剧",
  "size": "109.73",
  "url": "https://115.com/s/xxx",
  "code": "1234"
}
```

### 3. 更新资源

```
PUT /resource115/manage
Content-Type: application/json

{
  "id": 1,
  "name": "大秦赋 (2020)",
  "tmdbId": "114043",
  ...
}
```

### 4. 删除资源

```
DELETE /resource115/manage/1
```

### 5. 批量删除

```
DELETE /resource115/manage/batch
Content-Type: application/json

[1, 2, 3]
```

## 使用流程

### 1. 添加资源

1. 点击"添加资源"按钮
2. 填写资源信息
3. 点击"搜索"按钮自动查找 TMDB ID（可选）
4. 点击"确定"保存

### 2. 编辑资源

1. 点击资源行的"编辑"按钮
2. 修改资源信息
3. 点击"确定"保存

### 3. 删除资源

**单个删除**:
1. 点击资源行的"删除"按钮
2. 确认删除

**批量删除**:
1. 勾选要删除的资源
2. 点击"批量删除"按钮
3. 确认删除

### 4. 搜索资源

1. 在搜索框输入关键词
2. 按回车或点击"搜索"按钮
3. 查看搜索结果

### 5. 批量补充 TMDB ID

1. 点击"批量补充 TMDB ID"按钮
2. 确认操作
3. 等待补充完成
4. 查看补充结果

## 样式说明

### 颜色方案

- 主色调：Element Plus 默认蓝色
- 成功：绿色（TMDB ID 已设置）
- 警告：橙色（批量操作）
- 危险：红色（删除操作）
- 信息：灰色（TMDB ID 未设置）

### 布局

- 响应式设计
- 表格自适应宽度
- 固定操作列
- 分页居中显示

## 注意事项

1. **权限控制**: 建议添加权限验证，防止未授权访问
2. **数据验证**: 前后端都进行数据验证
3. **错误处理**: 所有操作都有错误提示
4. **加载状态**: 所有异步操作都有 loading 状态
5. **确认提示**: 删除操作都有确认提示

## 扩展建议

### 1. 导入导出

添加 Excel 导入导出功能：

```javascript
// 导出
const handleExport = () => {
  // 导出为 Excel
}

// 导入
const handleImport = (file) => {
  // 从 Excel 导入
}
```

### 2. 高级搜索

添加更多搜索条件：

```vue
<el-form inline>
  <el-form-item label="类型">
    <el-select v-model="searchType">
      <el-option label="全部" value="" />
      <el-option label="国产剧" value="国产剧" />
      ...
    </el-select>
  </el-form-item>
  <el-form-item label="TMDB ID">
    <el-select v-model="hasTmdbId">
      <el-option label="全部" value="" />
      <el-option label="已设置" value="1" />
      <el-option label="未设置" value="0" />
    </el-select>
  </el-form-item>
</el-form>
```

### 3. 批量编辑

添加批量修改类型、批量设置访问码等功能。

### 4. 资源预览

点击资源名称显示详细信息，包括 TMDB 海报、简介等。

---

**实施日期**: 2026-02-03
**功能状态**: ✅ 已完成
